---
name: cat:status
description: Show hierarchy status with visual tree
model: haiku
context: fork
allowed-tools:
  - Bash
  - Read
---

<objective>

Display the complete CAT hierarchy status with a visual tree showing all major versions, minor versions,
and tasks with their current status.

Provides situational awareness for project progress.

</objective>

<process>

<step name="render-status">

**Run the status script and capture output to a temp file:**

```bash
"${CLAUDE_PLUGIN_ROOT}/scripts/status.sh" .claude/cat > /tmp/cat-status-output.txt 2>&1
```

This script handles BOTH data collection AND rendering with correct Unicode display widths.

If the script fails with "No planning structure found", inform user to run `/cat:init`.

**Then use the Read tool to read `/tmp/cat-status-output.txt` and output the EXACT contents VERBATIM.**

IMPORTANT:
- Do NOT rely on the Bash tool result display - Claude Code collapses large outputs.
- Do NOT summarize or paraphrase the file contents - output them EXACTLY as shown in the Read result.
- The user expects to see the complete box drawing with all lines, not a summary.

**MANDATORY OUTPUT TEMPLATE** (M145 - enforced after 2nd recurrence):

Your response MUST follow this EXACT structure:

```
[Read tool result shows file contents]

Your next message MUST be:

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ [COPY ENTIRE BOX FROM READ RESULT - ALL LINES INCLUDING THIS ONE]     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

---

## ğŸš€ NEXT STEPS
[then continue with next-steps section]
```

**VALIDATION**: Before outputting NEXT STEPS, verify your response contains the `â•­` and `â•°` box characters from the Read result. If it doesn't, you skipped the verbatim output step.

</step>

<step name="next-steps">

**After the status display, show the NEXT STEPS table:**

**ğŸš€ NEXT STEPS**

| Option | Action | Command |
|--------|--------|---------|
| [**1**] | Execute a task | `/cat:work {version}-<task-name>` |
| [**2**] | Add new task | `/cat:add` |

---

**Legend:** â˜‘ï¸ Completed Â· ğŸ”„ In Progress Â· ğŸ”³ Pending Â· ğŸš« Blocked Â· ğŸš§ Gate Waiting

</step>

</process>

<output_format>

The status output should be:
1. Generated by the status.sh script (NOT by LLM rendering)
2. Followed by NEXT STEPS table
3. Followed by Legend

</output_format>

<success_criteria>

- [ ] Script executed successfully
- [ ] Box display shown (from script output)
- [ ] NEXT STEPS table displayed
- [ ] Legend displayed

</success_criteria>

<history>

This skill was simplified in M142 (2026-01-19) to fix the 5th recurrence of status alignment issues
(M136â†’M137â†’M140â†’M141â†’M142).

**Root cause:** LLMs cannot reliably calculate character-level padding for Unicode text.

**Solution:** Move ALL rendering to a bash script that uses Python for width calculation.
The skill now just runs the script and outputs the result.

Previous versions had complex inline padding calculations, PRE-OUTPUT CHECKLISTs, and validation
steps - all of which failed because they still relied on LLM padding calculations.

**M143 update (2026-01-19):** Changed to write script output to temp file, then use Read tool.
Claude Code collapses large Bash tool results, so output must be shown via Read tool instead.

**M144 update (2026-01-19):** Clarified that file contents must be output VERBATIM, not summarized.
"Display its contents" was ambiguous - agent summarized instead of echoing exact output.

**M149 update (2026-01-19):** Added explicit anti-pattern - NEVER manually type box characters.
Even in other contexts (like /cat:work), agents must use scripts, not manual box typing.

**M145 update (2026-01-19):** Added MANDATORY OUTPUT TEMPLATE with validation checkpoint.
M144's "VERBATIM" instruction failed - agent still skipped output. Added structural template
showing exact expected format, plus validation check for box characters before NEXT STEPS.

</history>
