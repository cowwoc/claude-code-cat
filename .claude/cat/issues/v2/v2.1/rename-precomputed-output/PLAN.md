# Plan: rename-precomputed-output

## Background

Skills contain `!` preprocessor directives (e.g., `!get-status-display.sh`) that trigger
scripts. These scripts return output that gets injected into the conversation context for
the skill to display. This is **preprocessor output** - output generated by preprocessing
skill content before the agent sees it.

## Current State

Inconsistent terminology exists across the codebase:
- "pre-computed output" in some docs and comments
- "output template" in other places and conversation markers
- File/class names use "precompute" (e.g., `skill_precompute.py`)

## Target State

Unified terminology: **"preprocessor output"**
- Accurately describes the mechanism (`!` is a preprocessor directive)
- Clear, concise, technically accurate

## Satisfies
None - terminology consistency task

## Risk Assessment
- **Risk Level:** LOW
- **Breaking Changes:** None - terminology only, no API changes
- **Mitigation:** Search-and-replace with verification

## Terminology Mapping

| Old Term | New Term |
|----------|----------|
| pre-computed output | preprocessor output |
| output template | preprocessor output |
| precompute (in names) | preprocessor_output |

## Files to Rename

- `plugin/hooks/posttool_handlers/skill_precompute.py` → `skill_preprocessor_output.py`

## Acceptance Criteria
- [ ] Behavior unchanged
- [ ] All tests still pass
- [ ] No remaining references to "pre-computed output" (except in retrospectives)
- [ ] "output template" only refers to preprocessor output where applicable
- [ ] File renamed to `skill_preprocessor_output.py`
- [ ] Class renamed to `SkillPreprocessorOutputHandler`
- [ ] All imports and references updated to new names

## Execution Steps
1. Rename file: `skill_precompute.py` → `skill_preprocessor_output.py`
2. Update class name: `SkillPrecomputeHandler` → `SkillPreprocessorOutputHandler`
3. Update all references in:
   - `__init__.py` imports
   - `run_tests.py` test functions
   - Documentation strings in the handler
4. Update terminology in docs/comments (pre-computed → preprocessor output)
5. Run tests to verify all changes work correctly
