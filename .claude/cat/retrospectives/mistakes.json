{
  "mistakes": [
    {
      "id": "M091",
      "timestamp": "2026-01-15T06:15:00Z",
      "category": "protocol_violation",
      "description": "Released v1.7 without updating CHANGELOG.md - ran git tag directly instead of using release-plugin skill",
      "root_cause": "Ad-hoc release process instead of using release-plugin skill which ensures changelog synchronization",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/release-plugin/SKILL.md",
      "pattern_keywords": [
        "release",
        "changelog",
        "git tag",
        "version"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user requests a release, always invoke release-plugin skill. Update CHANGELOG.md BEFORE creating git tag."
    },
    {
      "id": "M092",
      "timestamp": "2026-01-15T01:50:00Z",
      "category": "protocol_violation",
      "description": "Used invalid commit type feat: instead of feature:",
      "root_cause": "Defaulted to conventional commit pattern without checking project-specific commit types in git-commit skill",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit",
        "type",
        "feat",
        "feature",
        "conventional"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use feature: not feat:, bugfix: not fix:, and other full names as specified in git-commit skill line 136"
    },
    {
      "id": "M093",
      "timestamp": "2026-01-15T02:00:00Z",
      "category": "protocol_violation",
      "description": "Recorded M092 with documentation as prevention when documentation already existed and failed",
      "root_cause": "Skipped step 8 of learn-from-mistakes workflow (check if prevention already exists) due to completion bias",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "prevention",
        "escalation",
        "existing",
        "documentation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before recording prevention, check if it already exists. If existing prevention failed, escalate to stronger level (documentation → hook/validation)"
    },
    {
      "id": "M094",
      "timestamp": "2026-01-15T02:15:00Z",
      "category": "protocol_violation",
      "description": "Created hook script with wrong implementation (PostToolUse logic in PreToolUse hook) and did not use register-hook skill",
      "root_cause": "Did not use register-hook skill which would have guided proper hook type selection and implementation pattern",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/register-hook/SKILL.md",
      "pattern_keywords": [
        "hook",
        "register",
        "PreToolUse",
        "PostToolUse",
        "TOOL_INPUT"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:register-hook skill when creating hooks. It guides proper hook type selection and provides correct implementation patterns."
    },
    {
      "id": "M095",
      "timestamp": "2026-01-15T16:19:00Z",
      "category": "git_operation_failure",
      "description": "Used soft reset squash workflow for mid-history commits, losing commits after squash range",
      "root_cause": "git-squash skill workflow assumed commits at branch tip; used branch -f main HEAD which discards commits after the squash range when squashing mid-history",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "git",
        "squash",
        "mid-history",
        "soft-reset",
        "branch-f",
        "lost-commits"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check if commits are at branch tip; use interactive rebase workflow for mid-history squashes"
    },
    {
      "id": "M096",
      "timestamp": "2026-01-16T00:45:00Z",
      "category": "assumption_without_verification",
      "description": "Reported subagent used ~29K tokens when actual usage was 137K - measurement was wrong, not estimation",
      "root_cause": "Main agent reported token value without verifying .completion.json or parsing session file - claimed measured value without actual measurement",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/collect-results/SKILL.md",
      "pattern_keywords": [
        "token_measurement",
        "completion_json",
        "session_file",
        "verification"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify token metrics from .completion.json or session JSONL file before reporting. Never claim measured values without actual measurement."
    },
    {
      "id": "M097",
      "timestamp": "2026-01-16T00:50:00Z",
      "category": "protocol_violation",
      "description": "Main agent edited source code directly during merge conflict instead of spawning subagent",
      "root_cause": "Completion bias - rationalized bypassing protocol for perceived efficiency on small fix",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/.claude/cat/references/agent-architecture.md",
      "pattern_keywords": [
        "main_agent_boundary",
        "code_edit",
        "delegation",
        "completion_bias"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Spawn subagent for ALL code changes including merge conflict resolution - no exceptions for small fixes"
    },
    {
      "id": "M098",
      "timestamp": "2026-01-16T14:34:30-05:00",
      "category": "protocol_violation",
      "description": "Used invalid commit types 'security:' and 'skill:' - valid types are feature, bugfix, test, refactor, performance, docs, style, config, planning",
      "root_cause": "Assumed commit type was valid without consulting commit-types.md - hook only had denylist, not allowlist",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit",
        "type",
        "security",
        "skill",
        "invalid"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use only valid commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning. Security fixes use bugfix:, skill changes use config:"
    },
    {
      "id": "M099",
      "timestamp": "2026-01-18T02:27:44Z",
      "category": "assumption_without_verification",
      "description": "Used invalid commit types 'fix:' and 'feat:' instead of 'bugfix:' and 'feature:'",
      "root_cause": "Assumed conventional commit abbreviations were valid without checking CAT standards",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "~/.config/claude/settings.json (registered /workspace/cat/hooks/validate-commit-type.sh)",
      "pattern_keywords": [
        "commit-type",
        "feat",
        "fix",
        "conventional-commits"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use full commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning"
    },
    {
      "id": "M100",
      "timestamp": "2026-01-18T12:00:00Z",
      "category": "detection_gap",
      "description": "Hook validate-commit-type.sh failed to detect feat:/fix: because HEREDOC parsing was checked after simple quotes pattern, causing incorrect match",
      "root_cause": "Regex ordering bug: -m \"$(cat <<EOF\" matched the simple quotes pattern first, extracting \"$(cat <<\" as the message instead of falling through to HEREDOC branch",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/cat/commands/{config,init,status,work}.md",
      "pattern_keywords": [
        "hook",
        "regex",
        "HEREDOC",
        "commit-type",
        "detection"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check HEREDOC pattern before simple quotes pattern in commit message extraction"
    },
    {
      "id": "M132",
      "timestamp": "2026-01-18T20:29:20Z",
      "category": "logical_error",
      "description": "Incorrectly classified ✦ (U+2726) as width 2 emoji when it is width 1 symbol, causing ✦ lines to be 1 char short",
      "root_cause": "No systematic method to distinguish emojis (width 2) from symbols (width 1) - assumed decorative chars were emojis",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/commands/config.md",
      "pattern_keywords": [
        "unicode-width",
        "emoji",
        "symbol",
        "display-width",
        "EAW"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M131",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check Unicode East Asian Width property: only W/F = width 2; N/Na/A = width 1. ✦ is EAW=N (Neutral)"
    },
    {
      "id": "M133",
      "timestamp": "2026-01-19T12:00:00Z",
      "category": "protocol_violation",
      "description": "Used docs: commit type for .claude/cat/ planning files instead of planning:",
      "root_cause": "Did not mentally map .claude/cat/ file paths to planning: type. Defaulted to docs: because content was documentation-like rather than checking file location.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "planning",
        "file-location"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check file location first: .claude/cat/ files → planning:, .claude/hooks/ → config:, user docs → docs:"
    },
    {
      "id": "M134",
      "timestamp": "2026-01-19T14:00:00Z",
      "category": "documentation_violation",
      "description": "Used config: commit type for bug fix in plugin/ because M133 said plugin/ → config:, but bug fixes should always use bugfix:",
      "root_cause": "M133 prevention created oversimplified rule (plugin/ → config:) without clarifying that commit type reflects change purpose, not file location",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit-type",
        "bugfix",
        "config",
        "file-location",
        "change-purpose"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Commit type reflects WHAT changed (bugfix, feature, refactor), not WHERE the file is. File location only determines default type for ambiguous changes."
    },
    {
      "id": "M135",
      "timestamp": "2026-01-19T14:30:00Z",
      "category": "assumption_without_verification",
      "description": "Used incorrect glob pattern for finding task STATE.md files, assuming task/ subdirectory existed when project uses flat structure",
      "root_cause": "Documentation-reality mismatch: workflow documentation shows task/ subdirectory pattern but CAT own project structure places tasks directly under minor versions",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "task-path",
        "STATE.md",
        "find-task",
        "glob-pattern",
        "directory-structure"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Task directories are directly under minor versions: .claude/cat/issues/v{major}/v{major}.{minor}/{task-name}/ - NO task/ subdirectory."
    },
    {
      "id": "M136",
      "timestamp": "2026-01-19T12:30:00Z",
      "category": "protocol_violation",
      "description": "Status display output had 5 vertical alignment issues - missing closing borders and floating disconnected border characters",
      "root_cause": "Template in status.md skill had inconsistent borders, and M129 verification step was skipped during output",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "emoji",
        "width",
        "padding"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify all lines have consistent borders using the PRE-OUTPUT CHECKLIST before rendering status display"
    },
    {
      "id": "M137",
      "timestamp": "2026-01-19T05:28:00Z",
      "category": "protocol_violation",
      "description": "Status display output had vertical alignment issues - inner boxes not properly bordered, skipped PRE-OUTPUT CHECKLIST",
      "root_cause": "Compliance failure - PRE-OUTPUT CHECKLIST existed but was skipped during rendering. Documentation-level prevention from M136 failed.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/validate-status-alignment.sh",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "checklist",
        "validation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M136",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run validate-status-alignment.sh on proposed output before rendering, ensuring all lines have both left and right borders"
    },
    {
      "id": "M138",
      "timestamp": "2026-01-19T05:28:00Z",
      "category": "protocol_violation",
      "description": "Manually read PROJECT.md and multiple PLAN.md files after status-data.sh returned incomplete data, violating MANDATORY: Use ONLY script data instruction",
      "root_cause": "MANDATORY instructions without enforcement are treated as suggestions. Script returned incomplete data due to directory structure mismatch, and I prioritized completeness over protocol compliance.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status-data.sh",
      "pattern_keywords": [
        "status",
        "script",
        "mandatory",
        "data",
        "manual",
        "read"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use ONLY data from status-data.sh output. If script returns incomplete data, report the bug after rendering rather than manually supplementing."
    },
    {
      "id": "M139",
      "timestamp": "2026-01-19T05:45:00Z",
      "category": "protocol_violation",
      "description": "Used 'docs:' commit type for retrospectives/mistakes.json instead of 'config:' (Claude-facing configuration)",
      "root_cause": "Did not consult commit-types.md before committing. Used 'docs:' by assumption instead of checking documented rules for .claude/cat/retrospectives/ files.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit",
        "type",
        "docs",
        "config",
        "retrospectives",
        "claude-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 'config:' for .claude/cat/retrospectives/ files because mistakes.json and retrospectives.json are Claude-facing configuration that affects runtime behavior"
    },
    {
      "id": "M140",
      "timestamp": "2026-01-19T14:45:00Z",
      "category": "protocol_violation",
      "description": "Status display alignment failure - inner box lines missing outer borders, inconsistent padding despite M136/M137 documentation",
      "root_cause": "Skill requires complex inline padding calculations with nested border structure. Documentation-level prevention (PRE-OUTPUT CHECKLIST) was not followed. Validation script from M137 exists but is not integrated into skill workflow.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md and ${CLAUDE_PROJECT_DIR}/plugin/scripts/validate-status-alignment.sh",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "padding",
        "nested",
        "calculation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M137",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Follow exact template structure with position-by-position verification. Every line inside outer box must have outer │ on both ends. Inner box lines have BOTH inner │ AND outer │ borders."
    },
    {
      "id": "M141",
      "timestamp": "2026-01-19T11:11:48Z",
      "category": "protocol_violation",
      "description": "Status display alignment failure (4th recurrence) - validation script not invoked despite BLOCKING GATE instruction",
      "root_cause": "Documentation-level prevention failed 3 times (M136→M137→M140). Instructions labeled 'MANDATORY' and 'BLOCKING GATE' have no enforcement mechanism - agents skip validation step because there is no automated check that blocks output if validation wasn't run.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "alignment",
        "validation",
        "blocking-gate",
        "enforcement",
        "recurrence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M140",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Write status output to /tmp/status-draft.txt, then invoke validate-status-alignment.sh via Bash tool, then only output if validation passes. The Bash tool invocation is trackable and verifiable."
    },
    {
      "id": "M142",
      "timestamp": "2026-01-19T11:21:46Z",
      "category": "detection_gap",
      "description": "Status display alignment failure (5th recurrence) - validation script checks border presence but not display width equality",
      "root_cause": "validate-status-alignment.sh only verifies borders exist (│ present) but does not validate that all lines have equal display width. Lines with different character counts pass validation despite visual misalignment. LLMs cannot reliably calculate character-level padding for Unicode text.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status.sh and ${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "alignment",
        "display-width",
        "unicode",
        "padding",
        "validation",
        "script-rendering"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M141",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use status.sh script for ALL rendering. Script uses Python for Unicode width calculation. LLM just runs script and outputs result - no padding calculations by LLM."
    },
    {
      "id": "M143",
      "timestamp": "2026-01-19T11:28:19Z",
      "category": "documentation_violation",
      "description": "Status script output shown only in Bash tool result (collapsed by Claude Code), not in response text",
      "root_cause": "Skill instruction was ambiguous - said output result to user but did not specify to use Read tool to avoid collapsed Bash output",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "bash-collapse",
        "output-display",
        "status-skill",
        "read-tool"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Write script output to temp file, then use Read tool to display it (avoids Claude Code collapsing large Bash outputs)"
    },
    {
      "id": "M144",
      "timestamp": "2026-01-19T12:15:00Z",
      "category": "documentation_violation",
      "description": "Summarized status output instead of displaying exact file contents verbatim",
      "root_cause": "Skill instruction 'display its contents' was ambiguous - could mean summarize OR verbatim output. M143 focused on Read tool usage but didn't specify verbatim requirement.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "verbatim",
        "summary",
        "read-tool",
        "output"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output file contents EXACTLY as shown in Read tool result - do not summarize or paraphrase"
    },
    {
      "id": "M145",
      "timestamp": "2026-01-19T06:41:00Z",
      "category": "protocol_violation",
      "description": "After Read tool returned status file contents, failed to output them verbatim - jumped directly to NEXT STEPS section",
      "root_cause": "Interpreted instruction as acknowledged rather than requiring literal echo of content. Read tool result was processed but not output to user.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "verbatim",
        "read-tool",
        "output",
        "echo",
        "display"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M144",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After Read tool returns file contents, output the EXACT text in the response before proceeding to NEXT STEPS. Verify box characters are present."
    },
    {
      "id": "M146",
      "timestamp": "2026-01-19T08:20:00Z",
      "category": "assumption_without_verification",
      "description": "Reported 13K tokens for subagent when Claude Code showed actual usage was 27.8K tokens (214% of estimate)",
      "root_cause": "Main agent used pre-execution task size ESTIMATE in approval gate instead of actual MEASURED tokens from subagent completion. Documentation at work.md line 291 says use only measured values but was not followed.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "token_estimate",
        "token_measurement",
        "subagent",
        "verification",
        "approval_gate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M096",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Cross-check reported tokens against Claude Code tool output summary. When Task tool completes it shows actual usage - if reported value differs significantly, re-read subagent completion output."
    },
    {
      "id": "M147",
      "timestamp": "2026-01-19T20:38:00Z",
      "category": "protocol_violation",
      "description": "Main agent investigated exploration subagent findings directly (ran tests, read source code) instead of spawning a verification subagent when uncertain about DUPLICATE finding",
      "root_cause": "No documented pattern for handling uncertainty about subagent findings - distrust led to direct investigation instead of delegating verification",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "subagent",
        "verification",
        "direct-investigation",
        "trust"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When uncertain about subagent findings: (1) ACCEPT and proceed with appropriate workflow, OR (2) SPAWN a verification subagent with specific questions. NEVER investigate directly by reading code or running tests."
    },
    {
      "id": "M148",
      "timestamp": "2026-01-19T20:43:12Z",
      "category": "protocol_violation",
      "description": "Used 'docs:' commit type for learning M147 commit instead of 'config:' - files modified were Claude-facing (mistakes.json, retrospectives.json, spawn-subagent/SKILL.md)",
      "root_cause": "learn-from-mistakes skill Step 12 hardcoded 'docs:' commit type instead of 'config:' for Claude-facing file changes",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "claude-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 'config:' commit type for Claude-facing files (skills, hooks, retrospectives, mistakes.json). Use 'docs:' only for user-facing documentation."
    },
    {
      "id": "M149",
      "timestamp": "2026-01-19T16:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed box characters in text output instead of using work-progress.sh script, causing misaligned vertical borders",
      "root_cause": "Compliance failure - M142 documentation was loaded but agent typed boxes manually instead of using render-to-file-then-read pattern",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "unicode",
        "alignment",
        "manual",
        "work-progress",
        "render"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M142",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use work-progress.sh to render box to temp file, then Read tool to output contents. NEVER manually type box characters."
    },
    {
      "id": "M150",
      "timestamp": "2026-01-19T17:30:00Z",
      "category": "assumption_without_verification",
      "description": "Claimed v1.0 is complete based on minor STATE.md without verifying actual task statuses - 4 of 5 tasks were still pending",
      "root_cause": "No automated validation that minor version status is consistent with its task completion states",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "version status",
        "STATE.md",
        "verification",
        "task completion",
        "inconsistent state"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before marking a version STATE.md as completed, verify all nested items are complete (tasks for minor, minors for major). Validation happens once at completion time, not repeatedly when checking status."
    },
    {
      "id": "M151",
      "timestamp": "2026-01-19T22:20:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate with unsquashed commits - had 3 docs: commits that should have been squashed into 1",
      "root_cause": "Workflow step order had squash_commits AFTER approval_gate, so commits were not squashed before user review",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.worktrees/2.0-expand-exploration-subagent-role/commands/execute-task.md",
      "pattern_keywords": [
        "squash",
        "commits",
        "approval_gate",
        "step_order",
        "workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Squash commits by type BEFORE presenting approval gate. Users should review clean, squashed commit history."
    },
    {
      "id": "M152",
      "timestamp": "2026-01-19T22:25:00Z",
      "category": "protocol_violation",
      "description": "Accepted concatenated commit message after squash instead of amending to unified message",
      "root_cause": "git-squash skill lacked explicit instruction to check and amend concatenated messages after squash",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.worktrees/2.0-expand-exploration-subagent-role/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "squash",
        "commit_message",
        "concatenated",
        "amend",
        "unified"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After squashing, check commit message with git log -1. If concatenated, amend with unified message describing what the combined change accomplishes."
    },
    {
      "id": "M153",
      "timestamp": "2026-01-19T19:40:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate with STATE.md at 90% in-progress instead of 100% completed - files proposed for merge should be in final state",
      "root_cause": "Workflow work.md step 12 shows 90% state before approval, but files being proposed for merge should already reflect final state. Subagent was given incorrect 90% instruction.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "STATE.md",
        "approval_gate",
        "final_state",
        "progress",
        "merge"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Set STATE.md to completed/100% BEFORE presenting approval gate. The commit being proposed for merge should reflect final state."
    },
    {
      "id": "M154",
      "timestamp": "2026-01-19T18:45:00-05:00",
      "category": "protocol_violation",
      "description": "Changed checked out branch in main worktree when merging task",
      "root_cause": "Incorrectly assumed merge requires checking out target branch in main workspace",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "git checkout",
        "main worktree",
        "branch switch",
        "merge"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "negative",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Merge task branch into whatever branch is currently checked out in main workspace without switching branches"
    },
    {
      "id": "M155",
      "timestamp": "2026-01-20T10:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed box characters in status display after status.sh script failed with 'bad array subscript' error",
      "root_cause": "Cascading failure: (1) status.sh had bug where ((local_completed++)) without || true exits when incrementing from 0, (2) when script failed, agent improvised by manually typing boxes instead of reporting error and fixing script, violating M149",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status.sh",
      "pattern_keywords": [
        "box",
        "unicode",
        "alignment",
        "manual",
        "script-error",
        "improvisation",
        "status"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M149",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When a box-rendering script errors: (1) report the error to user, (2) fix the script bug, (3) NEVER manually type box characters. Scripts should be robust with || true after arithmetic operations that may evaluate to 0."
    },
    {
      "id": "M156",
      "timestamp": "2026-01-20T14:30:00Z",
      "category": "detection_gap",
      "description": "Used docs: commit type for skill file changes instead of config:",
      "root_cause": "PreToolUse hook checks git diff --cached before git add executes, so files from git add X && git commit are not seen",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "skills",
        "PreToolUse",
        "git-add"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use config: commit type for skill file changes. Hook now extracts files from git add commands in the command string."
    },
    {
      "id": "M157",
      "timestamp": "2026-01-20T14:45:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate without squashing commits by type first",
      "root_cause": "Skipped squash step in approval flow despite documentation existing",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/approval-gates.md",
      "pattern_keywords": [
        "approval-gate",
        "squash",
        "commit-type",
        "workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Always squash commits by type BEFORE presenting approval gate to user. Flow: changes complete → squash → present gate."
    },
    {
      "id": "M158",
      "timestamp": "2026-01-20T15:54:38Z",
      "category": "protocol_violation",
      "description": "box_header() used hardcoded space padding instead of pad() function, causing misaligned right borders when content contains emojis",
      "root_cause": "Implementation subagent added manual spaces for positioning status character instead of using the centralized pad() function that handles emoji display width correctly",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/work-progress.sh",
      "pattern_keywords": [
        "box",
        "alignment",
        "emoji",
        "padding",
        "unicode",
        "width"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M142",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use pad() or display_width() from box.sh for any content containing emojis or Unicode characters that need alignment"
    },
    {
      "id": "M159",
      "timestamp": "2026-01-20T11:22:37-05:00",
      "category": "protocol_violation",
      "description": "Used wrong progress display format (▸/▹ symbols) instead of approved Style E (✓/►/◦ with ◀── current marker)",
      "root_cause": "work-progress.sh implementation diverged from approved Style E specification without verification",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/work-progress.sh",
      "pattern_keywords": [
        "progress_display",
        "style_e",
        "visual_format",
        "specification_mismatch"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use Style E format: rounded box header with ✓/►/◦ symbols and ◀── current marker"
    },
    {
      "id": "M160",
      "timestamp": "2026-01-20T12:35:00-05:00",
      "category": "protocol_violation",
      "description": "Presented approval gate without showing diff content - only file change summary",
      "root_cause": "Approval gate displayed file statistics instead of actual code changes, leaving user unable to evaluate changes before approving",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval_gate",
        "diff",
        "review"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Show full diff content BEFORE presenting AskUserQuestion for approval"
    },
    {
      "id": "M161",
      "timestamp": "2026-01-20T18:55:00-05:00",
      "category": "protocol_violation",
      "description": "Ran git diff in Bash tool but did not output diff as text - tool results not visible to user",
      "root_cause": "Documentation said 'show diff' but did not specify to OUTPUT as text, allowing technically-compliant but ineffective presentation via tool results only",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval_gate",
        "diff",
        "tool_output",
        "text_output"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M160",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After running git diff, OUTPUT the result as markdown text with ## Changes for Approval header and diff code block, not just tool results"
    },
    {
      "id": "M162",
      "timestamp": "2026-01-21T15:30:00Z",
      "category": "protocol_violation",
      "description": "Offered completed version v1.10 as task target option when adding new task",
      "root_cause": "Workflow said to 'prefer active/pending over completed' but did not explicitly exclude completed versions from task target options",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/add.md",
      "pattern_keywords": [
        "add-task",
        "version-selection",
        "completed-version",
        "filter"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Filter out completed versions before presenting task target options. Only versions with status pending or in-progress should be offered."
    },
    {
      "id": "M163",
      "timestamp": "2026-01-21T11:05:00Z",
      "category": "protocol_violation",
      "description": "Created tasks via /cat:add without updating parent STATE.md Tasks Pending list",
      "root_cause": "Vague workflow step task_update_parent said 'update task count' without specifying to add task names to pending list",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "taxonomy_module": "PLANNING",
      "taxonomy_failure_mode": "Incomplete workflow execution - skipped mandatory step",
      "taxonomy_failure_type": "FALSE_NEGATIVE",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/add.md",
      "pattern_keywords": [
        "add",
        "task",
        "STATE.md",
        "pending",
        "parent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After creating task STATE.md and PLAN.md, always add task name to parent version STATE.md Tasks Pending list"
    },
    {
      "id": "M164",
      "timestamp": "2026-01-21T18:09:12Z",
      "category": "protocol_violation",
      "description": "Agent skipped header box display during /cat:work, went directly to progress line",
      "root_cause": "Header instruction lacked emphasis and appeared after progress examples, causing agents to skip it",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "header",
        "progress",
        "work",
        "display",
        "box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display header box FIRST using work-progress.sh header, then show progress line updates"
    },
    {
      "id": "M165",
      "timestamp": "2026-01-22T00:10:00Z",
      "category": "protocol_violation",
      "description": "Displayed progress banner without mandatory header box above it",
      "root_cause": "Did not verify header was displayed before showing progress banner - ambiguous documentation showed progress line both with and without header",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "progress_banner",
        "header",
        "display",
        "M162"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always display header box (🐱 > task-name with underline) before any progress banner"
    },
    {
      "id": "M166",
      "timestamp": "2026-01-22T00:00:00Z",
      "category": "protocol_violation",
      "description": "Status display rendered v2.0 without inner box borders - each major must have its own ╭─/╰─ wrapper",
      "root_cause": "Template showed one major example but did not explicitly state every major needs inner box structure",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "box",
        "border",
        "major",
        "minor",
        "hierarchy"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Render each major version with its own inner box (╭─ and ╰─), closing the box before starting the next major"
    },
    {
      "id": "M166",
      "timestamp": "2026-01-22T02:21:00Z",
      "category": "protocol_violation",
      "description": "Used docs: commit type for .claude/cat/issues/v*/ planning files instead of planning:",
      "root_cause": "Hook blocked docs: but did not enforce that planning: MUST be used for version files. Chose wrong type based on file extension (.md) rather than location (.claude/cat/issues/v*/)",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "/workspace/plugin/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit-type",
        "planning",
        "docs",
        ".claude/cat"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use planning: commit type for all files in .claude/cat/issues/v*/ directory"
    },
    {
      "id": "M167",
      "timestamp": "2026-01-22T02:22:00Z",
      "category": "protocol_violation",
      "description": "When /cat:learn invoked, performed ad-hoc analysis instead of invoking learn-from-mistakes skill as instructed",
      "root_cause": "Read command instruction but substituted ad-hoc analysis for required skill invocation. Command doc said invoke skill but agent chose to analyze directly.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/learn.md",
      "pattern_keywords": [
        "skill-invocation",
        "cat:learn",
        "ad-hoc",
        "protocol"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When /cat:learn is invoked, immediately use Skill tool to invoke cat:learn-from-mistakes - no ad-hoc analysis"
    },
    {
      "id": "M168",
      "timestamp": "2026-01-22T02:30:48Z",
      "category": "protocol_violation",
      "description": "Recommended adding task to v1.10 which was already completed",
      "root_cause": "Proceeded with task flow without verifying version filtering worked after bash syntax error",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/add.md",
      "pattern_keywords": [
        "completed_version",
        "version_status",
        "filter_versions"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always verify version status is not completed before suggesting it as a task target"
    },
    {
      "id": "M169",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "documentation_violation",
      "description": "Progress header displayed short task name instead of full task ID (missing version prefix)",
      "root_cause": "Documentation used {task-name} placeholder instead of {major}.{minor}-{task-name} for header format",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "progress_header",
        "task_id",
        "version_prefix",
        "display_format"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use full task ID format in progress header: {major}.{minor}-{task-name} (e.g., 2.0-fix-config-documentation)"
    },
    {
      "id": "M169",
      "timestamp": "2026-01-22T02:55:10Z",
      "category": "protocol_violation",
      "description": "Progress header showed partial task ID (remote-lock-metadata) instead of full ID (2.0-remote-lock-metadata)",
      "root_cause": "Header format examples in work.md used {task-name} placeholder instead of explicit {major}.{minor}-{task-name} format",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "header",
        "task-id",
        "progress-banner",
        "format"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always use full task ID format {major}.{minor}-{task-name} in progress headers"
    },
    {
      "id": "M170",
      "timestamp": "2026-01-22T02:55:19Z",
      "category": "protocol_violation",
      "description": "Approval gate diff used ad-hoc summary format instead of Variant 2 Isolated Changes format",
      "root_cause": "commands/work.md approval_gate step said to display diff but did not reference the Variant 2 format specification in workflows/work.md",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "diff",
        "variant-2",
        "approval-gate",
        "format",
        "isolated-changes"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display diff using Variant 2 Isolated Changes format with +/- markers for actual code changes, not ad-hoc summaries"
    },
    {
      "id": "M171",
      "timestamp": "2026-01-22T03:03:12Z",
      "category": "documentation_violation",
      "description": "Approval gate diff used Variant 2 format instead of 4-column table format from render-diff-skill PLAN.md",
      "root_cause": "Two conflicting diff format specs exist: workflows/work.md (Variant 2) and render-diff-skill PLAN.md (4-column table). Prevention for M170 referenced the wrong/older format.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "diff-format",
        "4-column-table",
        "render-diff-skill",
        "approval-gate",
        "variant-2"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M170",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 4-column table format from render-diff-skill PLAN.md with box-drawing characters, line numbers, and hunk context"
    },
    {
      "id": "M172",
      "timestamp": "2026-01-22T03:11:28Z",
      "category": "protocol_violation",
      "description": "Referenced PLAN.md for a skill instead of the actual skill documentation (SKILL.md)",
      "root_cause": "Used PLAN.md (task planning doc) as authoritative format spec instead of SKILL.md (skill documentation). PLAN.md describes what to build; SKILL.md describes how to use it.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "PLAN.md",
        "SKILL.md",
        "skill-reference",
        "documentation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M171",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Reference SKILL.md for usage documentation, not PLAN.md. Use the skill via its script/command, not by reading the plan."
    },
    {
      "id": "M173",
      "timestamp": "2026-01-22T13:20:00Z",
      "category": "protocol_violation",
      "description": "Lock release failed: used fallback rm command pattern that triggered block-lock-manipulation.sh hook",
      "root_cause": "Used defensive fallback pattern || rm -f that triggered hook because hook checks entire command string. Also CLAUDE_SESSION_ID may not be available in all environments.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "lock-release",
        "fallback-command",
        "hook-trigger",
        "session-id"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Call task-lock.sh release without fallback rm commands. If CLAUDE_SESSION_ID unavailable, extract session ID from system reminders."
    },
    {
      "id": "M174",
      "timestamp": "2026-01-22T12:30:00Z",
      "category": "protocol_violation",
      "description": "Status display box borders misaligned - inner box closing lines had 76 width instead of 75, did not follow box-alignment skill procedure",
      "root_cause": "Loaded status skill but did not load/follow box-alignment skill it references. Typed box output incrementally instead of: collect all lines → calculate widths → pad → output",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md and ${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box",
        "alignment",
        "emoji",
        "width",
        "status",
        "border",
        "padding"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M166",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When outputting closed-border boxes: (1) Load box-alignment skill, (2) Collect ALL content lines first, (3) Calculate display width for each using emoji-widths.json, (4) Find max width, (5) Pad all lines to max, (6) Only then output"
    },
    {
      "id": "M175",
      "timestamp": "2026-01-22T14:30:00Z",
      "category": "protocol_violation",
      "description": "Box alignment misaligned - eyeballed longest line instead of calculating all display widths",
      "root_cause": "Skipped systematic calculation algorithm - visually estimated longest line instead of calculating display width for every line as required by box-alignment skill",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "display-width",
        "emoji",
        "calculation",
        "eyeballing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Calculate display width for EVERY line explicitly, show the calculation with actual numbers, then determine max width"
    },
    {
      "id": "M176",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment vertical borders misaligned despite loading box-alignment skill",
      "root_cause": "Showed calculations in output text instead of using thinking block for systematic verification - calculations were displayed but not verified before outputting box",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "vertical-border",
        "emoji-width",
        "thinking-block"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M175",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Complete BLOCKING GATE after Step 4 - spot-check emoji-heavy line calculation before proceeding to output"
    },
    {
      "id": "M177",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment table built with approximate content instead of exact final content",
      "root_cause": "Built calculation table with simplified/estimated content, then output different actual content, causing width mismatch",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "calculation-table",
        "content-mismatch",
        "approximate"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Write final output content first, then copy-paste exact strings into calculation table Content column"
    },
    {
      "id": "M178",
      "timestamp": "2026-01-22T14:30:00Z",
      "category": "logical_error",
      "description": "Box alignment table calculations did not match actual output content - table had approximate values while output had different text",
      "root_cause": "Built calculation table with placeholder content, then wrote different actual content in output. Table widths became invalid when content diverged.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "table-mismatch",
        "content-divergence",
        "copy-paste"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M177",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Build calculation table from exact final content using copy-paste workflow, then verify output matches table before completing"
    },
    {
      "id": "M179",
      "timestamp": "2026-01-22T14:30:00Z",
      "category": "protocol_violation",
      "description": "Box alignment failed: output written independently from table, negative Pad values ignored, nested boxes omitted",
      "root_cause": "Built calculation table but wrote output independently instead of copy-pasting from table Content column. Also ignored negative Pad values which indicated max_width was wrong.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "copy-paste",
        "negative-pad",
        "table-source"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M178",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Copy-paste exact Content from table for each row, append exact Pad spaces. If Pad is negative, stop and recalculate max_width."
    },
    {
      "id": "M180",
      "timestamp": "2026-01-22T00:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment borders misaligned due to iterative table building instead of complete-then-output",
      "root_cause": "Built calculation table iteratively with recalculations mid-stream instead of completing fully first, causing content drift between table and output",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "table",
        "iterative",
        "padding",
        "border"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Complete the ENTIRE calculation table first, verify all Pad >= 0 and max_width is stated, THEN output directly from table"
    },
    {
      "id": "M181",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment failed - character count miscalculation in table caused right border misalignment",
      "root_cause": "Built calculation table but miscounted characters in Chars column, causing incorrect Width and Pad values despite following table workflow",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "character-count",
        "verification-gate",
        "spot-check"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Add spot-check step to verification gate: pick longest line and verify character count by listing each character with position number"
    },
    {
      "id": "M182",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment right borders misaligned due to character count errors in multiple lines",
      "root_cause": "Spot-check verification only required checking ONE line (the longest), but character counting errors occurred in OTHER lines that were not verified",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "character-count",
        "spot-check",
        "verification"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify ALL lines by listing each character with position number - sampling is insufficient, only exhaustive verification guarantees alignment"
    },
    {
      "id": "M183",
      "timestamp": "2026-01-22T12:45:00Z",
      "category": "protocol_violation",
      "description": "Box alignment failed - filled Pad column iteratively while building table instead of completing Width column first",
      "root_cause": "Skill procedure showed completed table as example without explicit sequential passes, allowing iterative table-building with mid-stream max_width recalculations",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "passes",
        "max_width",
        "iterative",
        "sequential"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M182",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Follow 5 passes in order: (1) Fill Content/Chars/Emojis/Width for ALL rows, (2) Find max_width, (3) Fill Pad, (4) Verify, (5) Output"
    },
    {
      "id": "M184",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "logical_error",
      "description": "Nested box alignment failed - inner box borders not self-consistent before embedding in outer box",
      "root_cause": "Built one flat table mixing inner content and outer content instead of building inner boxes first with their own tables, then embedding completed inner box lines",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "nested-box",
        "box-alignment",
        "inner-outer",
        "self-consistency"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Build inner boxes FIRST with their own tables, verify inner box self-consistency (top/bottom/content all same width), THEN embed complete inner box lines as Content entries in outer table"
    },
    {
      "id": "M185",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Status display rendered without nested inner boxes for major versions",
      "root_cause": "Ignored mandatory nested box procedure (M184) and anti-pattern warning in box-alignment skill",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "nested-box",
        "status-display",
        "box-alignment",
        "inner-box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Follow nested box procedure: build inner boxes first with separate tables, then embed complete inner box lines into outer table"
    },
    {
      "id": "M186",
      "timestamp": "2026-01-22T10:30:00Z",
      "category": "protocol_violation",
      "description": "Nested box output had misaligned vertical borders - skipped inner box construction phase",
      "root_cause": "Attempted single-pass calculation and render instead of two-pass (plan then render) approach for nested boxes",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "nested-box",
        "alignment",
        "two-pass",
        "inner-box"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Complete Pass 1 (all tables, all inner box line construction) entirely before Pass 2 (mechanical output from tables)"
    },
    {
      "id": "M187",
      "timestamp": "2026-01-22T10:15:00Z",
      "category": "protocol_violation",
      "description": "Nested box rendering skipped Step N2 string construction - jumped from inner tables to outer table without explicitly constructing inner box line strings",
      "root_cause": "Inner box lines were never explicitly constructed as strings - the procedure showed tables but never listed the actual complete line strings with borders, causing border characters to be miscounted",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "nested-box",
        "inner-box-lines",
        "string-construction",
        "step-n2"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After building inner box table, explicitly list every inner box line as a complete string (with backticks) before proceeding to outer table"
    },
    {
      "id": "M188",
      "timestamp": "2026-01-22T11:30:00Z",
      "category": "logical_error",
      "description": "Nested box alignment failed due to two errors: (1) calculated border dashes using content_max instead of line_width-2, (2) forgot that suffix adds 1 space so total spaces before final bar = padding + 1",
      "root_cause": "When constructing border lines, used content area width instead of accounting for corner characters. When rendering, wrote only padding spaces before │ instead of padding + 1 (the extra 1 from the ` │` suffix)",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "nested-box",
        "border-middle",
        "suffix-space",
        "padding-plus-one"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M187",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use border_middle = line_width - 2 for dashes, and remember total spaces before final │ = padding + 1"
    },
    {
      "id": "M189",
      "timestamp": "2026-01-22T12:45:00Z",
      "category": "protocol_violation",
      "description": "Nested box alignment failed in /cat:status - skipped mandatory width tables and inner box string construction despite loading box-alignment skill",
      "root_cause": "Procedural documentation allows skipping steps. Requirements-based documentation with verification gates is harder to skip because each requirement must be satisfied.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "nested-box",
        "requirements",
        "verification-gates",
        "width-table"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M188",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Satisfy requirements R1-R11 with explicit verification gates before rendering any box output"
    },
    {
      "id": "M190",
      "timestamp": "2026-01-22T13:55:30Z",
      "category": "protocol_violation",
      "description": "Sibling inner boxes rendered with different widths causing misaligned vertical borders",
      "root_cause": "box-alignment skill lacked sibling box width sharing rule - each inner box calculated its own max_width independently instead of using a shared global max across all siblings",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "nested-boxes",
        "sibling-boxes",
        "display-width",
        "border-alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When building multiple inner boxes at the same nesting level, first calculate the GLOBAL max_content_width across ALL sibling boxes, then build each sibling using that shared width"
    },
    {
      "id": "M191",
      "timestamp": "2026-01-22T10:35:00Z",
      "category": "protocol_violation",
      "description": "Rendered box output without explicit width calculations, causing misaligned vertical borders",
      "root_cause": "Skipped mandatory calculation step in box-alignment skill - wrote approximate output instead of computing display_width for each content item",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "display_width",
        "calculation",
        "nested-box",
        "sibling-alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Show explicit display_width calculations for EVERY content item before rendering any box output"
    },
    {
      "id": "M192",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "protocol_violation",
      "description": "Box alignment output had misaligned vertical borders - calculated widths correctly but hand-typed output instead of mechanically constructing lines",
      "root_cause": "Skill allows agent to calculate correctly then render incorrectly by not enforcing that output MUST be copied from calculated build_line() results",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/box-alignment/SKILL.md",
      "pattern_keywords": [
        "box-alignment",
        "display-width",
        "hand-typed",
        "copy-paste"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After calculating widths, write explicit build_line() results showing exact strings with padding, then copy those exact strings to final output"
    },
    {
      "id": "M193",
      "timestamp": "2026-01-22T15:33:18Z",
      "category": "logical_error",
      "description": "Shell script used ${#var} (byte length) instead of display_width for emoji-containing header, causing misaligned inner box borders",
      "root_cause": "precompute-status-display.sh calculated header width using bash ${#HEADER} which counts bytes, not display width, while body lines used Python's accurate display_width calculation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/precompute-status-display.sh",
      "pattern_keywords": [
        "emoji",
        "display_width",
        "box",
        "alignment",
        "shell",
        "bash"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use display_width function (via Python) for any string width calculation when the string may contain emojis or multi-byte characters"
    },
    {
      "id": "M194",
      "timestamp": "2026-01-22T15:35:44Z",
      "category": "prompt_engineering",
      "description": "Agent output verbose preamble before pre-computed status display instead of outputting it directly",
      "root_cause": "Skill template lacked explicit instruction to output pre-computed content silently without preamble or commentary",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "verbosity",
        "preamble",
        "pre-computed",
        "silent",
        "output"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output pre-computed content directly without announcing or explaining it"
    },
    {
      "id": "M195",
      "timestamp": "2026-01-22T14:35:00Z",
      "category": "detection_gap",
      "description": "Commit type hook recommended config: for version planning files instead of planning:, requiring two correction cycles",
      "root_cause": "Hook check order: docs: check recommended config: for any .claude/ file without first checking if files were .claude/cat/issues/v*/ which need planning:",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit-type",
        "hook",
        "planning",
        "config",
        "recommendation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Hook should check for .claude/cat/issues/v*/ files first and recommend planning: before falling back to config: for other Claude-facing files"
    },
    {
      "id": "M196",
      "timestamp": "2026-01-22T17:30:00Z",
      "category": "logical_error",
      "description": "find-task.sh reported lock_status:acquired for task locked by another session",
      "root_cause": "try_acquire_lock masked actual locked status with generic error, and caller only checked for locked not for acquired",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/find-task.sh",
      "pattern_keywords": [
        "lock",
        "find-task",
        "status-check",
        "false-positive"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "try_acquire_lock should pass through actual status from task-lock.sh, and caller should check for status==acquired (positive verification) not status==locked (negative verification)"
    },
    {
      "id": "M197",
      "timestamp": "2026-01-22T17:30:00Z",
      "category": "detection_gap",
      "description": "Lock file worktree field empty after worktree creation because lock acquired before worktree exists",
      "root_cause": "task-lock.sh lacked update command; workflow lacked step to update lock after worktree creation",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/task-lock.sh",
      "pattern_keywords": [
        "lock",
        "worktree",
        "update",
        "metadata"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After creating worktree, call task-lock.sh update to populate the worktree field in the lock file"
    },
    {
      "id": "M198",
      "timestamp": "2026-01-22T13:15:00Z",
      "category": "protocol_violation",
      "description": "Planning subagent recommended simplified rewrite without hooks when skill-builder methodology requires hook-based pre-computation for box-drawing alignment",
      "root_cause": "Planning subagent delegation did not enforce verification against skill-builder extraction criteria table before recommending approach",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "planning",
        "skill-builder",
        "extraction",
        "hooks",
        "pre-computation",
        "box-alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before recommending approach for skill-builder rewrite, verify extraction criteria: if skill has counting/arithmetic/formatting/aggregation operations, extraction to hooks is REQUIRED regardless of content type (ASCII or emoji)"
    },
    {
      "id": "M199",
      "timestamp": "2026-01-22T13:47:00Z",
      "category": "git_operation_failure",
      "description": "Squash-and-merge deleted unrelated task files added to base branch after worktree creation",
      "root_cause": "git-merge-linear skill lacked divergence check before squashing - squash to old base point overwrote newer commits",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/git-merge-linear/SKILL.md",
      "pattern_keywords": [
        "squash",
        "divergence",
        "worktree",
        "merge",
        "deleted-files"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check git rev-list HEAD..BASE_BRANCH before squashing - if >0 commits, rebase first"
    },
    {
      "id": "M200",
      "timestamp": "2026-01-22T14:10:00Z",
      "category": "bash_error",
      "description": "find-task.sh produced double-slash paths (task-name//STATE.md) in error output because glob pattern */ includes trailing slash but code appended /STATE.md",
      "root_cause": "Path concatenation oversight - glob pattern $dir/*/ produces paths with trailing slash, but code used $task_dir/STATE.md adding another slash",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/find-task.sh",
      "pattern_keywords": [
        "glob",
        "trailing slash",
        "path concatenation",
        "bash",
        "*/"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Strip trailing slash from glob results before concatenating paths: task_dir=\"${task_dir%/}\""
    },
    {
      "id": "M201",
      "timestamp": "2026-01-22T15:35:00Z",
      "category": "protocol_violation",
      "description": "Used plain git diff format in approval gate instead of render-diff skill which produces 4-column table with box characters",
      "root_cause": "Agent ignored documented MANDATORY requirement in work.md to use render-diff skill, displaying plain diff instead",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "render-diff",
        "approval gate",
        "diff format",
        "box characters",
        "4-column"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use render-diff skill: git diff ${BASE_BRANCH}..HEAD | \"${CLAUDE_PLUGIN_ROOT}/scripts/render-diff.sh\" to display diff with box characters and 4-column format"
    },
    {
      "id": "M202",
      "timestamp": "2026-01-22T14:15:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate with 2 unsquashed commits on task branch",
      "root_cause": "Skipped squash_commits step - jumped directly from commit to approval_gate in work workflow",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/warn-unsquashed-approval.sh",
      "pattern_keywords": [
        "squash",
        "approval",
        "commit",
        "work",
        "pre-approval"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run /cat:git-squash to squash commits by type BEFORE presenting approval gate"
    },
    {
      "id": "M203",
      "timestamp": "2026-01-22T14:30:00Z",
      "category": "protocol_violation",
      "description": "Main agent overrode skill-builder methodology by adding HOWEVER reasoning to planning prompt, recommending simplified output format instead of required hook extraction despite 3/4 computation signals being TRUE",
      "root_cause": "Compliance failure - agent acknowledged M198 rule requiring extraction when signals present, then contradicted it with case-specific reasoning about one-time execution and static content",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "skill-builder",
        "M198",
        "override",
        "HOWEVER",
        "extraction",
        "hooks",
        "computation signals"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When extraction_verification shows extraction_required: true, proceed with hook-based approach WITHOUT adding HOWEVER exceptions. The methodology determination is final."
    },
    {
      "id": "M204",
      "timestamp": "2026-01-22T14:54:00Z",
      "category": "tool_misuse",
      "description": "Called task-lock.sh with arguments in wrong order, passing task name as session_id",
      "root_cause": "task-lock.sh did not validate session_id format, allowing non-UUID values that indicated argument order mistake",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/task-lock.sh",
      "pattern_keywords": [
        "task-lock",
        "session_id",
        "UUID",
        "argument-order"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Pass task_id as combined format (e.g., 2.0-taskname) and session_id as valid UUID"
    },
    {
      "id": "M205",
      "timestamp": "2026-01-22T15:30:00-05:00",
      "category": "protocol_violation",
      "description": "Ran git checkout v2.0 in main worktree (/workspace) during task abort cleanup, violating M154 rule",
      "root_cause": "ACTION module failure - executed git checkout in wrong directory during cleanup. Cleanup should only delete worktree, not change main workspace branch state.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/principles.md",
      "pattern_keywords": [
        "git-checkout",
        "main-worktree",
        "cleanup",
        "M154"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "During task cleanup, only delete the worktree directory. Never run git checkout in main worktree (/workspace). Main worktree should keep its current branch unchanged."
    },
    {
      "id": "M206",
      "timestamp": "2026-01-22T17:10:00Z",
      "category": "protocol_violation",
      "description": "Manually rendered status display instead of failing when pre-computed display was missing",
      "root_cause": "Completion bias led to ignoring explicit fail-fast instruction in status.md",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/principles.md",
      "pattern_keywords": [
        "status",
        "pre-computed",
        "fail-fast",
        "manual-render",
        "completion-bias"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Output the ERROR message exactly as shown when pre-computed display is not found, then STOP"
    },
    {
      "id": "M207",
      "timestamp": "2026-01-22T10:30:00Z",
      "category": "protocol_violation",
      "description": "Used docs: commit type for CAT planning structure changes instead of planning:",
      "root_cause": "Skill template in /cat:add used docs: instead of planning: in commit examples",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/add.md",
      "pattern_keywords": [
        "commit-type",
        "planning",
        "docs",
        "cat-add"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use planning: commit type for all .claude/cat/ file changes"
    },
    {
      "id": "M208",
      "timestamp": "2026-01-22T17:36:30Z",
      "category": "protocol_violation",
      "description": "After /cat:status skill failed-fast (correct), attempted manual data collection instead of stopping",
      "root_cause": "Completion bias - attempted to work around infrastructure failure instead of following fail-fast protocol. Ignored explicit documentation stating Do NOT render manually.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "/workspace/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "protocol_violation",
        "fail-fast",
        "manual_rendering",
        "completion_bias"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When PRE-COMPUTED STATUS DISPLAY not found in context: output error message, then STOP immediately. Do NOT attempt to gather data, read files, or render status manually."
    },
    {
      "id": "M209",
      "timestamp": "2026-01-22T23:45:00Z",
      "category": "detection_gap",
      "description": "UserPromptSubmit hook additionalContext not delivered to agent despite Success status",
      "root_cause": "UserPromptSubmit hook used wrong output format. Was using {\"additionalContext\": ...} but Claude Code expects {\"hookSpecificOutput\": {\"hookEventName\": \"...\", \"additionalContext\": ...}} format",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/get-skill-output.py",
      "pattern_keywords": [
        "UserPromptSubmit",
        "additionalContext",
        "hook",
        "plugin",
        "false_positive"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use hookSpecificOutput format with hookEventName for all hook types that return additionalContext"
    },
    {
      "id": "M210",
      "timestamp": "2026-01-23T12:00:00Z",
      "category": "assumption_without_verification",
      "description": "Used wrong emoji (✅) for Trust setting instead of correct emoji (🤝) when constructing config display",
      "root_cause": "Assumed emoji from memory instead of verifying against skill specification before outputting display",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/config.md",
      "pattern_keywords": [
        "emoji",
        "display",
        "config",
        "trust",
        "visual"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Copy-paste emojis from the emoji_reference table at top of config.md when constructing displays"
    },
    {
      "id": "M211",
      "timestamp": "2026-01-23T03:36:29Z",
      "category": "protocol_violation",
      "description": "Manual task creation with invalid STATE.md format bypassed /cat:add command",
      "root_cause": "Documentation in agent-architecture.md § Work Request Handling existed but was not enforced - agent manually created STATE.md files without using /cat:add, resulting in invalid YAML format instead of required bullet-point format",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/hooks/validate-state-md-format.sh",
      "pattern_keywords": [
        "STATE.md",
        "format",
        "template",
        "cat:add",
        "manual creation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:add command to create tasks, which uses templates with correct bullet-point format for STATE.md files"
    },
    {
      "id": "M211",
      "timestamp": "2026-01-23T22:25:00Z",
      "category": "protocol_violation",
      "description": "Ran render-diff.py but reformatted output into standard diff code block instead of presenting verbatim 4-column table",
      "root_cause": "Agent treated tool output as data to process rather than content to display verbatim",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "render-diff",
        "approval-gate",
        "verbatim",
        "reformatting"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Copy-paste the EXACT render-diff.py Bash output into response - do not extract, reformat, or summarize"
    },
    {
      "id": "M212",
      "timestamp": "2026-01-23T12:15:00Z",
      "category": "logical_error",
      "description": "render-diff.py placed [] brackets incorrectly, splitting words like max_width into [ma]x_width",
      "root_cause": "Character-level diff matching found minimal differences without respecting word boundaries, and line wrapping could split bracketed regions",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "/workspace/plugin/scripts/render-diff.py",
      "pattern_keywords": [
        "render-diff",
        "brackets",
        "word-boundary",
        "wrapping"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Expand bracket boundaries to complete words and wrap lines at safe points outside brackets"
    },
    {
      "id": "M213",
      "timestamp": "2026-01-23T03:50:00Z",
      "category": "documentation_violation",
      "description": "Did not use /cat:skill-builder before updating research command - skill-builder description said skill but not command",
      "root_cause": "skill-builder description says any skill but does not explicitly include commands, leading agents to miss using it for command file updates",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "skill-builder",
        "command",
        "skill",
        "update"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:skill-builder BEFORE updating any skill OR command file"
    },
    {
      "id": "M214",
      "timestamp": "2026-01-23T04:15:00Z",
      "category": "logical_error",
      "description": "In skill-builder, conflated content generation (reasoning) with display rendering (deterministic) - incorrectly concluded extraction not needed because content was reasoning-based",
      "root_cause": "skill-builder verification checklist did not explicitly separate content vs display as independent dimensions for extraction analysis",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "skill-builder",
        "extraction",
        "content",
        "display",
        "rendering",
        "box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Separately evaluate content generation (reasoning vs static) and display rendering (formatting vs none) - extract rendering even when content is reasoning-based"
    },
    {
      "id": "M215",
      "timestamp": "2026-01-23T20:45:00Z",
      "category": "protocol_violation",
      "description": "Skill-builder recommended skill-invoked scripts instead of hook-based precomputation",
      "root_cause": "Documentation described extraction pattern where skill invokes scripts via Bash, but this shows Bash tools to users and defeats the purpose of extraction. Correct pattern is hook runs BEFORE skill and provides pre-computed output.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "hook",
        "precomputation",
        "skill-invoked-script",
        "additionalContext"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Extract computation to skill handlers in plugin/hooks/skill_handlers/ that run BEFORE the skill. Handler pre-computes ALL possible outputs and returns via additionalContext. Skill receives pre-computed content and outputs directly - no Bash invocation."
    },
    {
      "id": "M216",
      "timestamp": "2026-01-23T21:00:00Z",
      "category": "protocol_violation",
      "description": "Skill-builder analysis concluded no extraction needed because content is reasoning-based, ignoring that output structure is known",
      "root_cause": "When output structure is known (box width, borders, line format) but content is reasoning-based, the hook should pre-compute templates that the skill fills in. This was not covered in skill-builder guidance.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "template",
        "precomputation",
        "mixed-case",
        "structure-known"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When content is reasoning-based but output structure is known (box width, borders), use template-based precomputation. Hook pre-computes structural templates, skill fills in content using templates."
    },
    {
      "id": "M217",
      "timestamp": "2026-01-23T21:15:00Z",
      "category": "protocol_violation",
      "description": "Marked task as completed after committing code, skipping stakeholder_review, approval_gate, and merge phases of /cat:work workflow",
      "root_cause": "Completion bias - treated 'code committed' as 'task complete', ignoring that /cat:work has 4 phases (Setup, Implementation, Reviewing, Merging) and committing code only ends Implementation phase",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/enforce-workflow-completion.sh",
      "pattern_keywords": [
        "workflow",
        "completion-bias",
        "approval-gate",
        "stakeholder-review",
        "phases"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After committing implementation, continue /cat:work workflow: run stakeholder_review, present approval_gate for user review, ask user about merging, then complete merge_and_cleanup before marking task completed"
    },
    {
      "id": "M218",
      "timestamp": "2026-01-23T04:15:00Z",
      "category": "detection_gap",
      "description": "Commit type validation hook did not parse HEREDOC-style commit messages, allowing invalid type feat to pass",
      "root_cause": "validate_commit_type.py only checked -m \"message\" format, returned None (allow) for unrecognized formats including HEREDOC which is the standard format per system prompt",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/bash_handlers/validate_commit_type.py",
      "pattern_keywords": [
        "commit",
        "validation",
        "heredoc",
        "detection_gap"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Handler should parse both -m \"message\" format AND HEREDOC format to validate commit types"
    },
    {
      "id": "M219",
      "timestamp": "2026-01-23T11:45:00-05:00",
      "category": "tool_misuse",
      "description": "Used EDITOR instead of GIT_EDITOR for commit message editor during interactive rebase, causing concatenated messages instead of unified message",
      "root_cause": "Git uses GIT_EDITOR specifically for commit messages during rebase operations. The EDITOR variable is not consulted for this purpose. The git-squash skill documented the wrong environment variable.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "git",
        "rebase",
        "squash",
        "GIT_EDITOR",
        "EDITOR",
        "commit-message"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use GIT_EDITOR=/tmp/msg-editor.sh (not EDITOR) when running interactive rebase to ensure the custom commit message editor is used"
    },
    {
      "id": "M220",
      "timestamp": "2026-01-23T13:30:00-05:00",
      "category": "protocol_violation",
      "description": "Applied changes directly to base branch v2.0 instead of working in an isolated worktree as required by CAT workflow",
      "root_cause": "Session resumed after compaction without verifying worktree isolation. Task-related file edits were made directly on base branch.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "taxonomy_analysis": {
        "module": "PLANNING",
        "failure_mode": "Did not verify session state (worktree isolation) before beginning task work",
        "failure_type": "FALSE_NEGATIVE",
        "cascading": {
          "caused_downstream": false,
          "is_symptom_of": null
        },
        "corrective_feedback": "After session resume, verify worktree status before editing source files",
        "intervention_point": "Before first Edit tool call on source files"
      },
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/warn-base-branch-edit.sh",
      "pattern_keywords": [
        "base-branch",
        "worktree",
        "isolation",
        "v2.0",
        "edit"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When working on tasks, use /cat:work to create an isolated worktree. Never edit source files directly on base branches (v*.*, main, master, develop)."
    },
    {
      "id": "M221",
      "timestamp": "2026-01-23T12:00:00Z",
      "category": "detection_gap",
      "description": "Validator allowed scope modifiers like refactor(hooks): but project format does not permit them",
      "root_cause": "Validator regex explicitly allowed optional scope modifiers with (\\(.+\\))? but commit-types.md specifies format as {type}: {description} with no scope",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/bash_handlers/validate_commit_type.py",
      "pattern_keywords": [
        "commit",
        "scope",
        "validator",
        "regex",
        "format"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Commit format is {type}: {description} - no scope modifiers like (scope) allowed"
    },
    {
      "id": "M222",
      "timestamp": "2026-01-23T10:30:00Z",
      "category": "bash_error",
      "description": "Called find-task.sh without setting required CLAUDE_PROJECT_DIR environment variable",
      "root_cause": "work.md documentation showed find-task.sh invocation without explicitly passing CLAUDE_PROJECT_DIR",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "CLAUDE_PROJECT_DIR",
        "find-task.sh",
        "environment variable",
        "script invocation"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Pass CLAUDE_PROJECT_DIR explicitly when invoking find-task.sh: CLAUDE_PROJECT_DIR=\"${CLAUDE_PROJECT_DIR}\" find-task.sh ..."
    },
    {
      "id": "M223",
      "timestamp": "2026-01-23T13:30:00Z",
      "category": "logical_error",
      "description": "Commit 00524ca2 moved planning structure to .claude/cat/issues/ but didn't update status_handler.py to look in the new location, breaking /cat:status",
      "root_cause": "Incomplete grep search for path references during refactoring - Python code using Path objects wasn't caught",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/run_tests.py",
      "pattern_keywords": [
        "refactoring",
        "path-change",
        "incomplete-search",
        "status-handler"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When moving directories, search for all path references including Python Path objects, not just shell scripts. Run tests after path changes to verify all handlers work."
    },
    {
      "id": "M224",
      "timestamp": "2026-01-23T00:00:00Z",
      "category": "documentation_violation",
      "description": "STATE.md files created with wrong format (status: value) instead of correct format (- **Status:** value)",
      "root_cause": "Multiple places in codebase referenced wrong format: find-task.sh, work.md, init.md, add.md, remove.md, status_handler.py. The task was created manually without following the template.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/find-task.sh",
      "pattern_keywords": [
        "state.md",
        "status",
        "format",
        "parsing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "STATE.md files must use bullet+bold format: '- **Status:** pending', '- **Progress:** 0%', etc. All scripts and handlers must parse this format."
    },
    {
      "id": "M225",
      "timestamp": "2026-01-23T16:00:00Z",
      "category": "protocol_violation",
      "description": "Task complete banner displayed with misaligned vertical lines due to agent retyping box instead of copy-pasting pre-computed output",
      "root_cause": "work.md contained embedded box templates that conflicted with pre-computed boxes from work_handler.py. Agent used inline template instead of pre-computed output.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box-alignment",
        "pre-computed",
        "copy-paste",
        "embedded-template"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Skills must reference PRE-COMPUTED WORK BOXES instead of containing embedded box templates. Remove all inline boxes from skill files."
    },
    {
      "id": "M226",
      "timestamp": "2026-01-23T14:30:00Z",
      "category": "protocol_violation",
      "description": "Rendered scorecard with 2 top-level metrics (Speed, Cost) instead of 3 (Speed, Cost, Quality), conflating Quality stakeholder with Quality top-level metric",
      "root_cause": "Failed to reference loaded template structure that explicitly showed Speed, Cost, Quality as separate top-level row, distinct from 8 stakeholder dimensions",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/research.md",
      "pattern_keywords": [
        "scorecard",
        "rating",
        "quality",
        "dimensions",
        "template"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Render scorecard with 11 dimensions: Speed, Cost, Quality as top-level row (3), then Architect, Security, Tester, Performance, UX, Sales, Marketing, Legal as stakeholder row (8)"
    },
    {
      "id": "M227",
      "timestamp": "2026-01-23T14:50:00Z",
      "category": "protocol_violation",
      "description": "Added ASCII box template directly to research.md skill instead of referencing handler function. Skills must not contain embedded box templates (M217).",
      "root_cause": "Bypassed skill-builder process for quick fix. Attempted to fix M226 by embedding visual template instead of updating handler reference.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/research.md",
      "pattern_keywords": [
        "box",
        "template",
        "embedded",
        "skill-builder",
        "handler"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use skill-builder for skill modifications. Reference handler functions by name (e.g., build_scorecard) instead of embedding visual examples. Skills describe structure textually, handlers render it."
    },
    {
      "id": "M228",
      "timestamp": "2026-01-23T12:00:00Z",
      "category": "protocol_violation",
      "description": "Failed to update PLAN.md during /cat:research - skipped identify_version and update_plan steps entirely across 3 rounds of research",
      "root_cause": "Skill workflow steps are documented but not enforced - agent can skip steps without detection",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/research.md",
      "pattern_keywords": [
        "research",
        "PLAN.md",
        "update_plan",
        "identify_version",
        "wizard_selection"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Set RESEARCH_PLAN_PATH in identify_version step, update PLAN.md immediately after each wizard selection using Edit tool"
    },
    {
      "id": "M229",
      "timestamp": "2026-01-24T12:30:00Z",
      "category": "logical_error",
      "description": "Rating scorecard box in research_handler.py had misaligned columns due to incorrect padding formula",
      "root_cause": "Padding calculation used BOX_WIDTH - 5 instead of inner_width - 2, causing content rows to be 73 chars instead of 71",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/tests/handlers/test_research_handler.py",
      "pattern_keywords": [
        "box-drawing",
        "padding",
        "width-calculation",
        "display-alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use inner_width - 2 - len(content) for padding calculation to ensure all box lines have consistent width"
    }
  ]
}
