[
  {
    "id": "M091",
    "timestamp": "2026-01-15T06:15:00Z",
    "category": "protocol_violation",
    "description": "Released v1.7 without updating CHANGELOG.md - ran git tag directly instead of using release-plugin skill",
    "root_cause": "Ad-hoc release process instead of using release-plugin skill which ensures changelog synchronization",
    "rca_method": "B",
    "rca_method_name": "taxonomy",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/skills/release-plugin/SKILL.md",
    "pattern_keywords": [
      "release",
      "changelog",
      "git tag",
      "version"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "When user requests a release, always invoke release-plugin skill. Update CHANGELOG.md BEFORE creating git tag."
  },
  {
    "id": "M092",
    "timestamp": "2026-01-15T01:50:00Z",
    "category": "protocol_violation",
    "description": "Used invalid commit type feat: instead of feature:",
    "root_cause": "Defaulted to conventional commit pattern without checking project-specific commit types in git-commit skill",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "hook",
    "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
    "pattern_keywords": [
      "commit",
      "type",
      "feat",
      "feature",
      "conventional"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use feature: not feat:, bugfix: not fix:, and other full names as specified in git-commit skill line 136"
  },
  {
    "id": "M093",
    "timestamp": "2026-01-15T02:00:00Z",
    "category": "protocol_violation",
    "description": "Recorded M092 with documentation as prevention when documentation already existed and failed",
    "root_cause": "Skipped step 8 of learn-from-mistakes workflow (check if prevention already exists) due to completion bias",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/skills/learn-from-mistakes/SKILL.md",
    "pattern_keywords": [
      "prevention",
      "escalation",
      "existing",
      "documentation"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Before recording prevention, check if it already exists. If existing prevention failed, escalate to stronger level (documentation → hook/validation)"
  },
  {
    "id": "M094",
    "timestamp": "2026-01-15T02:15:00Z",
    "category": "protocol_violation",
    "description": "Created hook script with wrong implementation (PostToolUse logic in PreToolUse hook) and did not use register-hook skill",
    "root_cause": "Did not use register-hook skill which would have guided proper hook type selection and implementation pattern",
    "rca_method": "B",
    "rca_method_name": "taxonomy",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/skills/register-hook/SKILL.md",
    "pattern_keywords": [
      "hook",
      "register",
      "PreToolUse",
      "PostToolUse",
      "TOOL_INPUT"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use /cat:register-hook skill when creating hooks. It guides proper hook type selection and provides correct implementation patterns."
  },
  {
    "id": "M095",
    "timestamp": "2026-01-15T16:19:00Z",
    "category": "git_operation_failure",
    "description": "Used soft reset squash workflow for mid-history commits, losing commits after squash range",
    "root_cause": "git-squash skill workflow assumed commits at branch tip; used branch -f main HEAD which discards commits after the squash range when squashing mid-history",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "skill",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/skills/git-squash/SKILL.md",
    "pattern_keywords": [
      "git",
      "squash",
      "mid-history",
      "soft-reset",
      "branch-f",
      "lost-commits"
    ],
    "prevention_implemented": true,
    "prevention_verified": true,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Check if commits are at branch tip; use interactive rebase workflow for mid-history squashes"
  },
  {
    "id": "M096",
    "timestamp": "2026-01-16T00:45:00Z",
    "category": "assumption_without_verification",
    "description": "Reported subagent used ~29K tokens when actual usage was 137K - measurement was wrong, not estimation",
    "root_cause": "Main agent reported token value without verifying .completion.json or parsing session file - claimed measured value without actual measurement",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/skills/collect-results/SKILL.md",
    "pattern_keywords": [
      "token_measurement",
      "completion_json",
      "session_file",
      "verification"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Verify token metrics from .completion.json or session JSONL file before reporting. Never claim measured values without actual measurement."
  },
  {
    "id": "M097",
    "timestamp": "2026-01-16T00:50:00Z",
    "category": "protocol_violation",
    "description": "Main agent edited source code directly during merge conflict instead of spawning subagent",
    "root_cause": "Completion bias - rationalized bypassing protocol for perceived efficiency on small fix",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/.claude/cat/references/agent-architecture.md",
    "pattern_keywords": [
      "main_agent_boundary",
      "code_edit",
      "delegation",
      "completion_bias"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "medium",
      "catches_variations": true
    },
    "correct_behavior": "Spawn subagent for ALL code changes including merge conflict resolution - no exceptions for small fixes"
  },
  {
    "id": "M098",
    "timestamp": "2026-01-16T14:34:30-05:00",
    "category": "protocol_violation",
    "description": "Used invalid commit types 'security:' and 'skill:' - valid types are feature, bugfix, test, refactor, performance, docs, style, config, planning",
    "root_cause": "Assumed commit type was valid without consulting commit-types.md - hook only had denylist, not allowlist",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "hook",
    "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
    "pattern_keywords": [
      "commit",
      "type",
      "security",
      "skill",
      "invalid"
    ],
    "prevention_implemented": true,
    "prevention_verified": true,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use only valid commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning. Security fixes use bugfix:, skill changes use config:"
  },
  {
    "id": "M099",
    "timestamp": "2026-01-18T02:27:44Z",
    "category": "assumption_without_verification",
    "description": "Used invalid commit types 'fix:' and 'feat:' instead of 'bugfix:' and 'feature:'",
    "root_cause": "Assumed conventional commit abbreviations were valid without checking CAT standards",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "hook",
    "prevention_path": "~/.config/claude/settings.json (registered /workspace/cat/hooks/validate-commit-type.sh)",
    "pattern_keywords": [
      "commit-type",
      "feat",
      "fix",
      "conventional-commits"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use full commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning"
  },
  {
    "id": "M100",
    "timestamp": "2026-01-18T12:00:00Z",
    "category": "detection_gap",
    "description": "Hook validate-commit-type.sh failed to detect feat:/fix: because HEREDOC parsing was checked after simple quotes pattern, causing incorrect match",
    "root_cause": "Regex ordering bug: -m \"$(cat <<EOF\" matched the simple quotes pattern first, extracting \"$(cat <<\" as the message instead of falling through to HEREDOC branch",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "code_fix",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/cat/commands/{config,init,status,work}.md",
    "pattern_keywords": [
      "hook",
      "regex",
      "HEREDOC",
      "commit-type",
      "detection"
    ],
    "prevention_implemented": true,
    "prevention_verified": true,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Check HEREDOC pattern before simple quotes pattern in commit message extraction"
  },
  {
    "id": "M132",
    "timestamp": "2026-01-18T20:29:20Z",
    "category": "logical_error",
    "description": "Incorrectly classified ✦ (U+2726) as width 2 emoji when it is width 1 symbol, causing ✦ lines to be 1 char short",
    "root_cause": "No systematic method to distinguish emojis (width 2) from symbols (width 1) - assumed decorative chars were emojis",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "skill",
    "prevention_path": "/workspace/cat/commands/config.md",
    "pattern_keywords": [
      "unicode-width",
      "emoji",
      "symbol",
      "display-width",
      "EAW"
    ],
    "prevention_implemented": true,
    "prevention_verified": true,
    "recurrence_of": "M131",
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Check Unicode East Asian Width property: only W/F = width 2; N/Na/A = width 1. ✦ is EAW=N (Neutral)"
  },
  {
    "id": "M133",
    "timestamp": "2026-01-19T12:00:00Z",
    "category": "protocol_violation",
    "description": "Used docs: commit type for .claude/cat/ planning files instead of planning:",
    "root_cause": "Did not mentally map .claude/cat/ file paths to planning: type. Defaulted to docs: because content was documentation-like rather than checking file location.",
    "rca_method": "B",
    "rca_method_name": "taxonomy",
    "prevention_type": "skill",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/cat/references/commit-types.md",
    "pattern_keywords": [
      "commit-type",
      "docs",
      "planning",
      "file-location"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Check file location first: .claude/cat/ files → planning:, .claude/hooks/ → config:, user docs → docs:"
  },
  {
    "id": "M134",
    "timestamp": "2026-01-19T14:00:00Z",
    "category": "documentation_violation",
    "description": "Used config: commit type for bug fix in plugin/ because M133 said plugin/ → config:, but bug fixes should always use bugfix:",
    "root_cause": "M133 prevention created oversimplified rule (plugin/ → config:) without clarifying that commit type reflects change purpose, not file location",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "skill",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
    "pattern_keywords": [
      "commit-type",
      "bugfix",
      "config",
      "file-location",
      "change-purpose"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Commit type reflects WHAT changed (bugfix, feature, refactor), not WHERE the file is. File location only determines default type for ambiguous changes."
  },
  {
    "id": "M135",
    "timestamp": "2026-01-19T14:30:00Z",
    "category": "assumption_without_verification",
    "description": "Used incorrect glob pattern for finding task STATE.md files, assuming task/ subdirectory existed when project uses flat structure",
    "root_cause": "Documentation-reality mismatch: workflow documentation shows task/ subdirectory pattern but CAT own project structure places tasks directly under minor versions",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "skill",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
    "pattern_keywords": [
      "task-path",
      "STATE.md",
      "find-task",
      "glob-pattern",
      "directory-structure"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Task directories are directly under minor versions: .claude/cat/v{major}/v{major}.{minor}/{task-name}/ - NO task/ subdirectory."
  },
  {
    "id": "M136",
    "timestamp": "2026-01-19T12:30:00Z",
    "category": "protocol_violation",
    "description": "Status display output had 5 vertical alignment issues - missing closing borders and floating disconnected border characters",
    "root_cause": "Template in status.md skill had inconsistent borders, and M129 verification step was skipped during output",
    "rca_method": "B",
    "rca_method_name": "taxonomy",
    "prevention_type": "skill",
    "prevention_path": "/workspace/plugin/commands/status.md",
    "pattern_keywords": [
      "status",
      "display",
      "alignment",
      "border",
      "emoji",
      "width",
      "padding"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Verify all lines have consistent borders using the PRE-OUTPUT CHECKLIST before rendering status display"
  },
  {
    "id": "M137",
    "timestamp": "2026-01-19T05:28:00Z",
    "category": "protocol_violation",
    "description": "Status display output had vertical alignment issues - inner boxes not properly bordered, skipped PRE-OUTPUT CHECKLIST",
    "root_cause": "Compliance failure - PRE-OUTPUT CHECKLIST existed but was skipped during rendering. Documentation-level prevention from M136 failed.",
    "rca_method": "C",
    "rca_method_name": "causal-barrier",
    "prevention_type": "validation",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/validate-status-alignment.sh",
    "pattern_keywords": [
      "status",
      "display",
      "alignment",
      "border",
      "checklist",
      "validation"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": "M136",
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Run validate-status-alignment.sh on proposed output before rendering, ensuring all lines have both left and right borders"
  },
  {
    "id": "M138",
    "timestamp": "2026-01-19T05:28:00Z",
    "category": "protocol_violation",
    "description": "Manually read PROJECT.md and multiple PLAN.md files after status-data.sh returned incomplete data, violating MANDATORY: Use ONLY script data instruction",
    "root_cause": "MANDATORY instructions without enforcement are treated as suggestions. Script returned incomplete data due to directory structure mismatch, and I prioritized completeness over protocol compliance.",
    "rca_method": "A",
    "rca_method_name": "5-whys",
    "prevention_type": "code_fix",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status-data.sh",
    "pattern_keywords": [
      "status",
      "script",
      "mandatory",
      "data",
      "manual",
      "read"
    ],
    "prevention_implemented": true,
    "prevention_verified": true,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use ONLY data from status-data.sh output. If script returns incomplete data, report the bug after rendering rather than manually supplementing."
  },
  {
    "id": "M139",
    "timestamp": "2026-01-19T05:45:00Z",
    "category": "protocol_violation",
    "description": "Used 'docs:' commit type for retrospectives/mistakes.json instead of 'config:' (Claude-facing configuration)",
    "root_cause": "Did not consult commit-types.md before committing. Used 'docs:' by assumption instead of checking documented rules for .claude/cat/retrospectives/ files.",
    "rca_method": "B",
    "rca_method_name": "taxonomy",
    "prevention_type": "skill",
    "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
    "pattern_keywords": [
      "commit",
      "type",
      "docs",
      "config",
      "retrospectives",
      "claude-facing"
    ],
    "prevention_implemented": true,
    "prevention_verified": false,
    "recurrence_of": null,
    "prevention_quality": {
      "verification_type": "positive",
      "fragility": "low",
      "catches_variations": true
    },
    "correct_behavior": "Use 'config:' for .claude/cat/retrospectives/ files because mistakes.json and retrospectives.json are Claude-facing configuration that affects runtime behavior"
  }
]
