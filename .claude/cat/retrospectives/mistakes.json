{
  "mistakes": [
    {
      "id": "M091",
      "timestamp": "2026-01-15T06:15:00Z",
      "category": "protocol_violation",
      "description": "Released v1.7 without updating CHANGELOG.md - ran git tag directly instead of using release-plugin skill",
      "root_cause": "Ad-hoc release process instead of using release-plugin skill which ensures changelog synchronization",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/release-plugin/SKILL.md",
      "pattern_keywords": [
        "release",
        "changelog",
        "git tag",
        "version"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user requests a release, always invoke release-plugin skill. Update CHANGELOG.md BEFORE creating git tag."
    },
    {
      "id": "M092",
      "timestamp": "2026-01-15T01:50:00Z",
      "category": "protocol_violation",
      "description": "Used invalid commit type feat: instead of feature:",
      "root_cause": "Defaulted to conventional commit pattern without checking project-specific commit types in git-commit skill",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit",
        "type",
        "feat",
        "feature",
        "conventional"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use feature: not feat:, bugfix: not fix:, and other full names as specified in git-commit skill line 136"
    },
    {
      "id": "M093",
      "timestamp": "2026-01-15T02:00:00Z",
      "category": "protocol_violation",
      "description": "Recorded M092 with documentation as prevention when documentation already existed and failed",
      "root_cause": "Skipped step 8 of learn-from-mistakes workflow (check if prevention already exists) due to completion bias",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "prevention",
        "escalation",
        "existing",
        "documentation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before recording prevention, check if it already exists. If existing prevention failed, escalate to stronger level (documentation → hook/validation)"
    },
    {
      "id": "M094",
      "timestamp": "2026-01-15T02:15:00Z",
      "category": "protocol_violation",
      "description": "Created hook script with wrong implementation (PostToolUse logic in PreToolUse hook) and did not use register-hook skill",
      "root_cause": "Did not use register-hook skill which would have guided proper hook type selection and implementation pattern",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/register-hook/SKILL.md",
      "pattern_keywords": [
        "hook",
        "register",
        "PreToolUse",
        "PostToolUse",
        "TOOL_INPUT"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:register-hook skill when creating hooks. It guides proper hook type selection and provides correct implementation patterns."
    },
    {
      "id": "M095",
      "timestamp": "2026-01-15T16:19:00Z",
      "category": "git_operation_failure",
      "description": "Used soft reset squash workflow for mid-history commits, losing commits after squash range",
      "root_cause": "git-squash skill workflow assumed commits at branch tip; used branch -f main HEAD which discards commits after the squash range when squashing mid-history",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "git",
        "squash",
        "mid-history",
        "soft-reset",
        "branch-f",
        "lost-commits"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check if commits are at branch tip; use interactive rebase workflow for mid-history squashes"
    },
    {
      "id": "M096",
      "timestamp": "2026-01-16T00:45:00Z",
      "category": "assumption_without_verification",
      "description": "Reported subagent used ~29K tokens when actual usage was 137K - measurement was wrong, not estimation",
      "root_cause": "Main agent reported token value without verifying .completion.json or parsing session file - claimed measured value without actual measurement",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/skills/collect-results/SKILL.md",
      "pattern_keywords": [
        "token_measurement",
        "completion_json",
        "session_file",
        "verification"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify token metrics from .completion.json or session JSONL file before reporting. Never claim measured values without actual measurement."
    },
    {
      "id": "M097",
      "timestamp": "2026-01-16T00:50:00Z",
      "category": "protocol_violation",
      "description": "Main agent edited source code directly during merge conflict instead of spawning subagent",
      "root_cause": "Completion bias - rationalized bypassing protocol for perceived efficiency on small fix",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/.claude/cat/references/agent-architecture.md",
      "pattern_keywords": [
        "main_agent_boundary",
        "code_edit",
        "delegation",
        "completion_bias"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Spawn subagent for ALL code changes including merge conflict resolution - no exceptions for small fixes"
    },
    {
      "id": "M098",
      "timestamp": "2026-01-16T14:34:30-05:00",
      "category": "protocol_violation",
      "description": "Used invalid commit types 'security:' and 'skill:' - valid types are feature, bugfix, test, refactor, performance, docs, style, config, planning",
      "root_cause": "Assumed commit type was valid without consulting commit-types.md - hook only had denylist, not allowlist",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "/workspace/cat/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit",
        "type",
        "security",
        "skill",
        "invalid"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use only valid commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning. Security fixes use bugfix:, skill changes use config:"
    },
    {
      "id": "M099",
      "timestamp": "2026-01-18T02:27:44Z",
      "category": "assumption_without_verification",
      "description": "Used invalid commit types 'fix:' and 'feat:' instead of 'bugfix:' and 'feature:'",
      "root_cause": "Assumed conventional commit abbreviations were valid without checking CAT standards",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "~/.config/claude/settings.json (registered /workspace/cat/hooks/validate-commit-type.sh)",
      "pattern_keywords": [
        "commit-type",
        "feat",
        "fix",
        "conventional-commits"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use full commit types: feature, bugfix, test, refactor, performance, docs, style, config, planning"
    },
    {
      "id": "M100",
      "timestamp": "2026-01-18T12:00:00Z",
      "category": "detection_gap",
      "description": "Hook validate-commit-type.sh failed to detect feat:/fix: because HEREDOC parsing was checked after simple quotes pattern, causing incorrect match",
      "root_cause": "Regex ordering bug: -m \"$(cat <<EOF\" matched the simple quotes pattern first, extracting \"$(cat <<\" as the message instead of falling through to HEREDOC branch",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/cat/commands/{config,init,status,work}.md",
      "pattern_keywords": [
        "hook",
        "regex",
        "HEREDOC",
        "commit-type",
        "detection"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check HEREDOC pattern before simple quotes pattern in commit message extraction"
    },
    {
      "id": "M132",
      "timestamp": "2026-01-18T20:29:20Z",
      "category": "logical_error",
      "description": "Incorrectly classified ✦ (U+2726) as width 2 emoji when it is width 1 symbol, causing ✦ lines to be 1 char short",
      "root_cause": "No systematic method to distinguish emojis (width 2) from symbols (width 1) - assumed decorative chars were emojis",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/cat/commands/config.md",
      "pattern_keywords": [
        "unicode-width",
        "emoji",
        "symbol",
        "display-width",
        "EAW"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M131",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check Unicode East Asian Width property: only W/F = width 2; N/Na/A = width 1. ✦ is EAW=N (Neutral)"
    },
    {
      "id": "M133",
      "timestamp": "2026-01-19T12:00:00Z",
      "category": "protocol_violation",
      "description": "Used docs: commit type for .claude/cat/ planning files instead of planning:",
      "root_cause": "Did not mentally map .claude/cat/ file paths to planning: type. Defaulted to docs: because content was documentation-like rather than checking file location.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "planning",
        "file-location"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check file location first: .claude/cat/ files → planning:, .claude/hooks/ → config:, user docs → docs:"
    },
    {
      "id": "M134",
      "timestamp": "2026-01-19T14:00:00Z",
      "category": "documentation_violation",
      "description": "Used config: commit type for bug fix in plugin/ because M133 said plugin/ → config:, but bug fixes should always use bugfix:",
      "root_cause": "M133 prevention created oversimplified rule (plugin/ → config:) without clarifying that commit type reflects change purpose, not file location",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit-type",
        "bugfix",
        "config",
        "file-location",
        "change-purpose"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Commit type reflects WHAT changed (bugfix, feature, refactor), not WHERE the file is. File location only determines default type for ambiguous changes."
    },
    {
      "id": "M135",
      "timestamp": "2026-01-19T14:30:00Z",
      "category": "assumption_without_verification",
      "description": "Used incorrect glob pattern for finding task STATE.md files, assuming task/ subdirectory existed when project uses flat structure",
      "root_cause": "Documentation-reality mismatch: workflow documentation shows task/ subdirectory pattern but CAT own project structure places tasks directly under minor versions",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "task-path",
        "STATE.md",
        "find-task",
        "glob-pattern",
        "directory-structure"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Task directories are directly under minor versions: .claude/cat/v{major}/v{major}.{minor}/{task-name}/ - NO task/ subdirectory."
    },
    {
      "id": "M136",
      "timestamp": "2026-01-19T12:30:00Z",
      "category": "protocol_violation",
      "description": "Status display output had 5 vertical alignment issues - missing closing borders and floating disconnected border characters",
      "root_cause": "Template in status.md skill had inconsistent borders, and M129 verification step was skipped during output",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "emoji",
        "width",
        "padding"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify all lines have consistent borders using the PRE-OUTPUT CHECKLIST before rendering status display"
    },
    {
      "id": "M137",
      "timestamp": "2026-01-19T05:28:00Z",
      "category": "protocol_violation",
      "description": "Status display output had vertical alignment issues - inner boxes not properly bordered, skipped PRE-OUTPUT CHECKLIST",
      "root_cause": "Compliance failure - PRE-OUTPUT CHECKLIST existed but was skipped during rendering. Documentation-level prevention from M136 failed.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/validate-status-alignment.sh",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "checklist",
        "validation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M136",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run validate-status-alignment.sh on proposed output before rendering, ensuring all lines have both left and right borders"
    },
    {
      "id": "M138",
      "timestamp": "2026-01-19T05:28:00Z",
      "category": "protocol_violation",
      "description": "Manually read PROJECT.md and multiple PLAN.md files after status-data.sh returned incomplete data, violating MANDATORY: Use ONLY script data instruction",
      "root_cause": "MANDATORY instructions without enforcement are treated as suggestions. Script returned incomplete data due to directory structure mismatch, and I prioritized completeness over protocol compliance.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status-data.sh",
      "pattern_keywords": [
        "status",
        "script",
        "mandatory",
        "data",
        "manual",
        "read"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use ONLY data from status-data.sh output. If script returns incomplete data, report the bug after rendering rather than manually supplementing."
    },
    {
      "id": "M139",
      "timestamp": "2026-01-19T05:45:00Z",
      "category": "protocol_violation",
      "description": "Used 'docs:' commit type for retrospectives/mistakes.json instead of 'config:' (Claude-facing configuration)",
      "root_cause": "Did not consult commit-types.md before committing. Used 'docs:' by assumption instead of checking documented rules for .claude/cat/retrospectives/ files.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/commit-types.md",
      "pattern_keywords": [
        "commit",
        "type",
        "docs",
        "config",
        "retrospectives",
        "claude-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 'config:' for .claude/cat/retrospectives/ files because mistakes.json and retrospectives.json are Claude-facing configuration that affects runtime behavior"
    },
    {
      "id": "M140",
      "timestamp": "2026-01-19T14:45:00Z",
      "category": "protocol_violation",
      "description": "Status display alignment failure - inner box lines missing outer borders, inconsistent padding despite M136/M137 documentation",
      "root_cause": "Skill requires complex inline padding calculations with nested border structure. Documentation-level prevention (PRE-OUTPUT CHECKLIST) was not followed. Validation script from M137 exists but is not integrated into skill workflow.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md and ${CLAUDE_PROJECT_DIR}/plugin/scripts/validate-status-alignment.sh",
      "pattern_keywords": [
        "status",
        "display",
        "alignment",
        "border",
        "padding",
        "nested",
        "calculation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M137",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Follow exact template structure with position-by-position verification. Every line inside outer box must have outer │ on both ends. Inner box lines have BOTH inner │ AND outer │ borders."
    },
    {
      "id": "M141",
      "timestamp": "2026-01-19T11:11:48Z",
      "category": "protocol_violation",
      "description": "Status display alignment failure (4th recurrence) - validation script not invoked despite BLOCKING GATE instruction",
      "root_cause": "Documentation-level prevention failed 3 times (M136→M137→M140). Instructions labeled 'MANDATORY' and 'BLOCKING GATE' have no enforcement mechanism - agents skip validation step because there is no automated check that blocks output if validation wasn't run.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "alignment",
        "validation",
        "blocking-gate",
        "enforcement",
        "recurrence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M140",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Write status output to /tmp/status-draft.txt, then invoke validate-status-alignment.sh via Bash tool, then only output if validation passes. The Bash tool invocation is trackable and verifiable."
    },
    {
      "id": "M142",
      "timestamp": "2026-01-19T11:21:46Z",
      "category": "detection_gap",
      "description": "Status display alignment failure (5th recurrence) - validation script checks border presence but not display width equality",
      "root_cause": "validate-status-alignment.sh only verifies borders exist (│ present) but does not validate that all lines have equal display width. Lines with different character counts pass validation despite visual misalignment. LLMs cannot reliably calculate character-level padding for Unicode text.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status.sh and ${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "alignment",
        "display-width",
        "unicode",
        "padding",
        "validation",
        "script-rendering"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M141",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use status.sh script for ALL rendering. Script uses Python for Unicode width calculation. LLM just runs script and outputs result - no padding calculations by LLM."
    },
    {
      "id": "M143",
      "timestamp": "2026-01-19T11:28:19Z",
      "category": "documentation_violation",
      "description": "Status script output shown only in Bash tool result (collapsed by Claude Code), not in response text",
      "root_cause": "Skill instruction was ambiguous - said output result to user but did not specify to use Read tool to avoid collapsed Bash output",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "bash-collapse",
        "output-display",
        "status-skill",
        "read-tool"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Write script output to temp file, then use Read tool to display it (avoids Claude Code collapsing large Bash outputs)"
    },
    {
      "id": "M144",
      "timestamp": "2026-01-19T12:15:00Z",
      "category": "documentation_violation",
      "description": "Summarized status output instead of displaying exact file contents verbatim",
      "root_cause": "Skill instruction 'display its contents' was ambiguous - could mean summarize OR verbatim output. M143 focused on Read tool usage but didn't specify verbatim requirement.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "verbatim",
        "summary",
        "read-tool",
        "output"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output file contents EXACTLY as shown in Read tool result - do not summarize or paraphrase"
    },
    {
      "id": "M145",
      "timestamp": "2026-01-19T06:41:00Z",
      "category": "protocol_violation",
      "description": "After Read tool returned status file contents, failed to output them verbatim - jumped directly to NEXT STEPS section",
      "root_cause": "Interpreted instruction as acknowledged rather than requiring literal echo of content. Read tool result was processed but not output to user.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "verbatim",
        "read-tool",
        "output",
        "echo",
        "display"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M144",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After Read tool returns file contents, output the EXACT text in the response before proceeding to NEXT STEPS. Verify box characters are present."
    },
    {
      "id": "M146",
      "timestamp": "2026-01-19T08:20:00Z",
      "category": "assumption_without_verification",
      "description": "Reported 13K tokens for subagent when Claude Code showed actual usage was 27.8K tokens (214% of estimate)",
      "root_cause": "Main agent used pre-execution task size ESTIMATE in approval gate instead of actual MEASURED tokens from subagent completion. Documentation at work.md line 291 says use only measured values but was not followed.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "token_estimate",
        "token_measurement",
        "subagent",
        "verification",
        "approval_gate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M096",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Cross-check reported tokens against Claude Code tool output summary. When Task tool completes it shows actual usage - if reported value differs significantly, re-read subagent completion output."
    },
    {
      "id": "M147",
      "timestamp": "2026-01-19T20:38:00Z",
      "category": "protocol_violation",
      "description": "Main agent investigated exploration subagent findings directly (ran tests, read source code) instead of spawning a verification subagent when uncertain about DUPLICATE finding",
      "root_cause": "No documented pattern for handling uncertainty about subagent findings - distrust led to direct investigation instead of delegating verification",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "subagent",
        "verification",
        "direct-investigation",
        "trust"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When uncertain about subagent findings: (1) ACCEPT and proceed with appropriate workflow, OR (2) SPAWN a verification subagent with specific questions. NEVER investigate directly by reading code or running tests."
    },
    {
      "id": "M148",
      "timestamp": "2026-01-19T20:43:12Z",
      "category": "protocol_violation",
      "description": "Used 'docs:' commit type for learning M147 commit instead of 'config:' - files modified were Claude-facing (mistakes.json, retrospectives.json, spawn-subagent/SKILL.md)",
      "root_cause": "learn-from-mistakes skill Step 12 hardcoded 'docs:' commit type instead of 'config:' for Claude-facing file changes",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "claude-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 'config:' commit type for Claude-facing files (skills, hooks, retrospectives, mistakes.json). Use 'docs:' only for user-facing documentation."
    },
    {
      "id": "M149",
      "timestamp": "2026-01-19T16:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed box characters in text output instead of using work-progress.sh script, causing misaligned vertical borders",
      "root_cause": "Compliance failure - M142 documentation was loaded but agent typed boxes manually instead of using render-to-file-then-read pattern",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "unicode",
        "alignment",
        "manual",
        "work-progress",
        "render"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M142",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use work-progress.sh to render box to temp file, then Read tool to output contents. NEVER manually type box characters."
    },
    {
      "id": "M150",
      "timestamp": "2026-01-19T17:30:00Z",
      "category": "assumption_without_verification",
      "description": "Claimed v1.0 is complete based on minor STATE.md without verifying actual task statuses - 4 of 5 tasks were still pending",
      "root_cause": "No automated validation that minor version status is consistent with its task completion states",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "version status",
        "STATE.md",
        "verification",
        "task completion",
        "inconsistent state"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before marking a version STATE.md as completed, verify all nested items are complete (tasks for minor, minors for major). Validation happens once at completion time, not repeatedly when checking status."
    },
    {
      "id": "M151",
      "timestamp": "2026-01-19T22:20:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate with unsquashed commits - had 3 docs: commits that should have been squashed into 1",
      "root_cause": "Workflow step order had squash_commits AFTER approval_gate, so commits were not squashed before user review",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.worktrees/2.0-expand-exploration-subagent-role/commands/execute-task.md",
      "pattern_keywords": [
        "squash",
        "commits",
        "approval_gate",
        "step_order",
        "workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Squash commits by type BEFORE presenting approval gate. Users should review clean, squashed commit history."
    },
    {
      "id": "M152",
      "timestamp": "2026-01-19T22:25:00Z",
      "category": "protocol_violation",
      "description": "Accepted concatenated commit message after squash instead of amending to unified message",
      "root_cause": "git-squash skill lacked explicit instruction to check and amend concatenated messages after squash",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.worktrees/2.0-expand-exploration-subagent-role/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "squash",
        "commit_message",
        "concatenated",
        "amend",
        "unified"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After squashing, check commit message with git log -1. If concatenated, amend with unified message describing what the combined change accomplishes."
    },
    {
      "id": "M153",
      "timestamp": "2026-01-19T19:40:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate with STATE.md at 90% in-progress instead of 100% completed - files proposed for merge should be in final state",
      "root_cause": "Workflow work.md step 12 shows 90% state before approval, but files being proposed for merge should already reflect final state. Subagent was given incorrect 90% instruction.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/workflows/work.md",
      "pattern_keywords": [
        "STATE.md",
        "approval_gate",
        "final_state",
        "progress",
        "merge"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Set STATE.md to completed/100% BEFORE presenting approval gate. The commit being proposed for merge should reflect final state."
    },
    {
      "id": "M154",
      "timestamp": "2026-01-19T18:45:00-05:00",
      "category": "protocol_violation",
      "description": "Changed checked out branch in main worktree when merging task",
      "root_cause": "Incorrectly assumed merge requires checking out target branch in main workspace",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "git checkout",
        "main worktree",
        "branch switch",
        "merge"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "negative",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Merge task branch into whatever branch is currently checked out in main workspace without switching branches"
    },
    {
      "id": "M155",
      "timestamp": "2026-01-20T10:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed box characters in status display after status.sh script failed with 'bad array subscript' error",
      "root_cause": "Cascading failure: (1) status.sh had bug where ((local_completed++)) without || true exits when incrementing from 0, (2) when script failed, agent improvised by manually typing boxes instead of reporting error and fixing script, violating M149",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/status.sh",
      "pattern_keywords": [
        "box",
        "unicode",
        "alignment",
        "manual",
        "script-error",
        "improvisation",
        "status"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M149",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When a box-rendering script errors: (1) report the error to user, (2) fix the script bug, (3) NEVER manually type box characters. Scripts should be robust with || true after arithmetic operations that may evaluate to 0."
    },
    {
      "id": "M156",
      "timestamp": "2026-01-20T14:30:00Z",
      "category": "detection_gap",
      "description": "Used docs: commit type for skill file changes instead of config:",
      "root_cause": "PreToolUse hook checks git diff --cached before git add executes, so files from git add X && git commit are not seen",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "skills",
        "PreToolUse",
        "git-add"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use config: commit type for skill file changes. Hook now extracts files from git add commands in the command string."
    },
    {
      "id": "M157",
      "timestamp": "2026-01-20T14:45:00Z",
      "category": "protocol_violation",
      "description": "Presented approval gate without squashing commits by type first",
      "root_cause": "Skipped squash step in approval flow despite documentation existing",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/.claude/cat/references/approval-gates.md",
      "pattern_keywords": [
        "approval-gate",
        "squash",
        "commit-type",
        "workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Always squash commits by type BEFORE presenting approval gate to user. Flow: changes complete → squash → present gate."
    },
    {
      "id": "M158",
      "timestamp": "2026-01-20T15:54:38Z",
      "category": "protocol_violation",
      "description": "box_header() used hardcoded space padding instead of pad() function, causing misaligned right borders when content contains emojis",
      "root_cause": "Implementation subagent added manual spaces for positioning status character instead of using the centralized pad() function that handles emoji display width correctly",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/work-progress.sh",
      "pattern_keywords": [
        "box",
        "alignment",
        "emoji",
        "padding",
        "unicode",
        "width"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M142",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use pad() or display_width() from box.sh for any content containing emojis or Unicode characters that need alignment"
    },
    {
      "id": "M159",
      "timestamp": "2026-01-20T11:22:37-05:00",
      "category": "protocol_violation",
      "description": "Used wrong progress display format (▸/▹ symbols) instead of approved Style E (✓/►/◦ with ◀── current marker)",
      "root_cause": "work-progress.sh implementation diverged from approved Style E specification without verification",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/work-progress.sh",
      "pattern_keywords": [
        "progress_display",
        "style_e",
        "visual_format",
        "specification_mismatch"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use Style E format: rounded box header with ✓/►/◦ symbols and ◀── current marker"
    },
    {
      "id": "M160",
      "timestamp": "2026-01-20T12:35:00-05:00",
      "category": "protocol_violation",
      "description": "Presented approval gate without showing diff content - only file change summary",
      "root_cause": "Approval gate displayed file statistics instead of actual code changes, leaving user unable to evaluate changes before approving",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval_gate",
        "diff",
        "review"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Show full diff content BEFORE presenting AskUserQuestion for approval"
    },
    {
      "id": "M161",
      "timestamp": "2026-01-20T18:55:00-05:00",
      "category": "protocol_violation",
      "description": "Ran git diff in Bash tool but did not output diff as text - tool results not visible to user",
      "root_cause": "Documentation said 'show diff' but did not specify to OUTPUT as text, allowing technically-compliant but ineffective presentation via tool results only",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval_gate",
        "diff",
        "tool_output",
        "text_output"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M160",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After running git diff, OUTPUT the result as markdown text with ## Changes for Approval header and diff code block, not just tool results"
    },
    {
      "id": "M162",
      "timestamp": "2026-01-21T15:30:00Z",
      "category": "protocol_violation",
      "description": "Offered completed version v1.10 as task target option when adding new task",
      "root_cause": "Workflow said to 'prefer active/pending over completed' but did not explicitly exclude completed versions from task target options",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/add.md",
      "pattern_keywords": [
        "add-task",
        "version-selection",
        "completed-version",
        "filter"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Filter out completed versions before presenting task target options. Only versions with status pending or in-progress should be offered."
    },
    {
      "id": "M163",
      "timestamp": "2026-01-21T11:05:00Z",
      "category": "protocol_violation",
      "description": "Created tasks via /cat:add without updating parent STATE.md Tasks Pending list",
      "root_cause": "Vague workflow step task_update_parent said 'update task count' without specifying to add task names to pending list",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "taxonomy_module": "PLANNING",
      "taxonomy_failure_mode": "Incomplete workflow execution - skipped mandatory step",
      "taxonomy_failure_type": "FALSE_NEGATIVE",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/add.md",
      "pattern_keywords": [
        "add",
        "task",
        "STATE.md",
        "pending",
        "parent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After creating task STATE.md and PLAN.md, always add task name to parent version STATE.md Tasks Pending list"
    },
    {
      "id": "M164",
      "timestamp": "2026-01-21T18:09:12Z",
      "category": "protocol_violation",
      "description": "Agent skipped header box display during /cat:work, went directly to progress line",
      "root_cause": "Header instruction lacked emphasis and appeared after progress examples, causing agents to skip it",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "header",
        "progress",
        "work",
        "display",
        "box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display header box FIRST using work-progress.sh header, then show progress line updates"
    },
    {
      "id": "M165",
      "timestamp": "2026-01-22T00:10:00Z",
      "category": "protocol_violation",
      "description": "Displayed progress banner without mandatory header box above it",
      "root_cause": "Did not verify header was displayed before showing progress banner - ambiguous documentation showed progress line both with and without header",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "progress_banner",
        "header",
        "display",
        "M162"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always display header box (🐱 > task-name with underline) before any progress banner"
    },
    {
      "id": "M166",
      "timestamp": "2026-01-22T00:00:00Z",
      "category": "protocol_violation",
      "description": "Status display rendered v2.0 without inner box borders - each major must have its own ╭─/╰─ wrapper",
      "root_cause": "Template showed one major example but did not explicitly state every major needs inner box structure",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "status",
        "display",
        "box",
        "border",
        "major",
        "minor",
        "hierarchy"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Render each major version with its own inner box (╭─ and ╰─), closing the box before starting the next major"
    },
    {
      "id": "M166",
      "timestamp": "2026-01-22T02:21:00Z",
      "category": "protocol_violation",
      "description": "Used docs: commit type for .claude/cat/v*/ planning files instead of planning:",
      "root_cause": "Hook blocked docs: but did not enforce that planning: MUST be used for version files. Chose wrong type based on file extension (.md) rather than location (.claude/cat/v*/)",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "/workspace/plugin/hooks/validate-commit-type.sh",
      "pattern_keywords": [
        "commit-type",
        "planning",
        "docs",
        ".claude/cat"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use planning: commit type for all files in .claude/cat/v*/ directory"
    },
    {
      "id": "M167",
      "timestamp": "2026-01-22T02:22:00Z",
      "category": "protocol_violation",
      "description": "When /cat:learn invoked, performed ad-hoc analysis instead of invoking learn-from-mistakes skill as instructed",
      "root_cause": "Read command instruction but substituted ad-hoc analysis for required skill invocation. Command doc said invoke skill but agent chose to analyze directly.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/learn.md",
      "pattern_keywords": [
        "skill-invocation",
        "cat:learn",
        "ad-hoc",
        "protocol"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When /cat:learn is invoked, immediately use Skill tool to invoke cat:learn-from-mistakes - no ad-hoc analysis"
    },
    {
      "id": "M168",
      "timestamp": "2026-01-22T02:30:48Z",
      "category": "protocol_violation",
      "description": "Recommended adding task to v1.10 which was already completed",
      "root_cause": "Proceeded with task flow without verifying version filtering worked after bash syntax error",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/commands/add.md",
      "pattern_keywords": [
        "completed_version",
        "version_status",
        "filter_versions"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always verify version status is not completed before suggesting it as a task target"
    },
    {
      "id": "M169",
      "timestamp": "2026-01-22T12:00:00Z",
      "category": "documentation_violation",
      "description": "Progress header displayed short task name instead of full task ID (missing version prefix)",
      "root_cause": "Documentation used {task-name} placeholder instead of {major}.{minor}-{task-name} for header format",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "progress_header",
        "task_id",
        "version_prefix",
        "display_format"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use full task ID format in progress header: {major}.{minor}-{task-name} (e.g., 2.0-fix-config-documentation)"
    },
    {
      "id": "M169",
      "timestamp": "2026-01-22T02:55:10Z",
      "category": "protocol_violation",
      "description": "Progress header showed partial task ID (remote-lock-metadata) instead of full ID (2.0-remote-lock-metadata)",
      "root_cause": "Header format examples in work.md used {task-name} placeholder instead of explicit {major}.{minor}-{task-name} format",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "header",
        "task-id",
        "progress-banner",
        "format"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always use full task ID format {major}.{minor}-{task-name} in progress headers"
    },
    {
      "id": "M170",
      "timestamp": "2026-01-22T02:55:19Z",
      "category": "protocol_violation",
      "description": "Approval gate diff used ad-hoc summary format instead of Variant 2 Isolated Changes format",
      "root_cause": "commands/work.md approval_gate step said to display diff but did not reference the Variant 2 format specification in workflows/work.md",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "diff",
        "variant-2",
        "approval-gate",
        "format",
        "isolated-changes"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display diff using Variant 2 Isolated Changes format with +/- markers for actual code changes, not ad-hoc summaries"
    },
    {
      "id": "M171",
      "timestamp": "2026-01-22T03:03:12Z",
      "category": "documentation_violation",
      "description": "Approval gate diff used Variant 2 format instead of 4-column table format from render-diff-skill PLAN.md",
      "root_cause": "Two conflicting diff format specs exist: workflows/work.md (Variant 2) and render-diff-skill PLAN.md (4-column table). Prevention for M170 referenced the wrong/older format.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "diff-format",
        "4-column-table",
        "render-diff-skill",
        "approval-gate",
        "variant-2"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M170",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use 4-column table format from render-diff-skill PLAN.md with box-drawing characters, line numbers, and hunk context"
    },
    {
      "id": "M172",
      "timestamp": "2026-01-22T03:11:28Z",
      "category": "protocol_violation",
      "description": "Referenced PLAN.md for a skill instead of the actual skill documentation (SKILL.md)",
      "root_cause": "Used PLAN.md (task planning doc) as authoritative format spec instead of SKILL.md (skill documentation). PLAN.md describes what to build; SKILL.md describes how to use it.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "PLAN.md",
        "SKILL.md",
        "skill-reference",
        "documentation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M171",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Reference SKILL.md for usage documentation, not PLAN.md. Use the skill via its script/command, not by reading the plan."
    }
  ]
}
