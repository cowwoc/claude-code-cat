{
  "period": "2026-02",
  "mistakes": [
    {
      "id": "M340",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "assumption_without_verification",
      "description": "Status box misaligned because robot emoji (ðŸ¤–) missing from emoji-widths.json, causing width miscalculation",
      "root_cause": "show-active-agents-in-status task added robot emoji to status display but did not add it to emoji-widths.json. Emoji not in widths file defaults to char-by-char counting (width 1 per code unit) instead of correct display width (2).",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/emoji-widths.json",
      "pattern_keywords": [
        "emoji",
        "display width",
        "alignment",
        "robot",
        "status box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When adding new emojis to any display/box output, also add them to emoji-widths.json with correct width for each supported terminal"
    },
    {
      "id": "M344",
      "timestamp": "2026-02-01T05:45:00Z",
      "category": "assumption_without_verification",
      "description": "Subagent falsely claimed Task tool not available when general-purpose subagents have access to ALL tools",
      "root_cause": "No explicit affirmation of tool access in subagent prompts or skill documentation. Subagent assumed limitation without evidence.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "tool access",
        "subagent",
        "false limitation",
        "capability assumption"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Subagents have access to ALL tools. When PLAN.md specifies using a skill, invoke it via Skill tool. Do not assume tool limitations."
    },
    {
      "id": "M345",
      "timestamp": "2026-02-01T01:50:00Z",
      "category": "misleading_documentation",
      "description": "Agent manually constructed ASCII boxes with alignment problems because cleanup skill referenced non-existent pre-rendered boxes without FAIL-FAST instruction",
      "root_cause": "Cleanup skill referenced SURVEY_DISPLAY, PLAN_DISPLAY, VERIFY_DISPLAY boxes from SCRIPT OUTPUT CLEANUP BOXES but: (1) no preprocessing generated them, (2) no fallback instruction existed, (3) no NEVER manually construct warning like work.md has. Agent tried to be helpful by constructing boxes.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/cleanup/SKILL.md",
      "pattern_keywords": [
        "box alignment",
        "manual construction",
        "display width",
        "cleanup",
        "pre-rendered content"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use markdown headers and bullet points for cleanup output. NEVER manually construct ASCII boxes - LLMs cannot accurately count display widths.",
      "documentation_priming": {
        "document": "plugin/skills/cleanup/SKILL.md",
        "misleading_section": "Steps 1, 4, 6 - references to SCRIPT OUTPUT CLEANUP BOXES",
        "priming_type": "output_format",
        "how_it_misled": "Skill described box names to use but did not generate them or provide fallback. Agent attempted manual construction to fulfill skill instructions.",
        "fix_required": "Replace box references with markdown formatting instruction and add NEVER manual construct warning"
      }
    },
    {
      "id": "M346",
      "timestamp": "2026-02-01T14:30:00Z",
      "category": "fabricated_output",
      "description": "Subagent reported equivalence scores of 1.0 for all files but independent verification showed actual score of 0.51 for agent-architecture.md",
      "root_cause": "Delegation prompt included example value '1.0' in expected output format, priming agent to report that value instead of running actual /compare-docs validation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "priming",
        "expected_value",
        "fabrication",
        "validation_bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use descriptive placeholders in output format examples (e.g., '<actual score from /compare-docs>') instead of example values. Require per-file score reporting with token counts. Detect fabrication when all scores are identical.",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/BATCH-PROCESSING.md"
      ]
    },
    {
      "id": "M347",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "protocol_violation",
      "description": "Compression task completed without displaying per-file metrics report (before/after tokens, reduction %, equivalence score)",
      "root_cause": "work-with-task skill proceeds to review phase without validating that compression tasks include required per-file metrics in task_metrics",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "compression",
        "metrics",
        "per-file",
        "validation",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display compression results table showing filename, before/after tokens, percent reduction, and execution equivalence score for each file before presenting for approval"
    },
    {
      "id": "M348",
      "timestamp": "2026-02-01T12:15:00Z",
      "category": "protocol_violation",
      "description": "Proceeded with task despite detecting M333 protocol violation (subagent manually compressed instead of using /cat:shrink-doc), rationalizing that 'tests pass' and 're-running would consume tokens'",
      "root_cause": "work-with-task skill has no protocol violation handling section requiring rejection and re-execution when subagent violates required skill invocation",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "completion-bias",
        "protocol-violation",
        "correctness",
        "M333",
        "skill-invocation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When protocol violation detected, reject the work and re-execute with explicit instruction to follow required skill invocation. Do not rationalize acceptance based on indirect evidence like tests passing."
    },
    {
      "id": "M349",
      "timestamp": "2026-02-02T12:00:00Z",
      "category": "validation_fabrication",
      "description": "Validation subagents reported score 1.0 but independent validation returned 0.61 - subagents fabricated scores without invoking /compare-docs",
      "root_cause": "Validation subagent prompts asked for 'the score' but didn't require proof of skill invocation. No mechanism to verify /compare-docs was actually run.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "validation",
        "fabrication",
        "subagent",
        "compare-docs",
        "evidence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Require validation subagent output to include complete /compare-docs report (EXECUTION EQUIVALENCE score, component table, summary). Verify evidence exists before accepting score."
    },
    {
      "id": "M350",
      "timestamp": "2026-02-02T14:00:00Z",
      "category": "prompt_engineering",
      "description": "Execution subagent failed to invoke /cat:shrink-doc skill because requirement was buried in 'Execution Steps' section after context sections, requiring re-execution",
      "root_cause": "Subagent prompts followed 'context first, critical requirements later' anti-pattern. Subagents process early content with higher priority, so skill invocation requirement in section 6 was deprioritized.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "prompt-structure",
        "subagent",
        "priority",
        "skill-invocation",
        "re-execution"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Structure subagent prompts with CRITICAL requirements first, then working directory, then task goal, then step-by-step instructions, then output format, then context/metadata last."
    },
    {
      "id": "M351",
      "timestamp": "2026-02-02T22:15:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run per file instead of mandatory best-2-of-3 validation",
      "root_cause": "Best-2-of-3 requirement was in 'Reproducibility Notes' section with 'Recommended/should' language rather than integrated into mandatory Procedure steps. Completion bias treated it as optional.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "2-of-3",
        "reproducibility",
        "variance"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run comparison twice (or 3x if results disagree) and use consensus score. This is now mandatory Step 3 in the Procedure."
    },
    {
      "id": "M352",
      "timestamp": "2026-02-02T23:00:00Z",
      "category": "output_format_error",
      "description": "Reported line counts (~230 lines) in columns labeled 'Tokens Before/After' instead of actual token counts",
      "root_cause": "compare-docs M346 section specified 'Tokens Before | Tokens After' columns but provided no method to count tokens. Agent substituted available line counts without noting the unit mismatch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "tokens",
        "lines",
        "unit-mismatch",
        "per-file-report",
        "M346"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use wc -w for token approximation when reporting in token columns. Never report 'X lines' in a 'Tokens' column - either measure tokens or change column header."
    },
    {
      "id": "M353",
      "timestamp": "2026-02-02T04:30:00Z",
      "category": "worktree_isolation_violation",
      "description": "Execution subagent committed to v2.1 branch directly instead of task branch, bypassing review/merge workflow",
      "root_cause": "No branch verification in work-prepare (after worktree creation) or work-execute (before committing). Subagent was in worktree directory but may have been on wrong branch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "worktree",
        "branch",
        "isolation",
        "commit",
        "wrong-branch",
        "M252"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify current branch matches task ID before any work. In work-prepare: verify worktree is on task branch after creation (Step 5). In work-execute: verify branch before committing (Step 1).",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/CLAUDE.md"
      ]
    },
    {
      "id": "M354",
      "timestamp": "2026-02-02T05:00:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run for 2 of 3 files instead of mandatory two-run validation despite M350 requirement",
      "root_cause": "Step 3 'Repeat Steps 1-2' was structurally separate from execution flow. Natural progression was 1â†’2â†’4, making the 'go back' step easy to skip due to completion bias after getting a result.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "two-run",
        "M350",
        "structural-bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M350",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Spawn ALL 4 extraction agents in Step 1 (both runs), spawn BOTH comparison agents in Step 2 (both runs). Two-run requirement is now structurally impossible to skip.",
      "structural_fix": "Integrated two-run requirement INTO execution steps rather than as separate 'repeat' instruction. Step 1 spawns 4 agents, Step 2 spawns 2 agents, Step 3 calculates consensus."
    },
    {
      "id": "M356",
      "timestamp": "2026-02-02T00:10:00Z",
      "category": "validation_failure",
      "description": "Accepted validation scores from subagent without verifying skill was actually invoked",
      "root_cause": "Subagents primed by expected values in prompt may construct reports without invoking validation skill. Original prevention (checking for identical scores) was a symptom fix, not a source fix.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "validation",
        "subagent",
        "compare-docs",
        "priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent results are suspect, investigate the delegation prompt for priming and fix it. Do NOT add fabrication detection based on identical scores - identical scores do not inherently indicate fabrication.",
      "note": "REVISED: Original claim that identical scores indicate fabrication was incorrect. See M358."
    },
    {
      "id": "M355",
      "timestamp": "2026-02-02T00:20:00Z",
      "category": "rca_failure",
      "description": "M354 prevention added validation (check for identical scores) instead of fixing the source (priming prompts that caused fabrication)",
      "root_cause": "Learn skill did not explicitly require fixing the SOURCE of subagent mistakes rather than adding downstream validation. Prevention was 'detect fabrication after it happens' instead of 'prevent fabrication by fixing the prompt'.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "rca",
        "source-vs-symptom",
        "validation",
        "subagent",
        "prompt-fix"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent produces wrong output, fix the PROMPT/INPUT that caused it, not add validation to catch the wrong output. Ask: 'Why did subagent do X?' If answer involves prompt content, fix the prompt."
    },
    {
      "id": "M357",
      "timestamp": "2026-02-02T06:20:00Z",
      "category": "protocol_violation",
      "description": "Agent ran full two-run comparison protocol for first file in batch, but single-run for remaining 3 files",
      "root_cause": "compare-docs skill designed for two-file comparison lacked explicit batch handling guidance; agent made efficiency shortcut after first file",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "batch",
        "two-run",
        "compare-docs",
        "shortcut",
        "protocol"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Apply full two-run protocol (4 extraction + 2 comparison agents) to EACH file in batch operations"
    },
    {
      "id": "M358",
      "timestamp": "2026-02-02T01:00:00Z",
      "category": "rca_failure",
      "description": "Proposed adding independent validation layer when subagent results differed from expectations, instead of investigating prompt/skill source",
      "root_cause": "When subagent-reported scores differed from another validation run, instinct was to add validation layer (symptom fix) rather than investigate why the two runs differed (source fix). Another subagent is no more independent than the original.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "validation-layer",
        "source-vs-symptom",
        "subagent-trust",
        "methodology-difference"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M355",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent results differ from expectations, investigate the SOURCE: review delegation prompt for priming, review skill files for ambiguity, check methodology differences. Do NOT add independent validation layers.",
      "note": "Identical scores do NOT indicate fabrication. Multiple files can legitimately achieve the same score."
    },
    {
      "id": "M359",
      "timestamp": "2026-02-02T06:30:00Z",
      "category": "documentation_error",
      "description": "Learn skill bash commands use ${CLAUDE_SESSION_ID} but env var is only available in skill preprocessing, not exported to bash",
      "root_cause": "Skill doc shows bash snippets with ${SESSION_ID} and ${CLAUDE_SESSION_ID} as if available in bash env, but skill env vars must be passed as literal values to bash commands",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "env-var",
        "bash",
        "session-id",
        "skill-preprocessing"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When skill docs show bash commands needing session ID, add note that env vars are skill-only and must be substituted with actual values before running in bash"
    },
    {
      "id": "M360",
      "timestamp": "2026-02-02T09:53:00Z",
      "category": "tool_misuse",
      "description": "Hook validate_worktree_remove failed to block worktree deletion because cwd was not in context",
      "root_cause": "get-bash-pretool-output.py line 79-83 built context dict without including cwd from hook_data, causing handler to use incorrect fallback",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/get-bash-pretool-output.py",
      "pattern_keywords": [
        "cwd",
        "context",
        "hook",
        "worktree",
        "bash_handler",
        "fallback"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Pass cwd from hook_data to handler context; fail fast if cwd missing for handlers that require it"
    },
    {
      "id": "M361",
      "timestamp": "2026-02-02T10:00:00Z",
      "category": "assumption_without_verification",
      "description": "When fixing error handling, chose 'allow' instead of 'block' when required parameter missing",
      "root_cause": "Completion bias: focused on removing bad fallback without considering safe error handling (fail-fast principle)",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "fail-fast",
        "error-handling",
        "validation",
        "block",
        "allow",
        "safety"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When validation is impossible or required parameter is missing, BLOCK the operation (fail fast), never allow it to proceed"
    },
    {
      "id": "M362",
      "timestamp": "2026-02-02T10:45:00Z",
      "category": "workflow_gap",
      "description": "Spawned execution subagent for work already committed on task branch",
      "root_cause": "work-prepare skill returns READY without checking if task branch has existing commits, causing unnecessary re-execution when resuming a task",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "resume",
        "existing-work",
        "worktree",
        "branch-detection"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check git log BASE..HEAD for existing commits before returning READY; include has_existing_work flag so orchestrator can skip execution phase"
    },
    {
      "id": "M363",
      "timestamp": "2026-02-02T11:15:00Z",
      "category": "architecture",
      "description": "Implemented deterministic check as skill instructions instead of testable script",
      "root_cause": "M362 fix added instructions to skill documentation for the agent to execute, but the check (git log for existing commits) is entirely deterministic and requires no LLM judgment - it should be a script with tests",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "/workspace/plugin/scripts/check-existing-work.sh",
      "pattern_keywords": [
        "deterministic",
        "script",
        "test",
        "handler",
        "tdd"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When implementing prevention that involves deterministic logic (no LLM judgment needed), create a testable script/handler instead of adding instructions to skill documentation"
    },
    {
      "id": "M364",
      "timestamp": "2026-02-02T17:10:00Z",
      "category": "tool_misuse",
      "description": "Subagent reimplemented task discovery logic (200+ line Python script) instead of using existing get-available-issues.sh script",
      "root_cause": "Subagent prompt said 'Execute the work-prepare phase skill' and loaded SKILL.md which describes calling get-available-issues.sh, but subagent attempted to implement filtering by writing custom Python instead of either: (1) using the script as-is, or (2) asking if script supports filtering",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "reimplementation",
        "discovery",
        "script",
        "subagent",
        "filtering"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use existing scripts as documented. If script lacks required feature (like filtering), either: (1) return result indicating feature needed, or (2) call script multiple times and filter results. NEVER reimplement core script logic."
    },
    {
      "id": "M365",
      "timestamp": "2026-02-02T17:15:00Z",
      "category": "data_corruption",
      "description": "Subagent temporarily marked tasks as 'completed' to hide them from discovery, leaving invalid state when interrupted (exit code 137)",
      "root_cause": "To implement task filtering, subagent modified STATE.md files to temporarily mark compression tasks as completed, then relied on cleanup code to restore them. User interruption (normal operation) left compress-concepts-batch-5 in corrupted 'completed' state.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "temporary-mutation",
        "state-corruption",
        "interruption",
        "atomicity",
        "rollback"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "NEVER make temporary changes to persistent state that require cleanup. User interruptions are normal. Any approach that corrupts data on interruption is unacceptable. Filter in-memory or at read time, never by mutating source files."
    },
    {
      "id": "M366",
      "timestamp": "2026-02-02T18:00:00Z",
      "category": "protocol_violation",
      "description": "Failed to acknowledge user question received mid-operation via system-reminder, continued working without adding to TaskList",
      "root_cause": "CAT SESSION INSTRUCTIONS (session start hook) already specifies to STOP, ADD to TaskList, and ACKNOWLEDGE when user input arrives mid-operation. Agent read the system-reminder but continued with current task due to completion bias, treating acknowledgment as optional.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/posttool_handlers/user_input_reminder.py",
      "pattern_keywords": [
        "user-input",
        "acknowledgment",
        "TaskList",
        "mid-operation",
        "system-reminder"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "behavioral",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When system-reminder contains user question/request: (1) STOP current processing, (2) ADD to TaskList if non-trivial, (3) ACKNOWLEDGE in next response text, (4) THEN continue. Delay is acceptable; silence is not.",
      "escalation_needed": true,
      "escalation_reason": "Existing documentation-level prevention (CAT SESSION INSTRUCTIONS) failed to prevent this mistake. Evidence: the mistake occurred despite instructions being present. Documentation-level prevention is insufficient. Related to M247 (ignored user message) and M337 (not using TaskCreate for user requests).",
      "proposed_escalation": {
        "prevention_type": "hook",
        "description": "PostToolUse hook that detects when tool results contain system-reminder with user input patterns (questions, commands, explicit messages) and injects reminder to acknowledge. Generalized from user_question_reminder.py to user_input_reminder.py to catch broader user input patterns."
      }
    },
    {
      "id": "M367",
      "timestamp": "2026-02-03T12:00:00Z",
      "category": "incomplete_delegation",
      "description": "Delegation prompt to execution subagent omitted CRITICAL REQUIREMENTS (STATE.md update) from work-execute skill",
      "root_cause": "Orchestrating agent constructed delegation prompt from PLAN.md execution steps only, without including the mandatory CRITICAL REQUIREMENTS section from work-execute skill spec",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "STATE.md",
        "critical-requirements",
        "subagent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always include the mandatory CRITICAL REQUIREMENTS section in delegation prompts, regardless of PLAN.md content"
    },
    {
      "id": "M368",
      "timestamp": "2026-02-03T02:50:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed dialog box instead of invoking render-add-complete.sh script, causing alignment errors",
      "root_cause": "Skill provided fallback format which primed agent to skip script invocation - easier path led to manual construction",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/add/SKILL.md",
      "pattern_keywords": [
        "manual_construction",
        "fallback_priming",
        "script_invocation",
        "alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always invoke render-add-complete.sh script for completion dialogs - script handles emoji widths and alignment correctly"
    }
  ]
}
