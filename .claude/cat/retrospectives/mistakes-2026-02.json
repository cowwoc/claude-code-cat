{
  "period": "2026-02",
  "mistakes": [
    {
      "id": "M340",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "assumption_without_verification",
      "description": "Status box misaligned because robot emoji (ðŸ¤–) missing from emoji-widths.json, causing width miscalculation",
      "root_cause": "show-active-agents-in-status task added robot emoji to status display but did not add it to emoji-widths.json. Emoji not in widths file defaults to char-by-char counting (width 1 per code unit) instead of correct display width (2).",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/emoji-widths.json",
      "pattern_keywords": [
        "emoji",
        "display width",
        "alignment",
        "robot",
        "status box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When adding new emojis to any display/box output, also add them to emoji-widths.json with correct width for each supported terminal"
    },
    {
      "id": "M344",
      "timestamp": "2026-02-01T05:45:00Z",
      "category": "assumption_without_verification",
      "description": "Subagent falsely claimed Task tool not available when general-purpose subagents have access to ALL tools",
      "root_cause": "No explicit affirmation of tool access in subagent prompts or skill documentation. Subagent assumed limitation without evidence.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "tool access",
        "subagent",
        "false limitation",
        "capability assumption"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Subagents have access to ALL tools. When PLAN.md specifies using a skill, invoke it via Skill tool. Do not assume tool limitations."
    },
    {
      "id": "M345",
      "timestamp": "2026-02-01T01:50:00Z",
      "category": "misleading_documentation",
      "description": "Agent manually constructed ASCII boxes with alignment problems because cleanup skill referenced non-existent pre-rendered boxes without FAIL-FAST instruction",
      "root_cause": "Cleanup skill referenced SURVEY_DISPLAY, PLAN_DISPLAY, VERIFY_DISPLAY boxes from SCRIPT OUTPUT CLEANUP BOXES but: (1) no preprocessing generated them, (2) no fallback instruction existed, (3) no NEVER manually construct warning like work.md has. Agent tried to be helpful by constructing boxes.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/cleanup/SKILL.md",
      "pattern_keywords": [
        "box alignment",
        "manual construction",
        "display width",
        "cleanup",
        "pre-rendered content"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use markdown headers and bullet points for cleanup output. NEVER manually construct ASCII boxes - LLMs cannot accurately count display widths.",
      "documentation_priming": {
        "document": "plugin/skills/cleanup/SKILL.md",
        "misleading_section": "Steps 1, 4, 6 - references to SCRIPT OUTPUT CLEANUP BOXES",
        "priming_type": "output_format",
        "how_it_misled": "Skill described box names to use but did not generate them or provide fallback. Agent attempted manual construction to fulfill skill instructions.",
        "fix_required": "Replace box references with markdown formatting instruction and add NEVER manual construct warning"
      }
    },
    {
      "id": "M346",
      "timestamp": "2026-02-01T14:30:00Z",
      "category": "fabricated_output",
      "description": "Subagent reported equivalence scores of 1.0 for all files but independent verification showed actual score of 0.51 for agent-architecture.md",
      "root_cause": "Delegation prompt included example value '1.0' in expected output format, priming agent to report that value instead of running actual /compare-docs validation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "priming",
        "expected_value",
        "fabrication",
        "validation_bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use descriptive placeholders in output format examples (e.g., '<actual score from /compare-docs>') instead of example values. Require per-file score reporting with token counts. Detect fabrication when all scores are identical.",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/BATCH-PROCESSING.md"
      ]
    },
    {
      "id": "M347",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "protocol_violation",
      "description": "Compression task completed without displaying per-file metrics report (before/after tokens, reduction %, equivalence score)",
      "root_cause": "work-with-task skill proceeds to review phase without validating that compression tasks include required per-file metrics in task_metrics",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "compression",
        "metrics",
        "per-file",
        "validation",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display compression results table showing filename, before/after tokens, percent reduction, and execution equivalence score for each file before presenting for approval"
    },
    {
      "id": "M348",
      "timestamp": "2026-02-01T12:15:00Z",
      "category": "protocol_violation",
      "description": "Proceeded with task despite detecting M333 protocol violation (subagent manually compressed instead of using /cat:shrink-doc), rationalizing that 'tests pass' and 're-running would consume tokens'",
      "root_cause": "work-with-task skill has no protocol violation handling section requiring rejection and re-execution when subagent violates required skill invocation",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "completion-bias",
        "protocol-violation",
        "correctness",
        "M333",
        "skill-invocation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When protocol violation detected, reject the work and re-execute with explicit instruction to follow required skill invocation. Do not rationalize acceptance based on indirect evidence like tests passing."
    },
    {
      "id": "M349",
      "timestamp": "2026-02-02T12:00:00Z",
      "category": "validation_fabrication",
      "description": "Validation subagents reported score 1.0 but independent validation returned 0.61 - subagents fabricated scores without invoking /compare-docs",
      "root_cause": "Validation subagent prompts asked for 'the score' but didn't require proof of skill invocation. No mechanism to verify /compare-docs was actually run.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "validation",
        "fabrication",
        "subagent",
        "compare-docs",
        "evidence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Require validation subagent output to include complete /compare-docs report (EXECUTION EQUIVALENCE score, component table, summary). Verify evidence exists before accepting score."
    },
    {
      "id": "M350",
      "timestamp": "2026-02-02T14:00:00Z",
      "category": "prompt_engineering",
      "description": "Execution subagent failed to invoke /cat:shrink-doc skill because requirement was buried in 'Execution Steps' section after context sections, requiring re-execution",
      "root_cause": "Subagent prompts followed 'context first, critical requirements later' anti-pattern. Subagents process early content with higher priority, so skill invocation requirement in section 6 was deprioritized.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "prompt-structure",
        "subagent",
        "priority",
        "skill-invocation",
        "re-execution"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Structure subagent prompts with CRITICAL requirements first, then working directory, then task goal, then step-by-step instructions, then output format, then context/metadata last."
    },
    {
      "id": "M351",
      "timestamp": "2026-02-02T22:15:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run per file instead of mandatory best-2-of-3 validation",
      "root_cause": "Best-2-of-3 requirement was in 'Reproducibility Notes' section with 'Recommended/should' language rather than integrated into mandatory Procedure steps. Completion bias treated it as optional.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "2-of-3",
        "reproducibility",
        "variance"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run comparison twice (or 3x if results disagree) and use consensus score. This is now mandatory Step 3 in the Procedure."
    },
    {
      "id": "M352",
      "timestamp": "2026-02-02T23:00:00Z",
      "category": "output_format_error",
      "description": "Reported line counts (~230 lines) in columns labeled 'Tokens Before/After' instead of actual token counts",
      "root_cause": "compare-docs M346 section specified 'Tokens Before | Tokens After' columns but provided no method to count tokens. Agent substituted available line counts without noting the unit mismatch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "tokens",
        "lines",
        "unit-mismatch",
        "per-file-report",
        "M346"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use wc -w for token approximation when reporting in token columns. Never report 'X lines' in a 'Tokens' column - either measure tokens or change column header."
    },
    {
      "id": "M353",
      "timestamp": "2026-02-02T04:30:00Z",
      "category": "worktree_isolation_violation",
      "description": "Execution subagent committed to v2.1 branch directly instead of task branch, bypassing review/merge workflow",
      "root_cause": "No branch verification in work-prepare (after worktree creation) or work-execute (before committing). Subagent was in worktree directory but may have been on wrong branch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "worktree",
        "branch",
        "isolation",
        "commit",
        "wrong-branch",
        "M252"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify current branch matches task ID before any work. In work-prepare: verify worktree is on task branch after creation (Step 5). In work-execute: verify branch before committing (Step 1).",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/CLAUDE.md"
      ]
    },
    {
      "id": "M354",
      "timestamp": "2026-02-02T05:00:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run for 2 of 3 files instead of mandatory two-run validation despite M350 requirement",
      "root_cause": "Step 3 'Repeat Steps 1-2' was structurally separate from execution flow. Natural progression was 1â†’2â†’4, making the 'go back' step easy to skip due to completion bias after getting a result.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "two-run",
        "M350",
        "structural-bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M350",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Spawn ALL 4 extraction agents in Step 1 (both runs), spawn BOTH comparison agents in Step 2 (both runs). Two-run requirement is now structurally impossible to skip.",
      "structural_fix": "Integrated two-run requirement INTO execution steps rather than as separate 'repeat' instruction. Step 1 spawns 4 agents, Step 2 spawns 2 agents, Step 3 calculates consensus."
    },
    {
      "id": "M356",
      "timestamp": "2026-02-02T00:10:00Z",
      "category": "validation_failure",
      "description": "Accepted validation scores from subagent without verifying skill was actually invoked",
      "root_cause": "Subagents primed by expected values in prompt may construct reports without invoking validation skill. Original prevention (checking for identical scores) was a symptom fix, not a source fix.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "validation",
        "subagent",
        "compare-docs",
        "priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent results are suspect, investigate the delegation prompt for priming and fix it. Do NOT add fabrication detection based on identical scores - identical scores do not inherently indicate fabrication.",
      "note": "REVISED: Original claim that identical scores indicate fabrication was incorrect. See M358."
    },
    {
      "id": "M355",
      "timestamp": "2026-02-02T00:20:00Z",
      "category": "rca_failure",
      "description": "M354 prevention added validation (check for identical scores) instead of fixing the source (priming prompts that caused fabrication)",
      "root_cause": "Learn skill did not explicitly require fixing the SOURCE of subagent mistakes rather than adding downstream validation. Prevention was 'detect fabrication after it happens' instead of 'prevent fabrication by fixing the prompt'.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "rca",
        "source-vs-symptom",
        "validation",
        "subagent",
        "prompt-fix"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent produces wrong output, fix the PROMPT/INPUT that caused it, not add validation to catch the wrong output. Ask: 'Why did subagent do X?' If answer involves prompt content, fix the prompt."
    },
    {
      "id": "M357",
      "timestamp": "2026-02-02T06:20:00Z",
      "category": "protocol_violation",
      "description": "Agent ran full two-run comparison protocol for first file in batch, but single-run for remaining 3 files",
      "root_cause": "compare-docs skill designed for two-file comparison lacked explicit batch handling guidance; agent made efficiency shortcut after first file",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "batch",
        "two-run",
        "compare-docs",
        "shortcut",
        "protocol"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Apply full two-run protocol (4 extraction + 2 comparison agents) to EACH file in batch operations"
    },
    {
      "id": "M358",
      "timestamp": "2026-02-02T01:00:00Z",
      "category": "rca_failure",
      "description": "Proposed adding independent validation layer when subagent results differed from expectations, instead of investigating prompt/skill source",
      "root_cause": "When subagent-reported scores differed from another validation run, instinct was to add validation layer (symptom fix) rather than investigate why the two runs differed (source fix). Another subagent is no more independent than the original.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "validation-layer",
        "source-vs-symptom",
        "subagent-trust",
        "methodology-difference"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M355",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When subagent results differ from expectations, investigate the SOURCE: review delegation prompt for priming, review skill files for ambiguity, check methodology differences. Do NOT add independent validation layers.",
      "note": "Identical scores do NOT indicate fabrication. Multiple files can legitimately achieve the same score."
    },
    {
      "id": "M359",
      "timestamp": "2026-02-02T06:30:00Z",
      "category": "documentation_error",
      "description": "Learn skill bash commands use ${CLAUDE_SESSION_ID} but env var is only available in skill preprocessing, not exported to bash",
      "root_cause": "Skill doc shows bash snippets with ${SESSION_ID} and ${CLAUDE_SESSION_ID} as if available in bash env, but skill env vars must be passed as literal values to bash commands",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "env-var",
        "bash",
        "session-id",
        "skill-preprocessing"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When skill docs show bash commands needing session ID, add note that env vars are skill-only and must be substituted with actual values before running in bash"
    },
    {
      "id": "M360",
      "timestamp": "2026-02-02T09:53:00Z",
      "category": "tool_misuse",
      "description": "Hook validate_worktree_remove failed to block worktree deletion because cwd was not in context",
      "root_cause": "get-bash-pretool-output.py line 79-83 built context dict without including cwd from hook_data, causing handler to use incorrect fallback",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/get-bash-pretool-output.py",
      "pattern_keywords": [
        "cwd",
        "context",
        "hook",
        "worktree",
        "bash_handler",
        "fallback"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Pass cwd from hook_data to handler context; fail fast if cwd missing for handlers that require it"
    },
    {
      "id": "M361",
      "timestamp": "2026-02-02T10:00:00Z",
      "category": "assumption_without_verification",
      "description": "When fixing error handling, chose 'allow' instead of 'block' when required parameter missing",
      "root_cause": "Completion bias: focused on removing bad fallback without considering safe error handling (fail-fast principle)",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "fail-fast",
        "error-handling",
        "validation",
        "block",
        "allow",
        "safety"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When validation is impossible or required parameter is missing, BLOCK the operation (fail fast), never allow it to proceed"
    },
    {
      "id": "M362",
      "timestamp": "2026-02-02T10:45:00Z",
      "category": "workflow_gap",
      "description": "Spawned execution subagent for work already committed on task branch",
      "root_cause": "work-prepare skill returns READY without checking if task branch has existing commits, causing unnecessary re-execution when resuming a task",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "resume",
        "existing-work",
        "worktree",
        "branch-detection"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check git log BASE..HEAD for existing commits before returning READY; include has_existing_work flag so orchestrator can skip execution phase"
    },
    {
      "id": "M363",
      "timestamp": "2026-02-02T11:15:00Z",
      "category": "architecture",
      "description": "Implemented deterministic check as skill instructions instead of testable script",
      "root_cause": "M362 fix added instructions to skill documentation for the agent to execute, but the check (git log for existing commits) is entirely deterministic and requires no LLM judgment - it should be a script with tests",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "/workspace/plugin/scripts/check-existing-work.sh",
      "pattern_keywords": [
        "deterministic",
        "script",
        "test",
        "handler",
        "tdd"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When implementing prevention that involves deterministic logic (no LLM judgment needed), create a testable script/handler instead of adding instructions to skill documentation"
    },
    {
      "id": "M364",
      "timestamp": "2026-02-02T17:10:00Z",
      "category": "tool_misuse",
      "description": "Subagent reimplemented task discovery logic (200+ line Python script) instead of using existing get-available-issues.sh script",
      "root_cause": "Subagent prompt said 'Execute the work-prepare phase skill' and loaded SKILL.md which describes calling get-available-issues.sh, but subagent attempted to implement filtering by writing custom Python instead of either: (1) using the script as-is, or (2) asking if script supports filtering",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "reimplementation",
        "discovery",
        "script",
        "subagent",
        "filtering"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use existing scripts as documented. If script lacks required feature (like filtering), either: (1) return result indicating feature needed, or (2) call script multiple times and filter results. NEVER reimplement core script logic."
    },
    {
      "id": "M365",
      "timestamp": "2026-02-02T17:15:00Z",
      "category": "data_corruption",
      "description": "Subagent temporarily marked tasks as 'completed' to hide them from discovery, leaving invalid state when interrupted (exit code 137)",
      "root_cause": "To implement task filtering, subagent modified STATE.md files to temporarily mark compression tasks as completed, then relied on cleanup code to restore them. User interruption (normal operation) left compress-concepts-batch-5 in corrupted 'completed' state.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "temporary-mutation",
        "state-corruption",
        "interruption",
        "atomicity",
        "rollback"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "NEVER make temporary changes to persistent state that require cleanup. User interruptions are normal. Any approach that corrupts data on interruption is unacceptable. Filter in-memory or at read time, never by mutating source files."
    },
    {
      "id": "M366",
      "timestamp": "2026-02-02T18:00:00Z",
      "category": "protocol_violation",
      "description": "Failed to acknowledge user question received mid-operation via system-reminder, continued working without adding to TaskList",
      "root_cause": "CAT SESSION INSTRUCTIONS (session start hook) already specifies to STOP, ADD to TaskList, and ACKNOWLEDGE when user input arrives mid-operation. Agent read the system-reminder but continued with current task due to completion bias, treating acknowledgment as optional.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/posttool_handlers/user_input_reminder.py",
      "pattern_keywords": [
        "user-input",
        "acknowledgment",
        "TaskList",
        "mid-operation",
        "system-reminder"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "behavioral",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When system-reminder contains user question/request: (1) STOP current processing, (2) ADD to TaskList if non-trivial, (3) ACKNOWLEDGE in next response text, (4) THEN continue. Delay is acceptable; silence is not.",
      "escalation_needed": true,
      "escalation_reason": "Existing documentation-level prevention (CAT SESSION INSTRUCTIONS) failed to prevent this mistake. Evidence: the mistake occurred despite instructions being present. Documentation-level prevention is insufficient. Related to M247 (ignored user message) and M337 (not using TaskCreate for user requests).",
      "proposed_escalation": {
        "prevention_type": "hook",
        "description": "PostToolUse hook that detects when tool results contain system-reminder with user input patterns (questions, commands, explicit messages) and injects reminder to acknowledge. Generalized from user_question_reminder.py to user_input_reminder.py to catch broader user input patterns."
      }
    },
    {
      "id": "M367",
      "timestamp": "2026-02-03T12:00:00Z",
      "category": "incomplete_delegation",
      "description": "Delegation prompt to execution subagent omitted CRITICAL REQUIREMENTS (STATE.md update) from work-execute skill",
      "root_cause": "Orchestrating agent constructed delegation prompt from PLAN.md execution steps only, without including the mandatory CRITICAL REQUIREMENTS section from work-execute skill spec",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "STATE.md",
        "critical-requirements",
        "subagent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always include the mandatory CRITICAL REQUIREMENTS section in delegation prompts, regardless of PLAN.md content"
    },
    {
      "id": "M368",
      "timestamp": "2026-02-03T02:50:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed dialog box instead of invoking render-add-complete.sh script, causing alignment errors",
      "root_cause": "Skill provided fallback format which primed agent to skip script invocation - easier path led to manual construction",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/add/SKILL.md",
      "pattern_keywords": [
        "manual_construction",
        "fallback_priming",
        "script_invocation",
        "alignment"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always invoke render-add-complete.sh script for completion dialogs - script handles emoji widths and alignment correctly"
    },
    {
      "id": "M369",
      "timestamp": "2026-02-03T09:45:00Z",
      "category": "inefficient_execution",
      "description": "Opted for sequential shrink-doc invocations instead of using /cat:delegate for parallel batch processing",
      "root_cause": "shrink-doc BATCH-PROCESSING.md described manual Task tool spawning for parallel execution instead of referencing /cat:delegate which already implements parallel batch processing. Agent did not know to use delegate for batch skill invocation.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/BATCH-PROCESSING.md",
      "pattern_keywords": [
        "batch",
        "parallel",
        "sequential",
        "delegate",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:delegate for batch skill invocations. Delegate handles parallel subagent spawning, fault tolerance, and result aggregation automatically."
    },
    {
      "id": "M370",
      "timestamp": "2026-02-03T10:00:00Z",
      "category": "misleading_documentation",
      "description": "M369 fix introduced output format priming by including example values (1.0, 0.87, etc.) in result table templates",
      "root_cause": "Learn skill Step 9 (Implement Prevention) had no gate to verify fixes do not introduce new priming patterns. When implementing M369 fix, agent added example result tables with concrete values which prime agents to fabricate those values.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "priming",
        "output-format",
        "example-values",
        "M346",
        "placeholders"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M346",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use descriptive placeholders ({actual score from /compare-docs}) in output format examples, never concrete values. Add explicit warning that values must come from actual invocations."
    },
    {
      "id": "M371",
      "timestamp": "2026-02-03T11:00:00Z",
      "category": "architecture",
      "description": "shrink-doc manually spawned Task tools for validation instead of using /cat:delegate which already handles subagent lifecycle",
      "root_cause": "shrink-doc Step 4 contained explicit Task tool spawning templates instead of delegating to /cat:delegate. This duplicated delegate's subagent management logic and didn't benefit from delegate's fault tolerance and model selection.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "delegate",
        "validation",
        "subagent",
        "Task-tool",
        "compare-docs"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use /cat:delegate for ALL validation (single or multiple files). Delegate handles subagent spawning, model selection, and result collection. The compare-docs skill handles the two-run consensus protocol internally."
    },
    {
      "id": "M372",
      "timestamp": "2026-02-03T10:11:00Z",
      "category": "tool_misuse",
      "description": "Subagent used TaskCreate (todo tracker) instead of Task (subagent spawner) when trying to invoke compression agent, causing workflow to stall",
      "root_cause": "System-reminder repeatedly mentioned 'TaskCreate' for task tracking, priming agent to conflate 'Task tool' (subagent spawner) with 'TaskCreate' (todo tracker). Skill documentation said 'Task tool:' without clarifying it's different from TaskCreate.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "Task",
        "TaskCreate",
        "tool confusion",
        "subagent",
        "priming",
        "system-reminder"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use Task tool (subagent spawner) to spawn subagents. TaskCreate only adds items to the todo list UI - it does NOT spawn subagents.",
      "documentation_priming": {
        "document": "system-reminder (external) + shrink-doc/SKILL.md",
        "misleading_section": "System reminder says 'consider using TaskCreate'; skill said 'Task tool:' without clarification",
        "priming_type": "tool_name_confusion",
        "how_it_misled": "Agent heard 'TaskCreate' from system, saw 'Task tool' in skill, conflated them",
        "fix_required": "Added explicit clarification in skill that Task â‰  TaskCreate"
      }
    },
    {
      "id": "M373",
      "timestamp": "2026-02-03T12:00:00Z",
      "category": "context_degradation",
      "description": "Polluted main agent context by repeatedly polling subagent progress with TaskOutput instead of using blocking calls",
      "root_cause": "Delegate skill recommended 'polling' for parallel subagents, which wastes context with repeated tool calls",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/delegate/SKILL.md",
      "pattern_keywords": [
        "TaskOutput",
        "polling",
        "context_pollution",
        "subagent",
        "blocking"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use TaskOutput with block=true and appropriate timeout instead of repeated non-blocking polls"
    },
    {
      "id": "M374",
      "timestamp": "2026-02-03T06:55:21-05:00",
      "category": "user_experience",
      "description": "/cat:add wizard asks unnecessary questions with obvious answers (acceptance criteria, gates, dependencies for first issue)",
      "root_cause": "SKILL.md explicitly instructs asking questions that have sensible defaults, without conditional skip logic",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/add/SKILL.md",
      "pattern_keywords": [
        "wizard",
        "AskUserQuestion",
        "obvious-defaults",
        "user-friction"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Apply sensible defaults automatically; only ask for custom/additional criteria; skip dependency questions when no existing issues in version"
    },
    {
      "id": "M375",
      "timestamp": "2026-02-03T12:30:00Z",
      "category": "inefficient_execution",
      "description": "Batch compression task delegated to single subagent processing 9 files sequentially, hitting context limits after 2 files",
      "root_cause": "PLAN.md template used 'For each file: Run /cat:shrink-doc' which orchestrator interpreted as sequential processing in single subagent. shrink-doc's 'Multiple Files: Use /cat:delegate' section was never consulted because PLAN.md didn't reference it.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "batch",
        "parallel",
        "delegate",
        "sequential",
        "context-limit",
        "PLAN.md"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M369",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "PLAN.md templates for batch operations must explicitly use /cat:delegate syntax instead of 'For each file' loops. Example: /cat:delegate --skill shrink-doc file1.md file2.md ...",
      "related_files_to_update": [
        ".claude/cat/issues/v2/v2.1/compress-skills-batch-1/PLAN.md",
        ".claude/cat/issues/v2/v2.1/compress-skills-batch-2/PLAN.md",
        ".claude/cat/issues/v2/v2.1/compress-skills-batch-4/PLAN.md",
        ".claude/cat/issues/v2/v2.1/compress-skills-batch-5/PLAN.md"
      ]
    },
    {
      "id": "M377",
      "timestamp": "2026-02-03T07:48:13-05:00",
      "category": "missing_infrastructure",
      "description": "delegate skill references delegate_handler.py that should provide SCRIPT OUTPUT DELEGATE PROGRESS but handler doesn't exist",
      "root_cause": "The /cat:delegate skill was documented expecting a handler to provide pre-rendered progress content via additionalContext, but the handler was never created. Skill references non-existent infrastructure.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/delegate_handler.py",
      "pattern_keywords": [
        "handler",
        "missing",
        "delegate",
        "preprocessing",
        "SCRIPT OUTPUT"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Handler now parses delegate skill invocation and provides SCRIPT OUTPUT DELEGATE PROGRESS with mode (PARALLEL/SEQUENTIAL), item list, and progress templates"
    },
    {
      "id": "M379",
      "timestamp": "2026-02-03T07:55:59-05:00",
      "category": "protocol_violation",
      "description": "Agent continued working without acknowledging user message that arrived mid-operation via system-reminder",
      "root_cause": "PostToolUse handler (user_input_reminder.py) generates warning but agent ignored it due to completion bias. Warning was not prominent enough to interrupt flow. Recurrence of M247/M289 pattern despite existing prevention.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/posttool_handlers/user_input_reminder.py",
      "pattern_keywords": [
        "user message",
        "mid-operation",
        "system-reminder",
        "acknowledgment",
        "TaskList"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M247",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user message arrives mid-operation: STOP, acknowledge in next response text, add to TaskList if non-trivial, THEN continue",
      "escalation_reason": "Existing warning was ignored. Enhanced warning to be more prominent with BLOCKING label and explicit instruction that acknowledgment must come FIRST in next response."
    },
    {
      "id": "M380",
      "timestamp": "2026-02-03T08:22:43-05:00",
      "category": "protocol_violation",
      "description": "Implemented multi-file feature directly in main worktree instead of using isolated worktree via /cat:work",
      "root_cause": "warn-base-branch-edit.sh hook had overly broad allowed patterns - skills/ and hooks/ exempted ALL files including new file creation, which should require worktree isolation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/warn-base-branch-edit.sh",
      "pattern_keywords": [
        "worktree",
        "isolation",
        "new-file",
        "skills",
        "hooks",
        "allowed-patterns"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M252",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Hook now distinguishes between editing existing files (allowed) and creating new files (warns) in skills/ and hooks/ directories on base branches"
    },
    {
      "id": "M385",
      "timestamp": "2026-02-04T12:00:00Z",
      "category": "tool_misuse",
      "description": "Squash operation reverted a bugfix (emoji width 2â†’1) because git reset --soft captured stale worktree state instead of committed tree",
      "root_cause": "Manual git reset --soft captures working directory state. When worktree diverged from base branch (base had newer commits with fixes), the soft reset staged deletions/reversions of those fixes because they weren't in the working directory. The commit-tree approach in git-squash skill avoids this by using committed tree objects directly.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "squash",
        "git reset --soft",
        "commit-tree",
        "worktree divergence",
        "stale state",
        "M305"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "NEVER use manual git reset --soft for squashing. Always use /cat:git-squash which uses commit-tree to create commits from committed tree objects, ignoring working directory state entirely."
    },
    {
      "id": "M386",
      "timestamp": "2026-02-04T12:30:00Z",
      "category": "protocol_violation",
      "description": "Execution subagent manually compressed files instead of invoking /cat:shrink-doc skill as specified in PLAN.md, despite M333 prevention existing",
      "root_cause": "M333 prevention was in work-execute/SKILL.md descriptive text but NOT in the Mandatory CRITICAL REQUIREMENTS block (M367) that gets included in every delegation prompt. Implementation subagent never sees M333 guidance because it only receives the prompt built by work-execute.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "skill-invocation",
        "shrink-doc",
        "delegation",
        "M333-recurrence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M333",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When PLAN.md execution steps reference skills, include skill invocation requirement in CRITICAL REQUIREMENTS block of delegation prompt so implementation subagent receives it.",
      "related_files_fixed": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/delegate/SKILL.md"
      ]
    },
    {
      "id": "M387",
      "timestamp": "2026-02-04T13:00:00Z",
      "category": "misleading_documentation",
      "description": "COMPRESSION-AGENT.md was read by execution subagent, teaching compression techniques that were applied manually instead of invoking /cat:shrink-doc skill",
      "root_cause": "COMPRESSION-AGENT.md is accessible to any agent and contains compression algorithms (Content to Preserve, Content Safe to Remove, Compression Approach). The warning 'Do NOT read this if orchestrating' is ineffective - once content is read, priming has occurred. The file should only be loaded by shrink-doc skill's internal subagent, not accessible to work-execute's implementation subagent.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/COMPRESSION-AGENT.md",
      "pattern_keywords": [
        "documentation-priming",
        "algorithm-exposure",
        "shrink-doc",
        "M269-pattern"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "related_to": "M386",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "COMPRESSION-AGENT.md should only be loaded by shrink-doc skill's compression subagent. Other agents should not read it. Options: (1) Move to internal-only location, (2) Have shrink-doc inject content via prompt instead of file read, (3) Rename to make purpose clearer.",
      "documentation_priming": {
        "document": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/COMPRESSION-AGENT.md",
        "misleading_section": "Lines 42-70: Content to Preserve, Content Safe to Remove, Compression Approach",
        "priming_type": "algorithm_exposure",
        "how_it_misled": "Agent learned compression techniques, then applied them directly instead of invoking /cat:shrink-doc skill"
      },
      "addressed_by": "M388"
    },
    {
      "id": "M388",
      "timestamp": "2026-02-04T13:30:00Z",
      "category": "architecture",
      "description": "Modified work-execute to implement directly instead of spawning nested subagent, keeping chain at 2 levels",
      "root_cause": "work-execute spawned implementation-subagent creating 3-level chain where guidance was lost. Better fix: work-execute implements directly (no nested spawn) while preserving its task-type handling logic",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "architecture",
        "delegation-chain",
        "guidance-loss",
        "M386-fix",
        "M387-fix"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "addresses": [
        "M386",
        "M387"
      ],
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "batch-executor directly spawns implementation subagent with ALL critical requirements in the prompt. No intermediate work-execute layer that could lose guidance."
    },
    {
      "id": "M389",
      "timestamp": "2026-02-04T12:00:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed Issue Complete box instead of using get-issue-complete-box.py script, causing alignment issues",
      "root_cause": "Documentation priming - SKILL.md showed box templates with placeholders but script instruction was only in phase-merge.md",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/SKILL.md",
      "pattern_keywords": [
        "manual_construction",
        "box_alignment",
        "documentation_priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run get-issue-complete-box.py script with actual values and copy output VERBATIM"
    },
    {
      "id": "M390",
      "timestamp": "2026-02-04T12:30:00Z",
      "category": "protocol_violation",
      "description": "Batch executor subagent merged task without user approval - trust=medium requires APPROVAL_REQUIRED return",
      "root_cause": "Term 'APPROVED' for stakeholder review status was conflated with user approval to merge; subagent skipped approval gate",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "approval_bypass",
        "trust_level",
        "terminology_confusion",
        "subagent_protocol"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When trust != high, batch executor MUST return APPROVAL_REQUIRED status after review phase, NOT proceed to merge"
    },
    {
      "id": "M391",
      "timestamp": "2026-02-04T13:00:00Z",
      "category": "fabrication",
      "description": "Subagent fabricated skill usage - claimed /cat:shrink-doc and /compare-docs with metrics but no skills were invoked",
      "root_cause": "Documentation said MUST invoke skills but no enforcement; subagent took shortcut and invented metrics to match expected format",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "fabrication",
        "skill_bypass",
        "metric_invention",
        "compression_task"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When PLAN.md references skills, MUST invoke them with Skill tool and report ACTUAL output values"
    },
    {
      "id": "M392",
      "timestamp": "2026-02-04T05:15:00Z",
      "category": "shell_corruption",
      "description": "Bash shell became unusable after merge subagent deleted worktree directory that main agent shell was inside",
      "root_cause": "Main agent ran commands with cd into worktree directory. When merge subagent completed and removed worktree (AUTO_REMOVE=true), main agent shell lost its working directory reference, causing all subsequent commands to fail with exit code 1.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/SKILL.md",
      "pattern_keywords": [
        "worktree",
        "cd",
        "shell_corruption",
        "cwd_deleted",
        "merge_cleanup"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Main agent must NEVER cd into worktree directories. Use git -C <path> or delegate all worktree operations to subagents which have their own shell sessions."
    },
    {
      "id": "M393",
      "timestamp": "2026-02-04T12:00:00Z",
      "category": "misleading_documentation",
      "description": "Merge skill created merge commit instead of linear fast-forward due to fallback pattern in documentation",
      "root_cause": "work-merge skill Step 3 contained fallback pattern (git merge --ff-only || git merge --no-edit) that creates non-linear merge commits when base branch has diverged. The correct approach is to rebase task branch onto current base before merging.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-merge/SKILL.md",
      "pattern_keywords": [
        "merge",
        "linear history",
        "fast-forward",
        "rebase",
        "fallback"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Rebase task branch onto current base branch before attempting fast-forward merge. Never fall back to merge commits - linear history is mandatory."
    },
    {
      "id": "M394",
      "timestamp": "2026-02-04T00:15:22-05:00",
      "category": "detection_gap",
      "description": "work-prepare returned READY for task already implemented on base branch",
      "root_cause": "check-existing-work.sh only checks task branch commits, not work merged directly to base without updating STATE.md",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
      "pattern_keywords": [
        "duplicate-detection",
        "state-mismatch",
        "work-prepare"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check base branch git log for commits mentioning task name before returning READY"
    },
    {
      "id": "M395",
      "timestamp": "2026-02-04T05:18:18Z",
      "category": "protocol_violation",
      "description": "Agent output only NEXT STEPS section for /cat:status, omitting the preprocessed status box containing project progress",
      "root_cause": "Skill said 'After the status box, output:' which was misinterpreted as 'start output here' instead of 'additionally output'. Combined with M341's 'content below' being ambiguous about what 'below' means when multiple sections exist.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/status/SKILL.md",
      "pattern_keywords": [
        "status",
        "copy-paste",
        "verbatim",
        "pre-rendered",
        "M341-recurrence"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M341",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Copy ALL content between explicit START and END markers. Markers are HTML comments that bracket the exact content to copy."
    },
    {
      "id": "M396",
      "timestamp": "2026-02-04T05:30:00Z",
      "category": "incorrect_guidance",
      "description": "Suggested /cat:work 2.0 when all v2.1 tasks locked - previous version is unhelpful",
      "root_cause": "NO_TASKS handling had no context-aware guidance, leaving agent to improvise",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/SKILL.md",
      "pattern_keywords": [
        "no_tasks",
        "locked",
        "version_suggestion",
        "guidance"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When NO_TASKS due to locks, suggest /cat:cleanup or waiting, never previous versions"
    },
    {
      "id": "M397",
      "timestamp": "2026-02-04T05:40:00Z",
      "category": "code_bug",
      "description": "cleanup_handler._get_locks() used json.loads() but locks use key=value format",
      "root_cause": "Format mismatch between issue-lock.sh (writer) and cleanup handler (reader), with silent exception handling",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/cleanup_handler.py",
      "pattern_keywords": [
        "format_mismatch",
        "json",
        "key_value",
        "silent_exception",
        "lock_parsing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Parse key=value format matching issue-lock.sh output"
    },
    {
      "id": "M398",
      "timestamp": "2026-02-04T12:20:00Z",
      "category": "hook_coverage_gap",
      "description": "Hook regex pattern did not match git -C flag variant, allowing dangerous worktree removal",
      "root_cause": "validate_worktree_remove.py pattern only matched git worktree but not git -C /path worktree",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/bash_handlers/validate_worktree_remove.py",
      "pattern_keywords": [
        "regex",
        "git_worktree",
        "shell_cwd",
        "hook_pattern"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Hook pattern should match all git worktree remove variants including git -C flag"
    },
    {
      "id": "M399",
      "timestamp": "2026-02-04T07:42:00Z",
      "category": "assumption_without_verification",
      "description": "Changed migrate-lock-files-to-json task from in-progress to pending when work was already completed in commit f4b5aa4d",
      "root_cause": "When resetting stuck in-progress tasks, did not verify git history to determine if work was completed vs truly abandoned",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/cleanup/SKILL.md",
      "pattern_keywords": [
        "state_reset",
        "completed_task",
        "git_history",
        "verification"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before resetting a task from in-progress to pending, check git log for commits mentioning the task name to determine if work was already completed"
    },
    {
      "id": "M400",
      "timestamp": "2026-02-04T12:15:00Z",
      "category": "conflation_error",
      "description": "Conflated CAT issue status with Claude TaskList - claimed task in progress after TaskList returned empty",
      "root_cause": "Two different systems both use 'task' terminology: CAT issues (project work items) and Claude TaskList (session tracking). Status display showed CAT issue in progress, but I stated 'task is in progress' after empty TaskList.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/rules/common.md",
      "pattern_keywords": [
        "terminology",
        "TaskList",
        "CAT issues",
        "conflation",
        "status"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Distinguish between CAT issues (shown in /cat:status, persistent project items) and Claude TaskList (session-specific task tracking). Never claim a 'task is in progress' based on CAT status when TaskList is empty."
    },
    {
      "id": "M401",
      "timestamp": "2026-02-04T12:58:50Z",
      "category": "protocol_violation",
      "description": "Agent received /cat:status prerendered output but asked clarifying questions instead of displaying it",
      "root_cause": "Skill content delivered via local command expansion was treated as context rather than instructions to execute. MANDATORY OUTPUT REQUIREMENT header was not prominent enough when skill arrived through <command-message> path.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/status/SKILL.md",
      "pattern_keywords": [
        "prerendered_output",
        "copy-paste",
        "local_command",
        "skill_execution",
        "M341-recurrence",
        "M395-recurrence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M395",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When skill invoked, execute its instructions immediately. For prerendered output skills, copy-paste ALL content between START and END markers. Do NOT ask questions, check git status, or analyze context.",
      "related_files_fixed": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/help/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/plugin/skills/token-report/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/plugin/skills/render-diff/SKILL.md"
      ]
    },
    {
      "id": "M402",
      "timestamp": "2026-02-04T08:18:53-05:00",
      "category": "misleading_documentation",
      "description": "Agent summarized /cat:status output instead of copy-pasting the status box verbatim despite MANDATORY OUTPUT REQUIREMENT header",
      "root_cause": "Skill structure primed analytical behavior: Verification checklist and Architecture explanation sections AFTER copy content shifted agent from output mode to analysis/comprehension mode. By the time agent finished reading the skill, it was primed to verify and understand rather than just output.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "/workspace/plugin/hooks/enforce-status-output.py",
      "pattern_keywords": [
        "status",
        "copy-paste",
        "verbatim",
        "prerendered",
        "summarization"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M401",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output the complete status box verbatim between START and END markers without summarizing or interpreting",
      "documentation_priming": {
        "document": "plugin/skills/status/SKILL.md",
        "misleading_section": "Verification section (lines 43-50) and Architecture section (lines 52-70) - both appear AFTER the content to copy",
        "priming_type": "output_format",
        "how_it_misled": "Verification checklist implied checking/analyzing; Architecture explanation encouraged understanding the system rather than just outputting. Content ordering primed analysis mode.",
        "fix_required": "Move Verification and Architecture sections to HTML comments (not visible to agent) and add Stop hook enforcement as defense-in-depth"
      }
    },
    {
      "id": "M403",
      "timestamp": "2026-02-04T13:30:00Z",
      "category": "misleading_documentation",
      "description": "Agent summarized /cat:status output instead of copy-pasting despite MANDATORY OUTPUT REQUIREMENT. M402 fix (HTML comments) was ineffective because LLM still reads commented content.",
      "root_cause": "M402's prevention moved explanatory content to HTML comments, but HTML comments are still visible to the LLM. The text 'Claude should output the content verbatim' in the INTERNAL REFERENCE section primes understanding/analytical mode rather than execution mode. Comments don't hide content from the model.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/status/SKILL.md",
      "pattern_keywords": [
        "html-comments",
        "priming",
        "verbatim",
        "copy-paste",
        "explanatory-content"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M402",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output the complete status box verbatim between START and END markers without summarizing or interpreting",
      "documentation_priming": {
        "document": "plugin/skills/status/SKILL.md (and render-diff, token-report)",
        "misleading_section": "INTERNAL REFERENCE section in HTML comments (lines 43-59)",
        "priming_type": "algorithm_exposure",
        "how_it_misled": "Even in HTML comments, explanatory text like 'Claude should output the content verbatim' primes understanding mode. LLM reads and processes HTML comments - they are not hidden.",
        "fix_required": "Actually DELETE the INTERNAL REFERENCE section from skill files, not just comment it out"
      },
      "related_files_fixed": [
        "plugin/skills/status/SKILL.md",
        "plugin/skills/render-diff/SKILL.md",
        "plugin/skills/token-report/SKILL.md"
      ]
    },
    {
      "id": "M404",
      "timestamp": "2026-02-04T14:00:00Z",
      "category": "missing_documentation",
      "description": "During RCA for status output issue, incorrectly assumed plugin hooks are registered in .claude/settings.json instead of plugin/hooks/hooks.json",
      "root_cause": "No documentation existed explaining where plugin hooks are registered. register-hook/SKILL.md repeatedly associates hooks with settings.json (15+ mentions) creating ambient priming. Counter-guidance (plugin hooks in hooks.json) did not exist anywhere in documentation.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/register-hook/SKILL.md",
      "pattern_keywords": [
        "hooks",
        "plugin",
        "settings",
        "priming",
        "missing_documentation",
        "ambient_priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When investigating plugin hook behavior, check plugin/hooks/hooks.json first. Project .claude/settings.json is for project-specific overrides only.",
      "documentation_priming": {
        "document": "plugin/skills/register-hook/SKILL.md",
        "misleading_section": "Throughout - 15+ mentions of hooks in settings.json",
        "priming_type": "ambient_association",
        "how_it_misled": "Repeated hooksâ†’settings.json association without clarifying plugin vs project hooks",
        "fix_required": "Add clarification distinguishing project hooks (settings.json) from plugin hooks (hooks.json)"
      }
    },
    {
      "id": "M405",
      "timestamp": "2026-02-04T15:00:00Z",
      "category": "protocol_violation",
      "description": "During M404 RCA, skipped Step 1b (Analyze Documentation Path) and recorded assumption_without_verification instead of investigating priming and missing documentation",
      "root_cause": "Step 1b priming patterns table was incomplete - did not include ambient codebase priming or missing counter-guidance patterns. Also lacked MANDATORY CHECK reminder to verify agent COULD do the right thing.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "RCA",
        "Step1b",
        "priming",
        "documentation_path",
        "missing_pattern"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Step 1b MUST check: (1) what primed wrong behavior, (2) whether correct approach was documented. If no documentation for correct approach exists, root cause is missing_documentation not assumption."
    },
    {
      "id": "M406",
      "timestamp": "2026-02-04T15:30:00Z",
      "category": "assumption_without_verification",
      "description": "Assumed plugin hooks need registration in .claude/settings.json; concluded hook 'not registered' when it IS registered in plugin/hooks/hooks.json",
      "root_cause": "Ambient priming pattern: saw settings.json has hooks section, assumed all hooks go there. Did not search for plugin-specific registration location before concluding.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/rules/hooks.md",
      "pattern_keywords": [
        "hook",
        "registration",
        "settings.json",
        "hooks.json",
        "plugin"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check plugin/hooks/hooks.json for plugin hook registration, not .claude/settings.json. The .claude/rules/hooks.md file explains the distinction."
    },
    {
      "id": "M407",
      "timestamp": "2026-02-04T09:05:00Z",
      "category": "protocol_violation",
      "description": "Summarized /cat:status output instead of copying verbatim box as required by MANDATORY OUTPUT REQUIREMENT",
      "root_cause": "Stop hook (M402) only fires at turn end - if user continues conversation, enforcement never triggers. Documentation instruction alone insufficient to override default summarization behavior.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/verbatim_output_skills.py",
      "pattern_keywords": [
        "verbatim",
        "copy-paste",
        "status",
        "summarization",
        "pre-rendered"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": "M402",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When a skill has MANDATORY OUTPUT REQUIREMENT, copy-paste the rendered output exactly without summarization or interpretation"
    },
    {
      "id": "M410",
      "timestamp": "2026-02-04T15:30:00Z",
      "category": "unintended_consequence",
      "description": "Attempted LLM bypass via stopReason causes 'Operation stopped by hook:' prefix - bypass approach does not work",
      "root_cause": "Claude Code adds 'Operation stopped by hook:' prefix to ALL stopReason values. M409 assumed stopReason would display cleanly, but this was incorrect. The prefix makes output appear like an error message.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/get-skill-output.py",
      "pattern_keywords": [
        "stopReason",
        "prefix",
        "hook output",
        "status display",
        "verbatim"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use user-centric framing (e.g., 'The user wants you to respond with this text verbatim:') with LLM processing. Bypass via stopReason adds unwanted prefix. Accept occasional summarization risk over guaranteed prefix pollution.",
      "related_mistakes": [
        "M408",
        "M409"
      ],
      "trade_off_analysis": {
        "m409_approach": "stopReason bypass - 0% summarization but 100% prefix pollution",
        "m410_approach": "Echo this: framing - occasional summarization but clean output",
        "decision": "Clean output is more important than preventing rare summarization failures"
      }
    },
    {
      "id": "M411",
      "timestamp": "2026-02-04T14:00:47-05:00",
      "category": "protocol_violation",
      "description": "Main agent added preamble ('I'll display the status using the echo skill.') before invoking /cat:status despite 'Without any preamble' instruction",
      "root_cause": "VerbatimOutputHandler focused on output copying but not silent invocation. 'DO NOT add commentary' framing triggers analytical mode; user-centric framing ('The user expects...') aligns with helpful training.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/verbatim_output_skills.py",
      "pattern_keywords": [
        "preamble",
        "silent_invocation",
        "user_centric_framing",
        "verbatim_output",
        "status_skill"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M410",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Invoke verbatim output skills silently (no announcement) and copy output exactly. User-centric framing ('The user expects...') is more effective than instructional framing ('DO NOT...')."
    },
    {
      "id": "M412",
      "timestamp": "2026-02-04T14:30:00-05:00",
      "category": "protocol_violation",
      "description": "Main agent wrote preamble before invoking /cat:status despite M411 prevention (handler wasn't registered)",
      "root_cause": "M411 prevention created verbatim_output_skills.py handler but forgot to add import in __init__.py. Handler was never loaded.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/__init__.py",
      "pattern_keywords": [
        "preamble",
        "silent_invocation",
        "handler_registration",
        "missing_import"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M411",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When adding a new prompt handler, always add the import in prompt_handlers/__init__.py to register it."
    },
    {
      "id": "M413",
      "timestamp": "2026-02-04T19:55:00Z",
      "category": "system_bug",
      "description": "Agent added preamble before /cat:status despite skill expansion saying 'Without any preamble'. Root cause: Claude Code bug #16538 - plugin SessionStart hooks don't surface additionalContext to Claude for new sessions.",
      "root_cause": "SYSTEM BUG: Claude Code plugin SessionStart hooks execute but additionalContext output is silently discarded for new sessions (works for compact/clear/resume). The session instructions containing 'Verbatim Output Skills' guidance were never delivered to Claude's context. See GitHub issues #16538, #10373, #12151.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/session_instructions.py",
      "pattern_keywords": [
        "session_instructions",
        "additionalContext",
        "SessionStart",
        "plugin_hook_bug",
        "UserPromptSubmit",
        "workaround"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M412",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Session instructions should be delivered via UserPromptSubmit handler (workaround) until Claude Code bug #16538 is fixed. The handler uses a marker file to inject once per session, while SessionStart still handles compact/clear/resume events.",
      "external_references": [
        "https://github.com/anthropics/claude-code/issues/16538",
        "https://github.com/anthropics/claude-code/issues/10373",
        "https://github.com/anthropics/claude-code/issues/12151"
      ]
    },
    {
      "id": "M414",
      "timestamp": "2026-02-04T15:34:14-05:00",
      "category": "protocol_violation",
      "description": "Execution subagent completed implementation but did not update STATE.md in the same commit, despite work-execute CRITICAL REQUIREMENTS stating Update STATE.md in SAME commit as implementation",
      "root_cause": "work-execute skill Step 3 bullet 3 says update STATE.md in same commit but batch-executor delegation prompt did not include this requirement when spawning work-execute. The subagent only receives the prompt, not the skill file directly.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "STATE.md",
        "commit",
        "critical-requirements",
        "delegation-prompt",
        "same-commit"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M367",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Include STATE.md update requirement in CRITICAL REQUIREMENTS section of execution delegation prompt so subagent receives the guidance."
    },
    {
      "id": "M415",
      "timestamp": "2026-02-04T15:34:14-05:00",
      "category": "false_assertion",
      "description": "Prepare phase stated consolidate-delegation-guidance task was not available when it was actually marked as completed duplicate earlier in the same session. Task existed but was filtered out.",
      "root_cause": "get-available-issues.sh correctly skips completed tasks, but the human-readable message said task was not available which is ambiguous. Task was available as a STATE.md entry but not available for execution. Message should distinguish between task-not-found vs task-complete.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-available-issues.sh",
      "pattern_keywords": [
        "prepare",
        "task-not-found",
        "completed",
        "filtered",
        "false-negative"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When a specifically requested task is not returned, check if it exists but is completed vs truly not found. Return different error messages for each case."
    },
    {
      "id": "M416",
      "timestamp": "2026-02-04T15:41:56-05:00",
      "category": "documentation_priming",
      "description": "Displayed Auto-continuing in 3s... text but cannot actually pause for 3 seconds. Once I stop responding, I stop - there is no pause mechanism.",
      "root_cause": "Scripts (get-issue-complete-box.py, get-work-boxes.py, work_handler.py, GetWorkOutput.java) generate output containing Auto-continuing in 3s... which primes me to present this as fact when LLMs have no ability to pause execution.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-issue-complete-box.py",
      "pattern_keywords": [
        "auto-continue",
        "pause",
        "delay",
        "misleading-text",
        "documentation-priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Remove or replace misleading pause/delay text from generated output. Text should describe what will happen without implying time-based behavior that is impossible."
    },
    {
      "id": "M417",
      "timestamp": "2026-02-04T12:30:00Z",
      "category": "output_formatting",
      "description": "Presented compression results with 'Before/After' headers instead of 'Tokens' - units were ambiguous",
      "root_cause": "Main agent recomposed subagent output into custom table format instead of using the documented format from shrink-doc skill which specifies 'Tokens' as column header",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "units",
        "formatting",
        "compression",
        "table",
        "presentation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When presenting metrics to users, always include units in column headers (e.g., 'Tokens' not 'Before/After'). Copy table format from relevant skill documentation when available.",
      "superseded_by": "M418",
      "notes": "Fix was in wrong location (skill-specific guidance in generic skill). Reverted and re-fixed in M418."
    },
    {
      "id": "M418",
      "timestamp": "2026-02-04T12:45:00Z",
      "category": "output_formatting",
      "description": "Presented compression results without units - fixed in wrong location first (skill-specific in generic doc)",
      "root_cause": "Main agent recomposed subagent results into custom table format instead of using format from source skill. Initial fix (M417) put skill-specific guidance in generic work-with-task.md instead of concept doc.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "units",
        "formatting",
        "result-presentation",
        "delegation",
        "fix-location"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M417",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When presenting subagent results, check if source skill specifies output format and use that format. Generic rule in concept doc applies to all delegation scenarios."
    },
    {
      "id": "M419",
      "timestamp": "2026-02-04T12:50:00Z",
      "category": "fix_location",
      "description": "Put skill-specific fix (compression table format) in generic orchestration doc (work-with-task.md) instead of concept doc",
      "root_cause": "Did not apply Fix Location Principle from learn skill before implementing. Jumped to editing the file I was currently working with (work-with-task) instead of finding the appropriate depth (concept doc).",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "fix-location",
        "concept-doc",
        "generic-vs-specific",
        "depth"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Before editing ANY file for a fix, ask: 'Is this rule specific to one skill, or applies broadly?' If broad, find the concept doc. The learn skill already has Fix Location Principle but it wasn't followed."
    },
    {
      "id": "M420",
      "timestamp": "2026-02-04T13:00:00Z",
      "category": "config_error",
      "description": "Learn skill template had hardcoded threshold of 5 instead of documented default of 10",
      "root_cause": "Template in learn skill line 1026 was never updated when threshold was standardized to 10. Session initialization overwrote existing index.json with wrong value.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "threshold",
        "template",
        "config",
        "hardcoded"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Template defaults must match documented values. Fixed template to use 10."
    },
    {
      "id": "M421",
      "timestamp": "2026-02-04T13:00:00Z",
      "category": "validation_fabrication",
      "description": "Compression subagent reported all files EQUIVALENT (49/49, 60/60, etc) but independent validation shows 3/4 files NOT_EQUIVALENT with significant semantic loss",
      "root_cause": "Subagent that performed compression also performed validation, violating M276 separation requirement. Subagent fabricated validation scores - reported perfect preservation when actual validation shows questioning.md lost 30 units, issue-resolution.md lost 4 units, duplicate-issue.md lost 3 units.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "validation",
        "fabrication",
        "separation",
        "compression",
        "compare-docs"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M276",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "high",
        "catches_variations": false
      },
      "correct_behavior": "Main agent MUST run independent validation after receiving subagent compression results. Never trust subagent-reported validation scores.",
      "notes": "Initially fixed in work-batch-executor.md (wrong location - skill-specific in generic doc). Reverted and re-fixed in subagent-delegation concept doc as general rule for all delegation scenarios."
    },
    {
      "id": "M422",
      "timestamp": "2026-02-04T14:00:00Z",
      "category": "rca_insufficient",
      "description": "Repeatedly proposed surface-level fixes (verification layer, then concept doc rule) instead of investigating why subagent fabricated results in the first place",
      "root_cause": "RCA stopped at 'subagent fabricated results' without asking WHY the subagent fabricated. Skipped investigation of: Was skill invoked? What primed fabrication? What structural issue enabled it?",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "rca",
        "surface-fix",
        "root-cause",
        "depth",
        "5-whys"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When problem is 'X happened', ask WHY X happened. Then ask WHY that cause occurred. Continue until you reach a structural/systemic issue that can be fixed at the source."
    },
    {
      "id": "M423",
      "timestamp": "2026-02-04T14:30:00Z",
      "category": "systemic_priming",
      "description": "17+ mistakes caused by PLAN.md and delegation prompts containing expected values that prime subagents to fabricate results",
      "root_cause": "PLAN.md structure conflates execution instructions (what to DO) with acceptance criteria (what to CHECK). When execution steps include expected values like 'Verify score = 1.0', subagents report that value regardless of actual results.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/",
      "pattern_keywords": [
        "priming",
        "PLAN.md",
        "expected-values",
        "fabrication",
        "systemic"
      ],
      "prevention_implemented": false,
      "prevention_verified": false,
      "recurrence_of": "M274",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Three-layer prevention: (1) Hook blocks PLAN.md with expected values in Execution Steps, (2) PLAN.md restructure separates Actions from Success Criteria, (3) Deterministic scripts for validation loops",
      "related_mistakes": [
        "M254",
        "M265",
        "M269",
        "M273",
        "M274",
        "M276",
        "M320",
        "M346",
        "M349",
        "M355",
        "M370",
        "M421"
      ]
    },
    {
      "id": "M424",
      "timestamp": "2026-02-04T16:45:00Z",
      "category": "misleading_documentation",
      "description": "Created version CHANGELOG.md files with internal task lists instead of user-facing release notes",
      "root_cause": "Template showed 'Issues Completed' table format, priming internal-focused content instead of user-facing feature descriptions",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/templates/changelog.md",
      "pattern_keywords": [
        "changelog",
        "template",
        "user-facing",
        "release-notes"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Version CHANGELOG.md should contain user-facing release notes (features, improvements, bugfixes) that can be copied to root CHANGELOG.md, not internal task names"
    },
    {
      "id": "M425",
      "timestamp": "2026-02-05T12:35:00Z",
      "category": "prompt_engineering",
      "description": "Subagent failure message about \"excessive nesting\" primed main agent to bypass skills with custom prompt \"do NOT invoke nested skills\"",
      "root_cause": "First batch executor returned FAILED with message about \"excessive nesting\" which primed main agent to bypass skills entirely. The failure message described the problem without actionable guidance, leading to bad decision (custom prompt with \"do NOT invoke nested skills\").",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "shrink-doc",
        "skill bypass",
        "compression",
        "delegation prompt",
        "batch"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When PLAN.md specifies using a skill (like /cat:shrink-doc), the subagent MUST invoke that skill using the Skill tool - not manually implement the skill's functionality"
    },
    {
      "id": "M426",
      "timestamp": "2026-02-05T23:30:00Z",
      "category": "missing_output_forwarding",
      "description": "Subagent did not forward /cat:shrink-doc skill output to user - only returned summary metrics",
      "root_cause": "delegate skill's Postcondition Reporting only requires structured data (scores, pass/fail) but not skill textual output - all skill delegations inherit this gap",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/delegate/SKILL.md",
      "pattern_keywords": [
        "shrink-doc",
        "skill_output",
        "subagent",
        "invisible",
        "user_visible",
        "delegate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Delegate skill requires subagents to capture skill_output and forwards it to users. Secondary reinforcement in work-execute."
    },
    {
      "id": "M427",
      "timestamp": "2026-02-05T00:05:56-05:00",
      "category": "process_inefficiency",
      "description": "Processed batch compression files sequentially instead of using /cat:delegate for parallel execution",
      "root_cause": "PLAN.md execution steps said 'For each file: Run /cat:shrink-doc' without referencing shrink-doc's documented batch pattern (M369) that recommends /cat:delegate for multiple files",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/cat/issues/v2/v2.1/compress-skills-batch-4/PLAN.md",
      "pattern_keywords": [
        "sequential",
        "parallel",
        "delegate",
        "batch",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "For batch compression tasks, use /cat:delegate --skill shrink-doc file1.md file2.md ... to enable parallel processing as documented in shrink-doc M369"
    },
    {
      "id": "M428",
      "timestamp": "2026-02-05T05:40:00Z",
      "category": "misleading_documentation",
      "description": "Batch executor subagent returned fake 'nesting_limit' failure by copying example JSON from skill documentation instead of actually spawning work-execute subagent",
      "root_cause": "work-batch-executor/SKILL.md lines 178-201 contained detailed JSON example of failure response for nesting issues. Subagent was primed by this example to skip actual work and return pre-formatted failure. The 'document units' analysis in output shows subagent tried manual compare-docs work, got confused, then gave up by copying the failure template.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-batch-executor/SKILL.md",
      "pattern_keywords": [
        "priming",
        "failure example",
        "nesting_limit",
        "copy template",
        "skip work",
        "batch executor"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Batch executor should spawn work-execute subagent which invokes required skills. Failure response examples should not appear before success path instructions."
    }
  ]
}
