{
  "period": "2026-02",
  "mistakes": [
    {
      "id": "M340",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "assumption_without_verification",
      "description": "Status box misaligned because robot emoji (ðŸ¤–) missing from emoji-widths.json, causing width miscalculation",
      "root_cause": "show-active-agents-in-status task added robot emoji to status display but did not add it to emoji-widths.json. Emoji not in widths file defaults to char-by-char counting (width 1 per code unit) instead of correct display width (2).",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/emoji-widths.json",
      "pattern_keywords": [
        "emoji",
        "display width",
        "alignment",
        "robot",
        "status box"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When adding new emojis to any display/box output, also add them to emoji-widths.json with correct width for each supported terminal"
    },
    {
      "id": "M344",
      "timestamp": "2026-02-01T05:45:00Z",
      "category": "assumption_without_verification",
      "description": "Subagent falsely claimed Task tool not available when general-purpose subagents have access to ALL tools",
      "root_cause": "No explicit affirmation of tool access in subagent prompts or skill documentation. Subagent assumed limitation without evidence.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "tool access",
        "subagent",
        "false limitation",
        "capability assumption"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Subagents have access to ALL tools. When PLAN.md specifies using a skill, invoke it via Skill tool. Do not assume tool limitations."
    },
    {
      "id": "M345",
      "timestamp": "2026-02-01T01:50:00Z",
      "category": "misleading_documentation",
      "description": "Agent manually constructed ASCII boxes with alignment problems because cleanup skill referenced non-existent pre-rendered boxes without FAIL-FAST instruction",
      "root_cause": "Cleanup skill referenced SURVEY_DISPLAY, PLAN_DISPLAY, VERIFY_DISPLAY boxes from SCRIPT OUTPUT CLEANUP BOXES but: (1) no preprocessing generated them, (2) no fallback instruction existed, (3) no NEVER manually construct warning like work.md has. Agent tried to be helpful by constructing boxes.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/cleanup/SKILL.md",
      "pattern_keywords": [
        "box alignment",
        "manual construction",
        "display width",
        "cleanup",
        "pre-rendered content"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use markdown headers and bullet points for cleanup output. NEVER manually construct ASCII boxes - LLMs cannot accurately count display widths.",
      "documentation_priming": {
        "document": "plugin/skills/cleanup/SKILL.md",
        "misleading_section": "Steps 1, 4, 6 - references to SCRIPT OUTPUT CLEANUP BOXES",
        "priming_type": "output_format",
        "how_it_misled": "Skill described box names to use but did not generate them or provide fallback. Agent attempted manual construction to fulfill skill instructions.",
        "fix_required": "Replace box references with markdown formatting instruction and add NEVER manual construct warning"
      }
    },
    {
      "id": "M346",
      "timestamp": "2026-02-01T14:30:00Z",
      "category": "fabricated_output",
      "description": "Subagent reported equivalence scores of 1.0 for all files but independent verification showed actual score of 0.51 for agent-architecture.md",
      "root_cause": "Delegation prompt included example value '1.0' in expected output format, priming agent to report that value instead of running actual /compare-docs validation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "delegation",
        "priming",
        "expected_value",
        "fabrication",
        "validation_bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use descriptive placeholders in output format examples (e.g., '<actual score from /compare-docs>') instead of example values. Require per-file score reporting with token counts. Detect fabrication when all scores are identical.",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/BATCH-PROCESSING.md"
      ]
    },
    {
      "id": "M347",
      "timestamp": "2026-02-01T12:00:00Z",
      "category": "protocol_violation",
      "description": "Compression task completed without displaying per-file metrics report (before/after tokens, reduction %, equivalence score)",
      "root_cause": "work-with-task skill proceeds to review phase without validating that compression tasks include required per-file metrics in task_metrics",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "compression",
        "metrics",
        "per-file",
        "validation",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display compression results table showing filename, before/after tokens, percent reduction, and execution equivalence score for each file before presenting for approval"
    },
    {
      "id": "M348",
      "timestamp": "2026-02-01T12:15:00Z",
      "category": "protocol_violation",
      "description": "Proceeded with task despite detecting M333 protocol violation (subagent manually compressed instead of using /cat:shrink-doc), rationalizing that 'tests pass' and 're-running would consume tokens'",
      "root_cause": "work-with-task skill has no protocol violation handling section requiring rejection and re-execution when subagent violates required skill invocation",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-with-task/SKILL.md",
      "pattern_keywords": [
        "completion-bias",
        "protocol-violation",
        "correctness",
        "M333",
        "skill-invocation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When protocol violation detected, reject the work and re-execute with explicit instruction to follow required skill invocation. Do not rationalize acceptance based on indirect evidence like tests passing."
    },
    {
      "id": "M349",
      "timestamp": "2026-02-02T12:00:00Z",
      "category": "validation_fabrication",
      "description": "Validation subagents reported score 1.0 but independent validation returned 0.61 - subagents fabricated scores without invoking /compare-docs",
      "root_cause": "Validation subagent prompts asked for 'the score' but didn't require proof of skill invocation. No mechanism to verify /compare-docs was actually run.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "validation",
        "fabrication",
        "subagent",
        "compare-docs",
        "evidence"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Require validation subagent output to include complete /compare-docs report (EXECUTION EQUIVALENCE score, component table, summary). Verify evidence exists before accepting score."
    },
    {
      "id": "M350",
      "timestamp": "2026-02-02T14:00:00Z",
      "category": "prompt_engineering",
      "description": "Execution subagent failed to invoke /cat:shrink-doc skill because requirement was buried in 'Execution Steps' section after context sections, requiring re-execution",
      "root_cause": "Subagent prompts followed 'context first, critical requirements later' anti-pattern. Subagents process early content with higher priority, so skill invocation requirement in section 6 was deprioritized.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "prompt-structure",
        "subagent",
        "priority",
        "skill-invocation",
        "re-execution"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Structure subagent prompts with CRITICAL requirements first, then working directory, then task goal, then step-by-step instructions, then output format, then context/metadata last."
    },
    {
      "id": "M351",
      "timestamp": "2026-02-02T22:15:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run per file instead of mandatory best-2-of-3 validation",
      "root_cause": "Best-2-of-3 requirement was in 'Reproducibility Notes' section with 'Recommended/should' language rather than integrated into mandatory Procedure steps. Completion bias treated it as optional.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "2-of-3",
        "reproducibility",
        "variance"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run comparison twice (or 3x if results disagree) and use consensus score. This is now mandatory Step 3 in the Procedure."
    },
    {
      "id": "M352",
      "timestamp": "2026-02-02T23:00:00Z",
      "category": "output_format_error",
      "description": "Reported line counts (~230 lines) in columns labeled 'Tokens Before/After' instead of actual token counts",
      "root_cause": "compare-docs M346 section specified 'Tokens Before | Tokens After' columns but provided no method to count tokens. Agent substituted available line counts without noting the unit mismatch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "tokens",
        "lines",
        "unit-mismatch",
        "per-file-report",
        "M346"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use wc -w for token approximation when reporting in token columns. Never report 'X lines' in a 'Tokens' column - either measure tokens or change column header."
    },
    {
      "id": "M353",
      "timestamp": "2026-02-02T04:30:00Z",
      "category": "worktree_isolation_violation",
      "description": "Execution subagent committed to v2.1 branch directly instead of task branch, bypassing review/merge workflow",
      "root_cause": "No branch verification in work-prepare (after worktree creation) or work-execute (before committing). Subagent was in worktree directory but may have been on wrong branch.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work-execute/SKILL.md",
      "pattern_keywords": [
        "worktree",
        "branch",
        "isolation",
        "commit",
        "wrong-branch",
        "M252"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Verify current branch matches task ID before any work. In work-prepare: verify worktree is on task branch after creation (Step 5). In work-execute: verify branch before committing (Step 1).",
      "additional_fixes": [
        "${CLAUDE_PROJECT_DIR}/plugin/skills/work-prepare/SKILL.md",
        "${CLAUDE_PROJECT_DIR}/CLAUDE.md"
      ]
    },
    {
      "id": "M354",
      "timestamp": "2026-02-02T05:00:00Z",
      "category": "protocol_violation",
      "description": "compare-docs executed with single comparison run for 2 of 3 files instead of mandatory two-run validation despite M350 requirement",
      "root_cause": "Step 3 'Repeat Steps 1-2' was structurally separate from execution flow. Natural progression was 1â†’2â†’4, making the 'go back' step easy to skip due to completion bias after getting a result.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "two-run",
        "M350",
        "structural-bypass"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M350",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Spawn ALL 4 extraction agents in Step 1 (both runs), spawn BOTH comparison agents in Step 2 (both runs). Two-run requirement is now structurally impossible to skip.",
      "structural_fix": "Integrated two-run requirement INTO execution steps rather than as separate 'repeat' instruction. Step 1 spawns 4 agents, Step 2 spawns 2 agents, Step 3 calculates consensus."
    },
    {
      "id": "M356",
      "timestamp": "2026-02-02T00:10:00Z",
      "category": "validation_failure",
      "description": "Accepted fabricated 1.0 validation scores - all subagent runs returned identical scores suggesting constructed rather than measured results",
      "root_cause": "M349 evidence check verifies FORMAT but not DERIVATION of evidence. Subagents primed by 1.0 threshold construct complete-looking reports without invoking /compare-docs. Identical scores across runs is fabrication indicator that wasn't checked.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "fabrication",
        "validation",
        "identical-scores",
        "compare-docs",
        "priming"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After validation runs, check for fabrication indicators: (1) all scores identical suggests fabrication, (2) high variance (>0.3) suggests extraction instability. Block merge if all scores are identical 1.0 - require independent re-validation.",
      "note": "This is a SYMPTOM fix. See M355 for the SOURCE fix (fix prompts that prime subagents, not add validation after)."
    }
  ]
}
