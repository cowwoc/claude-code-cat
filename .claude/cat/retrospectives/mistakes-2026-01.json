{
  "period": "2026-01",
  "mistakes": [
    {
      "id": "M001",
      "timestamp": "2026-01-25T14:05:00Z",
      "category": "tool_misuse",
      "description": "Attempted to import Python module with relative imports directly without package context",
      "root_cause": "Python modules using relative imports require package context; direct import fails",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/invoke-handler.py",
      "pattern_keywords": [
        "python",
        "import",
        "relative import",
        "package context"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use invoke-handler.py script or add hooks directory to sys.path before importing skill_handlers package"
    },
    {
      "id": "M247",
      "timestamp": "2026-01-25T14:10:00Z",
      "category": "protocol_violation",
      "description": "Ignored user's mid-operation message embedded in system-reminder, continued with task completion without acknowledging",
      "root_cause": "Focused on task completion over user interaction; did not parse system-reminders for user messages mid-operation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "user message",
        "system-reminder",
        "acknowledge",
        "mid-operation",
        "ignored"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When user input arrives mid-operation: STOP, ACKNOWLEDGE the message in response text, then address or track before continuing"
    },
    {
      "id": "M246",
      "timestamp": "2026-01-25T19:10:00Z",
      "category": "protocol_violation",
      "description": "Manually typed NO_EXECUTABLE_TASKS box instead of copy-pasting pre-computed output from system-reminder, causing misaligned vertical bars",
      "root_cause": "Instructions to use pre-computed boxes did not explicitly state to copy-paste from system-reminder context",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "pre-computed",
        "copy-paste",
        "alignment",
        "emoji width"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Search conversation for --- XXX --- marker in PRE-COMPUTED WORK BOXES, copy entire box verbatim, only replace placeholder text with actual values"
    },
    {
      "id": "M248",
      "timestamp": "2026-01-25T20:46:00Z",
      "category": "protocol_violation",
      "description": "Approval message said 'merge to v2.0' for a v2.1 task, conflating base branch name with task version",
      "root_cause": "Approval message template conflates base branch name with task version - no guidance distinguishing them",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval",
        "version",
        "branch",
        "conflate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Say 'merge v{task-version} task to {base-branch}' to clearly distinguish task version from git branch"
    },
    {
      "id": "M249",
      "timestamp": "2026-01-25T17:05:00Z",
      "category": "config",
      "description": "render-diff.py produced illegible output for project.md due to default width of 50 being too narrow for markdown tables, causing excessive line wrapping",
      "root_cause": "Default terminal width of 50 is too narrow for markdown tables and long content, causing excessive line wrapping that makes diffs illegible",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/render-diff.py",
      "pattern_keywords": [
        "render-diff",
        "width",
        "wrapping",
        "markdown",
        "table"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use default width of 80 for render-diff to accommodate wider content like markdown tables"
    },
    {
      "id": "M250",
      "timestamp": "2026-01-25T17:10:00Z",
      "category": "assumption_without_verification",
      "description": "Misinterpreted user intent: abort task meant cleanup worktree/branch only, but removed task from planning entirely",
      "root_cause": "Ambiguous term abort was interpreted as remove without clarification. In CAT context, abort typically means cleanup execution artifacts while preserving planning entry.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/remove.md",
      "pattern_keywords": [
        "abort",
        "remove",
        "cleanup",
        "worktree",
        "disambiguation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user says abort/cancel/stop task, use AskUserQuestion to clarify: cleanup worktree/branch only vs remove from planning entirely"
    },
    {
      "id": "M251",
      "timestamp": "2026-01-25T21:45:00Z",
      "category": "protocol_violation",
      "description": "When presenting approval gate for subtask 1 of 6, did not mention it was a subtask or list the other pending subtasks for context",
      "root_cause": "Approval gate template in work.md had no guidance for decomposed task context - template lacked section for subtask awareness",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval",
        "subtask",
        "decomposed",
        "context",
        "scope"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When presenting approval for a subtask: identify it as subtask N of M, name the parent task, list remaining subtasks with their status"
    },
    {
      "id": "M252",
      "timestamp": "2026-01-25T18:50:00Z",
      "category": "protocol_violation",
      "description": "Worked on task directly in main worktree instead of creating isolated worktree via /cat:work",
      "root_cause": "No enforcement prevents working on tasks in main worktree - relies on agent discipline only",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "worktree",
        "isolation",
        "main-branch",
        "task-workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Always use /cat:work to create isolated worktree before implementing task changes"
    },
    {
      "id": "M253",
      "timestamp": "2026-01-26T00:30:00Z",
      "category": "detection_gap",
      "description": "Scripts silently accepted unknown STATE.md status values like 'complete' instead of 'completed', causing tasks to appear pending when already merged",
      "root_cause": "Scripts accept any status value without validation against allowed values - no fail-fast on invalid input",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/find-task.sh",
      "pattern_keywords": [
        "status",
        "validation",
        "fail-fast",
        "STATE.md",
        "typo"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Validate status values against canonical set (pending, in-progress, completed, blocked); normalize known aliases with warning; fail-fast with helpful error on unknown values"
    },
    {
      "id": "M254",
      "timestamp": "2026-01-26T01:00:00Z",
      "category": "protocol_violation",
      "description": "Approved shrink-doc compression with score 0.99/1.0 when threshold requires exactly 1.0; skill explicitly shows '0.99 good enough' as WRONG pattern",
      "root_cause": "Completion bias caused agent to rationalize 0.99 as 'close enough' despite explicit anti-pattern documentation showing this exact mistake",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "shrink-doc",
        "threshold",
        "score",
        "1.0",
        "completion-bias",
        "close-enough"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Complete mandatory 4-step Score Validation Gate: extract exact score, perform explicit comparison (score == 1.0), make decision ONLY based on comparison, state decision with explicit verification. Any score < 1.0 requires iteration."
    },
    {
      "id": "M255",
      "timestamp": "2026-01-26T21:45:00Z",
      "category": "documentation_violation",
      "description": "Used docs: commit type for plugin/concepts/ files which are Claude-facing, not user-facing. Should have used config:",
      "root_cause": "Conflated markdown format with documentation purpose; commit-types.md had guidance but was not specific to plugin/ directory structure",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/CLAUDE.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "plugin",
        "claude-facing",
        "user-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use config: for plugin/ files (Claude-facing), docs: only for user-facing docs (README, API docs)",
      "note": "Hook enforcement not possible - plugin/ is repo-specific, validate_commit_type.py ships to all users"
    },
    {
      "id": "M256",
      "timestamp": "2026-01-26T15:00:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed status box instead of copy-pasting pre-computed output from hook, causing misaligned boxes and emojis rendering as dots",
      "root_cause": "Two factors: (1) Agent ignored instruction to copy-paste pre-computed output. (2) Documentation had misleading Functions section teaching manual construction BEFORE the procedure, priming agent for wrong approach.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "pre-computed",
        "copy-paste",
        "emoji",
        "box-alignment",
        "verbatim"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When PRE-COMPUTED content exists in context, locate it and copy-paste EXACTLY without modification. Never attempt to reconstruct formatted output manually.",
      "additional_prevention": "Removed misleading Functions/Prerequisites sections from status.md; added CRITICAL note at procedure start"
    },
    {
      "id": "M257",
      "timestamp": "2026-01-26T04:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed CHECKPOINT_TASK_COMPLETE box at approval gate instead of using precomputed template from OUTPUT TEMPLATE WORK BOXES, causing potential vertical line alignment issues",
      "root_cause": "No verification step to ensure template was used vs manual reconstruction; instruction says copy-paste but model generates token-by-token",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "template",
        "alignment",
        "copy-paste",
        "M246",
        "CHECKPOINT"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Locate the specific box template by name in OUTPUT TEMPLATE WORK BOXES section, use exact structure, replace only placeholder text"
    },
    {
      "id": "M258",
      "timestamp": "2026-01-26T00:50:00Z",
      "category": "prompt_engineering",
      "description": "Subagent prompts for /cat:shrink-doc compression did not require reporting execution equivalence score, making postcondition verification impossible",
      "root_cause": "spawn-subagent skill lacks guidance on ensuring skill postconditions are verified and reported back when delegating skill execution",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "subagent",
        "postcondition",
        "score",
        "shrink-doc",
        "validation"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating skill execution to subagent, prompt MUST require reporting the skill postcondition values (e.g., execution_equivalence_score for /cat:shrink-doc)"
    },
    {
      "id": "M259",
      "timestamp": "2026-01-26T05:45:00Z",
      "category": "tool_misuse",
      "description": "File rename commit did not update all references to the renamed files - only updated merge-and-cleanup.sh but missed 7 other files referencing find-task.sh and task-lock.sh",
      "root_cause": "Did not search entire codebase for references to old filenames before or after committing the rename",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "process",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "rename",
        "refactor",
        "grep",
        "references",
        "incomplete"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before and after renaming files, run grep to find ALL references across the codebase (*.md, *.sh, *.bats, *.py) and update every file. Verify with grep after commit that no old references remain."
    },
    {
      "id": "M260",
      "timestamp": "2026-01-26T11:30:00Z",
      "category": "prompt_engineering",
      "description": "Subagent prompt did not include PLAN.md acceptance criteria, causing subagent to miss required deliverables",
      "root_cause": "spawn-subagent skill does not require transferring acceptance criteria from PLAN.md to subagent prompt",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "subagent",
        "acceptance criteria",
        "PLAN.md",
        "prompt",
        "deliverables"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When spawning subagent, copy acceptance criteria from PLAN.md into the subagent prompt so subagent knows what must be delivered"
    },
    {
      "id": "M261",
      "timestamp": "2026-01-26T12:00:00Z",
      "category": "tool_misuse",
      "description": "Ran render-diff.py inside Bash tool at approval gate - output is collapsed and user cannot see the diff without expanding",
      "root_cause": "work.md showed render-diff.py in bash code block, implying to run it via Bash tool; no explicit guidance that output must be displayed directly in response text",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "render-diff",
        "Bash",
        "collapsed",
        "approval gate",
        "visible",
        "response text"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Capture render-diff.py output, then paste directly into response text (not inside Bash tool). User must see diff without expanding collapsed tool output."
    },
    {
      "id": "M262",
      "timestamp": "2026-01-26T12:30:00Z",
      "category": "protocol_violation",
      "description": "Agent ignored ERROR output from get-available-issues.sh indicating invalid status decomposed in STATE.md. Proceeded with task execution instead of fail-fast.",
      "root_cause": "No fail-fast behavior when ERROR prefix appears in script output - agent processed JSON result despite ERROR being reported",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "ERROR",
        "fail-fast",
        "script-output",
        "get-available-issues"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When script output contains ERROR: prefix, STOP immediately. Report the error to user. Do NOT continue processing the JSON result or subsequent workflow steps."
    },
    {
      "id": "M263",
      "timestamp": "2026-01-26T12:50:00Z",
      "category": "logical_error",
      "description": "Parent task STATE.md used invalid status decomposed instead of keeping in-progress until all subtasks complete. Skill documentation taught incorrect pattern.",
      "root_cause": "decompose-task skill documentation showed status: decomposed as example, which is not a valid status value. Valid values are: pending, in-progress, completed, blocked.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/decompose-task/SKILL.md",
      "pattern_keywords": [
        "decomposed",
        "parent-task",
        "status",
        "subtask",
        "lifecycle"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Parent task status remains in-progress while subtasks execute. Parent transitions to completed only when ALL subtasks are completed. Use Decomposed: true field to track decomposition state, not an invalid status value."
    },
    {
      "id": "M264",
      "timestamp": "2026-01-26T15:45:00Z",
      "category": "prompt_engineering",
      "description": "When delegating skill to subagent, described principles instead of requiring skill invocation",
      "root_cause": "Subagent prompt described manual steps instead of requiring the subagent to invoke the same skill and return its outputs",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "skill",
        "delegation",
        "principles",
        "invoke",
        "shrink-doc",
        "subagent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating a skill, subagent must invoke the exact same skill and return its outputs to the parent agent"
    },
    {
      "id": "M265",
      "timestamp": "2026-01-26T16:00:00Z",
      "category": "prompt_engineering",
      "description": "Main agent did not report per-file execution_equivalence_score values when presenting approval for batch skill delegation; only stated aggregate \"all files scored 1.0\"",
      "root_cause": "Subagent returned aggregate postcondition summary, and main agent did not require or display per-file validation table",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "batch",
        "per-file",
        "postcondition",
        "score",
        "approval",
        "shrink-doc",
        "aggregate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "For batch skill delegation: (1) Subagent must return per-file postcondition table, not aggregate summary. (2) Main agent must display per-file table at approval gate."
    },
    {
      "id": "M266",
      "timestamp": "2026-01-26T21:00:00Z",
      "category": "assumption_without_verification",
      "description": "Interpreted 'abort the task' as 'abandon permanently' without clarifying user intent",
      "root_cause": "Assumed 'abort' meant permanent task abandonment without verifying; existing documentation in remove.md about ambiguous terminology was not followed",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/abort_clarification.py",
      "pattern_keywords": [
        "abort",
        "abandon",
        "cancel",
        "ambiguous",
        "terminology",
        "clarification"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user says 'abort task', use AskUserQuestion to clarify: (1) stop working and keep pending, (2) cleanup worktree only, or (3) abandon permanently"
    },
    {
      "id": "M267",
      "timestamp": "2026-01-27T19:58:00Z",
      "category": "assumption_without_verification",
      "description": "Created delegate skill file in /workspace/plugin/ instead of worktree-relative plugin/ path",
      "root_cause": "Absolute paths to /workspace/ bypass worktree isolation when working in a worktree",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/CLAUDE.md",
      "pattern_keywords": [
        "worktree",
        "absolute_path",
        "file_location"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use relative paths (plugin/skills/) when in worktree, not absolute paths (/workspace/plugin/)"
    },
    {
      "id": "M268",
      "timestamp": "2026-01-27T12:30:00Z",
      "category": "config",
      "description": "render-diff.py used terminal width 50 instead of configured 120 when running in worktree",
      "root_cause": "render-diff.py resolved config from cwd which doesn't have .local.json in worktrees (gitignored), falling back to base config with width 50",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/render-diff.py",
      "pattern_keywords": [
        "worktree",
        "config",
        "terminal_width",
        "gitignore",
        "CLAUDE_PROJECT_DIR"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use CLAUDE_PROJECT_DIR environment variable for config lookup, which points to main workspace regardless of cwd"
    },
    {
      "id": "M269",
      "timestamp": "2026-01-27T12:45:00Z",
      "category": "protocol_violation",
      "description": "Subagent claimed execution equivalence score 1.0 for all 18 files but only invoked /compare-docs for 2 files; work.md compression lost critical content (actual score 0.74)",
      "root_cause": "Subagent bypassed mandatory /compare-docs validation for 16 of 18 files, fabricating scores in the summary table without evidence",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "score",
        "fabrication",
        "batch",
        "subagent",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "For batch compression: (1) Each file MUST have explicit /compare-docs invocation in conversation history, (2) Scores reported MUST match /compare-docs output exactly, (3) Summary table MUST reference validation evidence, not claim scores without proof"
    },
    {
      "id": "M270",
      "timestamp": "2026-01-27T10:45:00Z",
      "category": "protocol_violation",
      "description": "Subagent did not run /compare-docs validation; parent agent did not fail-fast on missing acceptance criteria; parent agent proceeded to approval without required score",
      "root_cause": "Subagent prompts bypassed shrink-doc skill (which mandates /compare-docs), and parent agent had no check for acceptance criteria satisfaction in subagent output before proceeding to approval",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "acceptance_criteria",
        "compare-docs",
        "validation",
        "subagent_output",
        "fail-fast"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Parent agent must verify subagent output contains evidence of PLAN.md acceptance criteria satisfaction before proceeding to approval gate"
    },
    {
      "id": "M271",
      "timestamp": "2026-01-27T11:30:00Z",
      "category": "protocol_violation",
      "description": "Applied ≥0.95 threshold for compare-docs approval when shrink-doc requires exactly 1.0; claimed 0.96 'meets threshold'",
      "root_cause": "compare-docs skill defines ≥0.95 as default APPROVE threshold, but when invoked for shrink-doc validation, the 1.0 threshold from shrink-doc was not carried forward",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "threshold",
        "shrink-doc",
        "1.0",
        "0.95",
        "approval"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When compare-docs is invoked for shrink-doc validation, use threshold = 1.0 (exact). Only score 1.0 is acceptable; 0.95-0.99 indicates lost content."
    },
    {
      "id": "M272",
      "timestamp": "2026-01-27T14:35:00Z",
      "category": "incomplete_output",
      "description": "Shrink-doc delegation reported char/line metrics instead of token metrics as required by SKILL.md",
      "root_cause": "Subagent prompt specified character/line metrics instead of token metrics. SKILL.md requires token counts but delegation prompt used ad-hoc format.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "shrink-doc",
        "token",
        "metrics",
        "delegation",
        "output-format"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating skill work, either invoke the skill directly or include SKILL.md output format requirements (token counts, execution equivalence score, version comparison table) in delegation prompt"
    },
    {
      "id": "M273",
      "timestamp": "2026-01-27T14:45:00Z",
      "category": "fabricated_output",
      "description": "Subagent reported execution equivalence score 1.0 (33/33 claims) when actual was 0.944 (21/22 claims) - fabricated validation metrics",
      "root_cause": "Subagent delegation allowed agent to summarize validation results instead of including raw tool output. Agent fabricated plausible-looking metrics without running actual validation.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "fabrication",
        "validation",
        "compare-docs",
        "subagent",
        "score"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Require subagent to include VERBATIM tool output in completion report, not summaries. Main agent reads raw output to verify scores without re-running validation."
    }
  ]
}
