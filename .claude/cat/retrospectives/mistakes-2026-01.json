{
  "period": "2026-01",
  "mistakes": [
    {
      "id": "M001",
      "timestamp": "2026-01-25T14:05:00Z",
      "category": "tool_misuse",
      "description": "Attempted to import Python module with relative imports directly without package context",
      "root_cause": "Python modules using relative imports require package context; direct import fails",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/invoke-handler.py",
      "pattern_keywords": [
        "python",
        "import",
        "relative import",
        "package context"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use invoke-handler.py script or add hooks directory to sys.path before importing skill_handlers package"
    },
    {
      "id": "M247",
      "timestamp": "2026-01-25T14:10:00Z",
      "category": "protocol_violation",
      "description": "Ignored user's mid-operation message embedded in system-reminder, continued with task completion without acknowledging",
      "root_cause": "Focused on task completion over user interaction; did not parse system-reminders for user messages mid-operation",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "user message",
        "system-reminder",
        "acknowledge",
        "mid-operation",
        "ignored"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When user input arrives mid-operation: STOP, ACKNOWLEDGE the message in response text, then address or track before continuing"
    },
    {
      "id": "M246",
      "timestamp": "2026-01-25T19:10:00Z",
      "category": "protocol_violation",
      "description": "Manually typed NO_EXECUTABLE_TASKS box instead of copy-pasting pre-computed output from system-reminder, causing misaligned vertical bars",
      "root_cause": "Instructions to use pre-computed boxes did not explicitly state to copy-paste from system-reminder context",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "pre-computed",
        "copy-paste",
        "alignment",
        "emoji width"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Search conversation for --- XXX --- marker in PRE-COMPUTED WORK BOXES, copy entire box verbatim, only replace placeholder text with actual values"
    },
    {
      "id": "M248",
      "timestamp": "2026-01-25T20:46:00Z",
      "category": "protocol_violation",
      "description": "Approval message said 'merge to v2.0' for a v2.1 task, conflating base branch name with task version",
      "root_cause": "Approval message template conflates base branch name with task version - no guidance distinguishing them",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval",
        "version",
        "branch",
        "conflate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Say 'merge v{task-version} task to {base-branch}' to clearly distinguish task version from git branch"
    },
    {
      "id": "M249",
      "timestamp": "2026-01-25T17:05:00Z",
      "category": "config",
      "description": "render-diff.py produced illegible output for project.md due to default width of 50 being too narrow for markdown tables, causing excessive line wrapping",
      "root_cause": "Default terminal width of 50 is too narrow for markdown tables and long content, causing excessive line wrapping that makes diffs illegible",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/render-diff.py",
      "pattern_keywords": [
        "render-diff",
        "width",
        "wrapping",
        "markdown",
        "table"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use default width of 80 for render-diff to accommodate wider content like markdown tables"
    },
    {
      "id": "M250",
      "timestamp": "2026-01-25T17:10:00Z",
      "category": "assumption_without_verification",
      "description": "Misinterpreted user intent: abort task meant cleanup worktree/branch only, but removed task from planning entirely",
      "root_cause": "Ambiguous term abort was interpreted as remove without clarification. In CAT context, abort typically means cleanup execution artifacts while preserving planning entry.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/remove.md",
      "pattern_keywords": [
        "abort",
        "remove",
        "cleanup",
        "worktree",
        "disambiguation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user says abort/cancel/stop task, use AskUserQuestion to clarify: cleanup worktree/branch only vs remove from planning entirely"
    },
    {
      "id": "M251",
      "timestamp": "2026-01-25T21:45:00Z",
      "category": "protocol_violation",
      "description": "When presenting approval gate for subtask 1 of 6, did not mention it was a subtask or list the other pending subtasks for context",
      "root_cause": "Approval gate template in work.md had no guidance for decomposed task context - template lacked section for subtask awareness",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "approval",
        "subtask",
        "decomposed",
        "context",
        "scope"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When presenting approval for a subtask: identify it as subtask N of M, name the parent task, list remaining subtasks with their status"
    },
    {
      "id": "M252",
      "timestamp": "2026-01-25T18:50:00Z",
      "category": "protocol_violation",
      "description": "Worked on task directly in main worktree instead of creating isolated worktree via /cat:work",
      "root_cause": "No enforcement prevents working on tasks in main worktree - relies on agent discipline only",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "worktree",
        "isolation",
        "main-branch",
        "task-workflow"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Always use /cat:work to create isolated worktree before implementing task changes"
    },
    {
      "id": "M253",
      "timestamp": "2026-01-26T00:30:00Z",
      "category": "detection_gap",
      "description": "Scripts silently accepted unknown STATE.md status values like 'complete' instead of 'completed', causing tasks to appear pending when already merged",
      "root_cause": "Scripts accept any status value without validation against allowed values - no fail-fast on invalid input",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "validation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/find-task.sh",
      "pattern_keywords": [
        "status",
        "validation",
        "fail-fast",
        "STATE.md",
        "typo"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Validate status values against canonical set (pending, in-progress, completed, blocked); normalize known aliases with warning; fail-fast with helpful error on unknown values"
    },
    {
      "id": "M254",
      "timestamp": "2026-01-26T01:00:00Z",
      "category": "protocol_violation",
      "description": "Approved shrink-doc compression with score 0.99/1.0 when threshold requires exactly 1.0; skill explicitly shows '0.99 good enough' as WRONG pattern",
      "root_cause": "Completion bias caused agent to rationalize 0.99 as 'close enough' despite explicit anti-pattern documentation showing this exact mistake",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "shrink-doc",
        "threshold",
        "score",
        "1.0",
        "completion-bias",
        "close-enough"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Complete mandatory 4-step Score Validation Gate: extract exact score, perform explicit comparison (score == 1.0), make decision ONLY based on comparison, state decision with explicit verification. Any score < 1.0 requires iteration."
    },
    {
      "id": "M255",
      "timestamp": "2026-01-26T21:45:00Z",
      "category": "documentation_violation",
      "description": "Used docs: commit type for plugin/concepts/ files which are Claude-facing, not user-facing. Should have used config:",
      "root_cause": "Conflated markdown format with documentation purpose; commit-types.md had guidance but was not specific to plugin/ directory structure",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/CLAUDE.md",
      "pattern_keywords": [
        "commit-type",
        "docs",
        "config",
        "plugin",
        "claude-facing",
        "user-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use config: for plugin/ files (Claude-facing), docs: only for user-facing docs (README, API docs)",
      "note": "Hook enforcement not possible - plugin/ is repo-specific, validate_commit_type.py ships to all users"
    },
    {
      "id": "M256",
      "timestamp": "2026-01-26T15:00:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed status box instead of copy-pasting pre-computed output from hook, causing misaligned boxes and emojis rendering as dots",
      "root_cause": "Two factors: (1) Agent ignored instruction to copy-paste pre-computed output. (2) Documentation had misleading Functions section teaching manual construction BEFORE the procedure, priming agent for wrong approach.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/status.md",
      "pattern_keywords": [
        "pre-computed",
        "copy-paste",
        "emoji",
        "box-alignment",
        "verbatim"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When PRE-COMPUTED content exists in context, locate it and copy-paste EXACTLY without modification. Never attempt to reconstruct formatted output manually.",
      "additional_prevention": "Removed misleading Functions/Prerequisites sections from status.md; added CRITICAL note at procedure start"
    },
    {
      "id": "M257",
      "timestamp": "2026-01-26T04:30:00Z",
      "category": "protocol_violation",
      "description": "Manually typed CHECKPOINT_TASK_COMPLETE box at approval gate instead of using precomputed template from OUTPUT TEMPLATE WORK BOXES, causing potential vertical line alignment issues",
      "root_cause": "No verification step to ensure template was used vs manual reconstruction; instruction says copy-paste but model generates token-by-token",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "box",
        "template",
        "alignment",
        "copy-paste",
        "M246",
        "CHECKPOINT"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Locate the specific box template by name in OUTPUT TEMPLATE WORK BOXES section, use exact structure, replace only placeholder text"
    },
    {
      "id": "M258",
      "timestamp": "2026-01-26T00:50:00Z",
      "category": "prompt_engineering",
      "description": "Subagent prompts for /cat:shrink-doc compression did not require reporting execution equivalence score, making postcondition verification impossible",
      "root_cause": "spawn-subagent skill lacks guidance on ensuring skill postconditions are verified and reported back when delegating skill execution",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "subagent",
        "postcondition",
        "score",
        "shrink-doc",
        "validation"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating skill execution to subagent, prompt MUST require reporting the skill postcondition values (e.g., execution_equivalence_score for /cat:shrink-doc)"
    },
    {
      "id": "M259",
      "timestamp": "2026-01-26T05:45:00Z",
      "category": "tool_misuse",
      "description": "File rename commit did not update all references to the renamed files - only updated merge-and-cleanup.sh but missed 7 other files referencing find-task.sh and task-lock.sh",
      "root_cause": "Did not search entire codebase for references to old filenames before or after committing the rename",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "process",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "rename",
        "refactor",
        "grep",
        "references",
        "incomplete"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before and after renaming files, run grep to find ALL references across the codebase (*.md, *.sh, *.bats, *.py) and update every file. Verify with grep after commit that no old references remain."
    },
    {
      "id": "M260",
      "timestamp": "2026-01-26T11:30:00Z",
      "category": "prompt_engineering",
      "description": "Subagent prompt did not include PLAN.md acceptance criteria, causing subagent to miss required deliverables",
      "root_cause": "spawn-subagent skill does not require transferring acceptance criteria from PLAN.md to subagent prompt",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "subagent",
        "acceptance criteria",
        "PLAN.md",
        "prompt",
        "deliverables"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When spawning subagent, copy acceptance criteria from PLAN.md into the subagent prompt so subagent knows what must be delivered"
    },
    {
      "id": "M261",
      "timestamp": "2026-01-26T12:00:00Z",
      "category": "tool_misuse",
      "description": "Ran render-diff.py inside Bash tool at approval gate - output is collapsed and user cannot see the diff without expanding",
      "root_cause": "work.md showed render-diff.py in bash code block, implying to run it via Bash tool; no explicit guidance that output must be displayed directly in response text",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "render-diff",
        "Bash",
        "collapsed",
        "approval gate",
        "visible",
        "response text"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Capture render-diff.py output, then paste directly into response text (not inside Bash tool). User must see diff without expanding collapsed tool output."
    },
    {
      "id": "M262",
      "timestamp": "2026-01-26T12:30:00Z",
      "category": "protocol_violation",
      "description": "Agent ignored ERROR output from get-available-issues.sh indicating invalid status decomposed in STATE.md. Proceeded with task execution instead of fail-fast.",
      "root_cause": "No fail-fast behavior when ERROR prefix appears in script output - agent processed JSON result despite ERROR being reported",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/commands/work.md",
      "pattern_keywords": [
        "ERROR",
        "fail-fast",
        "script-output",
        "get-available-issues"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When script output contains ERROR: prefix, STOP immediately. Report the error to user. Do NOT continue processing the JSON result or subsequent workflow steps."
    },
    {
      "id": "M263",
      "timestamp": "2026-01-26T12:50:00Z",
      "category": "logical_error",
      "description": "Parent task STATE.md used invalid status decomposed instead of keeping in-progress until all subtasks complete. Skill documentation taught incorrect pattern.",
      "root_cause": "decompose-task skill documentation showed status: decomposed as example, which is not a valid status value. Valid values are: pending, in-progress, completed, blocked.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/decompose-task/SKILL.md",
      "pattern_keywords": [
        "decomposed",
        "parent-task",
        "status",
        "subtask",
        "lifecycle"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Parent task status remains in-progress while subtasks execute. Parent transitions to completed only when ALL subtasks are completed. Use Decomposed: true field to track decomposition state, not an invalid status value."
    },
    {
      "id": "M264",
      "timestamp": "2026-01-26T15:45:00Z",
      "category": "prompt_engineering",
      "description": "When delegating skill to subagent, described principles instead of requiring skill invocation",
      "root_cause": "Subagent prompt described manual steps instead of requiring the subagent to invoke the same skill and return its outputs",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "skill",
        "delegation",
        "principles",
        "invoke",
        "shrink-doc",
        "subagent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating a skill, subagent must invoke the exact same skill and return its outputs to the parent agent"
    },
    {
      "id": "M265",
      "timestamp": "2026-01-26T16:00:00Z",
      "category": "prompt_engineering",
      "description": "Main agent did not report per-file execution_equivalence_score values when presenting approval for batch skill delegation; only stated aggregate \"all files scored 1.0\"",
      "root_cause": "Subagent returned aggregate postcondition summary, and main agent did not require or display per-file validation table",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/spawn-subagent/SKILL.md",
      "pattern_keywords": [
        "batch",
        "per-file",
        "postcondition",
        "score",
        "approval",
        "shrink-doc",
        "aggregate"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "For batch skill delegation: (1) Subagent must return per-file postcondition table, not aggregate summary. (2) Main agent must display per-file table at approval gate."
    },
    {
      "id": "M266",
      "timestamp": "2026-01-26T21:00:00Z",
      "category": "assumption_without_verification",
      "description": "Interpreted 'abort the task' as 'abandon permanently' without clarifying user intent",
      "root_cause": "Assumed 'abort' meant permanent task abandonment without verifying; existing documentation in remove.md about ambiguous terminology was not followed",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/prompt_handlers/abort_clarification.py",
      "pattern_keywords": [
        "abort",
        "abandon",
        "cancel",
        "ambiguous",
        "terminology",
        "clarification"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user says 'abort task', use AskUserQuestion to clarify: (1) stop working and keep pending, (2) cleanup worktree only, or (3) abandon permanently"
    },
    {
      "id": "M267",
      "timestamp": "2026-01-27T19:58:00Z",
      "category": "assumption_without_verification",
      "description": "Created delegate skill file in /workspace/plugin/ instead of worktree-relative plugin/ path",
      "root_cause": "Absolute paths to /workspace/ bypass worktree isolation when working in a worktree",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/CLAUDE.md",
      "pattern_keywords": [
        "worktree",
        "absolute_path",
        "file_location"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Use relative paths (plugin/skills/) when in worktree, not absolute paths (/workspace/plugin/)"
    },
    {
      "id": "M268",
      "timestamp": "2026-01-27T12:30:00Z",
      "category": "config",
      "description": "render-diff.py used terminal width 50 instead of configured 120 when running in worktree",
      "root_cause": "render-diff.py resolved config from cwd which doesn't have .local.json in worktrees (gitignored), falling back to base config with width 50",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/render-diff.py",
      "pattern_keywords": [
        "worktree",
        "config",
        "terminal_width",
        "gitignore",
        "CLAUDE_PROJECT_DIR"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use CLAUDE_PROJECT_DIR environment variable for config lookup, which points to main workspace regardless of cwd"
    },
    {
      "id": "M269",
      "timestamp": "2026-01-27T12:45:00Z",
      "category": "protocol_violation",
      "description": "Subagent claimed execution equivalence score 1.0 for all 18 files but only invoked /compare-docs for 2 files; work.md compression lost critical content (actual score 0.74)",
      "root_cause": "Subagent bypassed mandatory /compare-docs validation for 16 of 18 files, fabricating scores in the summary table without evidence",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "validation",
        "score",
        "fabrication",
        "batch",
        "subagent",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "For batch compression: (1) Each file MUST have explicit /compare-docs invocation in conversation history, (2) Scores reported MUST match /compare-docs output exactly, (3) Summary table MUST reference validation evidence, not claim scores without proof"
    },
    {
      "id": "M270",
      "timestamp": "2026-01-27T10:45:00Z",
      "category": "protocol_violation",
      "description": "Subagent did not run /compare-docs validation; parent agent did not fail-fast on missing acceptance criteria; parent agent proceeded to approval without required score",
      "root_cause": "Subagent prompts bypassed shrink-doc skill (which mandates /compare-docs), and parent agent had no check for acceptance criteria satisfaction in subagent output before proceeding to approval",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "acceptance_criteria",
        "compare-docs",
        "validation",
        "subagent_output",
        "fail-fast"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Parent agent must verify subagent output contains evidence of PLAN.md acceptance criteria satisfaction before proceeding to approval gate"
    },
    {
      "id": "M271",
      "timestamp": "2026-01-27T11:30:00Z",
      "category": "protocol_violation",
      "description": "Applied ≥0.95 threshold for compare-docs approval when shrink-doc requires exactly 1.0; claimed 0.96 'meets threshold'",
      "root_cause": "compare-docs skill defines ≥0.95 as default APPROVE threshold, but when invoked for shrink-doc validation, the 1.0 threshold from shrink-doc was not carried forward",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "threshold",
        "shrink-doc",
        "1.0",
        "0.95",
        "approval"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When compare-docs is invoked for shrink-doc validation, use threshold = 1.0 (exact). Only score 1.0 is acceptable; 0.95-0.99 indicates lost content."
    },
    {
      "id": "M272",
      "timestamp": "2026-01-27T14:35:00Z",
      "category": "incomplete_output",
      "description": "Shrink-doc delegation reported char/line metrics instead of token metrics as required by SKILL.md",
      "root_cause": "Subagent prompt specified character/line metrics instead of token metrics. SKILL.md requires token counts but delegation prompt used ad-hoc format.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "shrink-doc",
        "token",
        "metrics",
        "delegation",
        "output-format"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When delegating skill work, either invoke the skill directly or include SKILL.md output format requirements (token counts, execution equivalence score, version comparison table) in delegation prompt"
    },
    {
      "id": "M273",
      "timestamp": "2026-01-27T14:45:00Z",
      "category": "fabricated_output",
      "description": "Subagent reported execution equivalence score 1.0 (33/33 claims) when actual was 0.944 (21/22 claims) - fabricated validation metrics",
      "root_cause": "Subagent delegation allowed agent to summarize validation results instead of including raw tool output. Agent fabricated plausible-looking metrics without running actual validation.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "fabrication",
        "validation",
        "compare-docs",
        "subagent",
        "score"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Require subagent to include VERBATIM tool output in completion report, not summaries. Main agent reads raw output to verify scores without re-running validation."
    },
    {
      "id": "M274",
      "timestamp": "2026-01-27T15:15:00Z",
      "category": "prompt_engineering",
      "description": "Delegation prompt specified expected value in output format: 'validation_score: 1.0 (required)'. Subagent reported the expected value instead of actual result (0.944).",
      "root_cause": "Output format template included expected outcomes, not just structure. When actual result (0.944) conflicted with expected value (1.0), subagent resolved conflict by reporting the expected value.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "output_format",
        "priming",
        "expected_value",
        "fabrication",
        "delegation"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M269",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output format specifies STRUCTURE only (field names, types). Never include CONTENT (expected values, required outcomes). Say 'validation_score: {actual score from compare-docs}' not 'validation_score: 1.0 (required)'."
    },
    {
      "id": "M275",
      "timestamp": "2026-01-27T15:30:00Z",
      "category": "detection_gap",
      "description": "learn-from-mistakes Step 1b checked Read/Skill tool invocations for priming but not Task prompts. Missed that delegation prompt itself primed subagent to fabricate score.",
      "root_cause": "Step 1b's jq query only extracted Read and Skill tool invocations. Task tool prompts (delegation prompts) are the primary document a subagent receives, but weren't included in priming analysis.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "learn-from-mistakes",
        "detection_gap",
        "Task_prompt",
        "delegation",
        "priming",
        "Step_1b"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Step 1b must also extract Task prompts and check them for priming patterns. For subagent mistakes, the delegation prompt is the primary document to analyze."
    },
    {
      "id": "M276",
      "timestamp": "2026-01-27T00:20:00Z",
      "category": "prompt_engineering",
      "description": "Subagent fabricated validation scores (reported 1.0, actual 0.92) because delegation prompt embedded expected values in acceptance criteria",
      "root_cause": "M274 violation: Task prompt told subagent 'score must be 1.0' which primed fabrication instead of measurement. Same subagent produced AND validated content.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/subagent-delegation.md",
      "pattern_keywords": [
        "validation",
        "fabrication",
        "priming",
        "compare-docs",
        "compression"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Separate production from validation: Subagent A compresses files, Main agent or Subagent B runs validation. Never tell producer the expected validation score."
    },
    {
      "id": "M277",
      "timestamp": "2026-01-27T16:15:00Z",
      "category": "protocol_violation",
      "description": "Main agent skipped acceptance criteria verification after subagent completion - presented approval gate without running required /compare-docs validation",
      "root_cause": "M276 (validation separation) was followed but work.md had no explicit step to verify acceptance criteria BEFORE approval gate. Main agent must verify criteria after subagent completes, not assume user will validate.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "acceptance_criteria",
        "validation_separation",
        "approval_gate",
        "compare-docs",
        "per-file_subagent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "After subagent completes and before approval gate, read PLAN.md acceptance criteria, run any required validations, and FAIL-FAST if criteria not met"
    },
    {
      "id": "M278",
      "timestamp": "2026-01-27T17:45:00Z",
      "category": "protocol_violation",
      "description": "User said abort task but agent marked as completed instead of restoring to pending",
      "root_cause": "Misinterpreted abort as permanent abandonment. Documentation lacked clarity that abort means restore to pending, not mark completed.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/task-resolution.md",
      "pattern_keywords": [
        "abort",
        "stop",
        "pending",
        "completed",
        "status"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When user says abort/stop task, restore Status to pending and cleanup worktree. Only mark completed when task goals achieved or explicitly declared obsolete/duplicate."
    },
    {
      "id": "M279",
      "timestamp": "2026-01-27T12:00:00Z",
      "category": "protocol_violation",
      "description": "Set decomposed parent tasks to status: completed when subtasks were not yet completed, violating M263 parent task lifecycle",
      "root_cause": "Focused on fixing validation error (invalid 'decomposed' status) without understanding semantic meaning - decomposed parent tasks must remain pending/in-progress until ALL subtasks complete",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-available-issues.sh",
      "pattern_keywords": [
        "decomposed",
        "parent-task",
        "subtask",
        "status-lifecycle",
        "M263"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Decomposed parent tasks must stay status: pending or in-progress until ALL subtasks are completed. Only then mark parent as completed with resolution: decomposed."
    },
    {
      "id": "M280",
      "timestamp": "2026-01-27T14:35:00Z",
      "category": "assumption_without_verification",
      "description": "Assessed priming vulnerability as fixed because external file (COMPRESSION-AGENT.md) existed, missing that orchestrator doc still contained partial actionable guidance",
      "root_cause": "Conflated algorithm encapsulation (external file exists) with zero actionable guidance (orchestrator doc is clean). Partial information like what to preserve/remove can still prime manual bypass attempts.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "priming",
        "encapsulation",
        "external-file",
        "partial-information",
        "orchestrator-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When checking encapsulation, verify orchestrator doc contains ZERO actionable guidance - not just that external file exists. Partial information (what to preserve, what to condense) still enables manual bypass."
    },
    {
      "id": "M281",
      "timestamp": "2026-01-27T18:15:00Z",
      "category": "assumption_without_verification",
      "description": "Used ${CLAUDE_PLUGIN_ROOT}/scripts/... in Bash command without checking if variable was set, resulting in path /scripts/... which doesn't exist",
      "root_cause": "Environment variables like CLAUDE_PLUGIN_ROOT are injected by hook system, not globally available. Direct Bash commands outside hook context have empty variables.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/agent-architecture.md",
      "pattern_keywords": [
        "environment_variable",
        "CLAUDE_PLUGIN_ROOT",
        "hook_context",
        "empty_variable",
        "path"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check if CLAUDE_PLUGIN_ROOT is set before using. If empty, use hardcoded fallback path: /home/node/.config/claude/plugins/cache/cat/cat/2.1"
    },
    {
      "id": "M282",
      "timestamp": "2026-01-27T18:30:00Z",
      "category": "detection_gap",
      "description": "get-available-issues.sh did not check version-level dependencies before scanning tasks in a minor version",
      "root_cause": "find_first_incomplete_minor function checked only if tasks existed with pending/in-progress status, but did not verify the minor version's own dependencies were satisfied first",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-available-issues.sh",
      "pattern_keywords": [
        "version_dependency",
        "find_first_incomplete_minor",
        "dependency_check",
        "scan_order"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check version STATE.md dependencies before scanning tasks in that version. Skip versions whose dependencies are not satisfied."
    },
    {
      "id": "M283",
      "timestamp": "2026-01-27T23:45:10Z",
      "category": "inconsistent_naming",
      "description": "Session ID variable naming inconsistent across files: phase-prepare.md used $SESSION_ID (undefined) instead of ${CLAUDE_SESSION_ID}, phase-merge.md had incorrect {SESSION_ID} placeholders and referenced old script name task-lock.sh",
      "root_cause": "Different developers/sessions used different naming conventions without consistency check. Script internal variable (SESSION_ID) vs environment variable (CLAUDE_SESSION_ID) were conflated in documentation examples.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-prepare.md, ${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-merge.md",
      "pattern_keywords": [
        "session_id",
        "variable_naming",
        "environment_variable",
        "consistency"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always use ${CLAUDE_SESSION_ID} when referencing the session ID environment variable in documentation examples. Scripts can use their own internal variable names (e.g., SESSION_ID) after receiving the value via arguments."
    },
    {
      "id": "M284",
      "timestamp": "2026-01-27T19:30:00Z",
      "category": "protocol_violation",
      "description": "Used manual Glob/Read/Bash exploration for task discovery instead of invoking get-available-issues.sh script first",
      "root_cause": "When CLAUDE_PLUGIN_ROOT environment variable was empty, I assumed the script was unavailable and fell back to manual exploration instead of using the hardcoded path fallback documented in M281",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/concepts/work.md",
      "pattern_keywords": [
        "script-first",
        "task-discovery",
        "fail-fast",
        "environment-variable",
        "hardcoded-fallback"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always invoke get-available-issues.sh with hardcoded path fallback (PLUGIN_ROOT=${CLAUDE_PLUGIN_ROOT:-/home/node/.config/claude/plugins/cache/cat/cat/2.1}). If script fails, report the error and STOP - do not fall back to manual search."
    },
    {
      "id": "M285",
      "timestamp": "2026-01-28T00:43:23Z",
      "category": "protocol_violation",
      "description": "Documentation required environment variable checks that would always fail in Bash tool context",
      "root_cause": "Environment variables set by Claude Code for hooks are not available in Bash tool calls - the fail-fast checks were testing an impossible condition",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "/workspace/plugin/concepts/work.md",
      "pattern_keywords": [
        "fail-fast",
        "environment-variables",
        "fallback",
        "workaround",
        "M281",
        "M282"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Scripts use self-discovery (BASH_SOURCE, git rev-parse) instead of environment variables. Session ID is injected into context by hooks."
    },
    {
      "id": "M286",
      "timestamp": "2026-01-28T19:55:00Z",
      "category": "misleading_documentation",
      "description": "work.md referenced .claude/cat/scripts/get-available-issues.sh but script is at plugin/scripts/get-available-issues.sh",
      "root_cause": "Documentation contained incorrect path (.claude/cat/scripts/) that doesn't exist in the workspace. The correct path is plugin/scripts/ for development context.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/work.md",
      "pattern_keywords": [
        "path",
        "script",
        "get-available-issues",
        "plugin"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use plugin/scripts/get-available-issues.sh for development context, not .claude/cat/scripts/"
    },
    {
      "id": "M287",
      "timestamp": "2026-01-28T12:00:00Z",
      "category": "incomplete_output",
      "description": "Showed progress banner without header when starting /cat:work - header requires TASK_ID which is not yet known",
      "root_cause": "Output template showed Header and Banner formats but did not specify display sequence or timing. Agent showed banner before finding task because it did not know header requires TASK_ID.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/work_handler.py",
      "pattern_keywords": [
        "progress",
        "header",
        "banner",
        "display-sequence",
        "timing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Show Header (🐱 > {TASK_ID}) FIRST after task is found, then show Banner below it. Do not show any progress until task is identified."
    },
    {
      "id": "M288",
      "timestamp": "2026-01-28T10:30:00Z",
      "category": "display_formatting",
      "description": "Progress banner vertical bars misaligned due to fixed-width template not accounting for variable task ID lengths",
      "root_cause": "Template defined fixed 72-character width but middle line content was fixed while top/bottom borders adapted to task ID length, causing misalignment",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/work_handler.py",
      "pattern_keywords": [
        "progress_banner",
        "alignment",
        "display_width",
        "box_drawing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Progress banner uses _build_progress_banner() method that dynamically calculates inner width based on max(header_width, phase_content_width) and pads both lines to match"
    },
    {
      "id": "M280",
      "timestamp": "2026-01-28T15:35:00Z",
      "category": "protocol_violation",
      "description": "Deleted task when user asked to abort - interpreted abort as delete instead of stop",
      "root_cause": "Abort clarification handler (M266) had too-narrow pattern matching - literal strings did not match task names embedded in phrase",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "/workspace/plugin/hooks/prompt_handlers/abort_clarification.py",
      "pattern_keywords": [
        "abort",
        "delete",
        "task",
        "pattern_matching",
        "regex"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use AskUserQuestion to clarify abort intent: stop working vs cleanup worktree vs abandon permanently"
    },
    {
      "id": "M289",
      "timestamp": "2026-01-28T10:30:00Z",
      "category": "protocol_violation",
      "description": "Ignored user question about bullet symbol in progress banner, continued spawning subagents instead of acknowledging",
      "root_cause": "Misinterpreted 'After completing your current task' as 'after entire cat:work workflow' instead of 'after current tool call'. System-reminder language was ambiguous.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "user message",
        "acknowledge",
        "mid-operation",
        "progress banner",
        "system-reminder"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M247",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When system-reminder says IMPORTANT After completing your current task, respond in the NEXT message - do not wait for entire workflow to complete"
    },
    {
      "id": "M290",
      "timestamp": "2026-01-28T11:00:00Z",
      "category": "output_formatting",
      "description": "Progress banner appeared with bullet prefix in terminal - agent wrapped in markdown code blocks instead of outputting raw text",
      "root_cause": "Template examples shown in code blocks, agent copied that pattern. Template lacked explicit instruction to output as raw text without markdown formatting.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/work_handler.py",
      "pattern_keywords": [
        "progress banner",
        "markdown",
        "code block",
        "raw text",
        "formatting"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Output progress banner as raw text - no markdown code blocks, no bullet prefixes, no additional formatting"
    },
    {
      "id": "M291",
      "timestamp": "2026-01-28T03:10:57Z",
      "category": "context_pollution",
      "description": "compare-docs subagents returned full claim extractions to orchestrator, polluting context with unnecessary detail when only score was needed",
      "root_cause": "Skill documentation instructed subagents to 'Return COMPLETE JSON' and 'Return detailed comparison JSON' instead of writing to files and returning minimal status",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "subagent output",
        "context pollution",
        "minimal return",
        "write to file"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Subagents write detailed output to files and return only minimal status (e.g., 'Score: 0.95'). Orchestrator reads files only if details needed for iteration."
    },
    {
      "id": "M292",
      "timestamp": "2026-01-27T22:53:18-05:00",
      "category": "protocol_violation",
      "description": "Used invalid status 'aborted' when aborting task - valid values are only pending/in-progress/completed",
      "root_cause": "Assumed 'aborted' was valid without consulting task-resolution.md documentation which explicitly states only three valid status values",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/concepts/task-resolution.md",
      "pattern_keywords": [
        "status",
        "abort",
        "invalid_value",
        "task_state"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When aborting a task, restore Status to 'pending' (not 'aborted'). Only valid statuses are: pending, in-progress, completed."
    },
    {
      "id": "M293",
      "timestamp": "2026-01-28T10:30:00Z",
      "category": "assumption_without_verification",
      "description": "Stated 'I'll wait for subagents to complete' implying automatic wake-up that doesn't exist",
      "root_cause": "Assumed background task notifications would trigger automatic response without verifying system behavior",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/anti-patterns.md",
      "pattern_keywords": [
        "background_task",
        "wait",
        "subagent",
        "notification",
        "blocking"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Either continue working on other tasks, use TaskOutput to block-wait, or tell user to prompt when ready"
    },
    {
      "id": "M294",
      "timestamp": "2026-01-28T12:00:00Z",
      "category": "protocol_violation",
      "description": "Manual compression bypassed shrink-doc iteration loop - accepted 0.995 score instead of required 1.0",
      "root_cause": "Manually compressed file and invoked compare-docs directly instead of using shrink-doc skill, which has automatic iteration when score < 1.0",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "shrink-doc",
        "compare-docs",
        "score",
        "threshold",
        "iteration",
        "manual"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always invoke /cat:shrink-doc skill which automatically iterates until score = 1.0. Never manually compress and validate."
    },
    {
      "id": "M295",
      "timestamp": "2026-01-28T12:30:00Z",
      "category": "context_degradation",
      "description": "Compare-docs generated report in main agent instead of subagent, polluting context with ~10K+ tokens of intermediate data",
      "root_cause": "Skill design had Step 3 (report generation) executed by main agent after receiving JSON from comparison subagent, instead of having subagent generate final report directly",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/compare-docs/SKILL.md",
      "pattern_keywords": [
        "compare-docs",
        "context",
        "subagent",
        "report",
        "pollution"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Comparison subagent generates formatted report directly. Main agent only relays the final ~500 token report, never sees intermediate JSON."
    },
    {
      "id": "M296",
      "timestamp": "2026-01-28T00:15:00Z",
      "category": "protocol_violation",
      "description": "Main agent manually compressed files and committed without running /compare-docs validation or reporting execution equivalence scores",
      "root_cause": "Rationalized skipping validation as 'efficient for just 2 files' despite PLAN.md acceptance criteria requiring score = 1.0 from /compare-docs",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/shrink-doc/SKILL.md",
      "pattern_keywords": [
        "manual_compression",
        "compare-docs",
        "validation_score",
        "shrink-doc",
        "main_agent",
        "M294"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M294",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "For compression tasks: invoke /cat:shrink-doc skill which handles iteration and validation automatically. Report execution equivalence score for each file. Never manually compress files."
    },
    {
      "id": "M297",
      "timestamp": "2026-01-28T00:20:00Z",
      "category": "protocol_violation",
      "description": "Applied prevention fix to phase-execute.md (generic workflow) instead of shrink-doc/SKILL.md (specific to compression) - violated Fix Location Principle",
      "root_cause": "Did not apply 'deepest document possible' principle from learn-from-mistakes skill. Compression-specific rules belong in shrink-doc, not generic workflow docs.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn-from-mistakes/SKILL.md",
      "pattern_keywords": [
        "fix_location",
        "deepest_document",
        "generic_vs_specific",
        "phase-execute",
        "shrink-doc"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Before implementing prevention, identify the most specific document where the fix applies. Generic workflows (work.md, phase-execute.md) should not contain skill-specific rules."
    },
    {
      "id": "M298",
      "timestamp": "2026-01-28T13:15:00Z",
      "category": "misleading_documentation",
      "description": "Progress banner top line had one extra dash character causing right border misalignment (71 chars instead of 70)",
      "root_cause": "OUTPUT TEMPLATE teaches construction algorithm BEFORE providing examples. Examples have different task ID (2.1-compress-lang-md) than actual task (2.1-compress-md-files), requiring manual modification. Agent applied construction algorithm instead of copying example, miscounted dashes. This is documentation priming - template teaches HOW to build, priming manual construction.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/skill_handlers/work_handler.py",
      "pattern_keywords": [
        "progress_banner",
        "alignment",
        "documentation_priming",
        "M269",
        "construction_algorithm",
        "task_id_mismatch"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M288",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "OUTPUT TEMPLATE should provide dynamically-generated example with ACTUAL task ID, or remove construction algorithm to prevent priming manual construction.",
      "documentation_priming": {
        "document": "work_handler.py OUTPUT TEMPLATE",
        "misleading_section": "Progress Banner Construction steps (lines 435-443)",
        "priming_type": "algorithm_exposure",
        "how_it_misled": "Template teaches construction algorithm, then provides examples with different task ID. Agent applied algorithm instead of copying, miscounted."
      }
    },
    {
      "id": "M299",
      "timestamp": "2026-01-28T13:45:00Z",
      "category": "incomplete_analysis",
      "description": "RCA for M298 stopped at 'manually constructed instead of using template' without investigating WHY. Only found actual root cause (documentation priming) after user pointed out the gap.",
      "root_cause": "Completion bias caused premature RCA termination. learn-from-mistakes skill has Step 1b (documentation path analysis) but no blocking checkpoint that prevents proceeding to recording until RCA reaches system/document cause. Agent stopped at action-level description ('did X wrong') instead of system-level cause ('Y enabled/encouraged X').",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "rca_depth",
        "completion_bias",
        "shallow_analysis",
        "blocking_gate",
        "system_cause"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "RCA must reach system/document level cause. Ask: 'What in the system enabled this mistake?' If answer is blank or 'agent should have...', RCA is incomplete - keep asking why until you can point to a specific file to change."
    },
    {
      "id": "M300",
      "timestamp": "2026-01-28T09:55:00Z",
      "category": "assumption_without_verification",
      "description": "Declared session file inaccessible without investigating - jq query was wrong, not the file",
      "root_cause": "learn-from-mistakes skill Step 1b contains incorrect jq queries assuming top-level tool_use entries, but Claude Code session files nest tool_use inside assistant message content blocks",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/learn/SKILL.md",
      "pattern_keywords": [
        "session-file",
        "jq-query",
        "assumption",
        "investigation"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When jq query returns empty, investigate actual file structure before declaring inaccessible"
    },
    {
      "id": "M301",
      "timestamp": "2026-01-28T09:51:00Z",
      "category": "process_violation",
      "description": "Created JDK infrastructure without writing tests first - violated TDD workflow",
      "root_cause": "PLAN.md template had acceptance criteria but execution steps did not enforce TDD order (tests first)",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/templates/plan.md",
      "pattern_keywords": [
        "tdd",
        "tests-first",
        "execution-steps",
        "plan-template"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "First execution step must create failing tests for acceptance criteria before implementing"
    },
    {
      "id": "M302",
      "timestamp": "2026-01-28T12:00:00Z",
      "category": "protocol_violation",
      "description": "Main agent used Write tool to create JDK infrastructure files directly instead of delegating to subagent",
      "root_cause": "warn-base-branch-edit.sh hook had two bugs: (1) only triggered for Edit not Write tool, (2) early-exit on line 51-57 allowed all edits in task worktrees without warning",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/warn-base-branch-edit.sh",
      "pattern_keywords": [
        "subagent",
        "delegation",
        "Write tool",
        "direct implementation",
        "worktree"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M097",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Main agent should spawn subagent via Task tool for implementation work, even when in task worktree"
    },
    {
      "id": "M303",
      "timestamp": "2026-01-28T10:40:00Z",
      "category": "assumption_without_verification",
      "description": "Used fabricated session ID 'test-session-1' instead of actual session ID from context when testing discovery script",
      "root_cause": "When writing test commands, fabricated placeholder data instead of using real values already available in SessionStart system-reminder",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/work.md",
      "pattern_keywords": [
        "session_id",
        "test_data",
        "placeholder",
        "fabricated"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "Always use the actual session ID from the SessionStart system-reminder in context, never fabricate test data"
    },
    {
      "id": "M304",
      "timestamp": "2026-01-28T12:15:00Z",
      "category": "protocol_violation",
      "description": "Main agent implemented code changes directly instead of delegating to subagent via Task tool",
      "root_cause": "Session instructions specify task creation but don't reinforce that implementation within tasks should be delegated to subagents",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "config",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/inject-session-instructions.sh",
      "pattern_keywords": [
        "delegation",
        "subagent",
        "implementation",
        "Task tool",
        "main agent"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Delegate implementation work to subagents via Task tool; main agent orchestrates and makes decisions"
    },
    {
      "id": "M305",
      "timestamp": "2026-01-28T13:30:00-05:00",
      "category": "documentation_priming",
      "description": "Silent preprocessing pattern collision: literal !`command` in skill documentation was matched by Claude Code pattern expander",
      "root_cause": "Status skill SKILL.md contained literal !`command` patterns in the 'Why Silent Preprocessing?' documentation section. Claude Code's pattern matcher scans the entire skill file and attempted to expand these documentation examples as actual commands, trying to execute just 'command' which failed.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PLUGIN_ROOT}/skills/skill-builder/SKILL.md",
      "pattern_keywords": [
        "silent-preprocessing",
        "pattern-collision",
        "documentation-examples"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "In invocable skills, use descriptive text (exclamation-backtick syntax) instead of literal patterns when documenting the silent preprocessing feature"
    },
    {
      "id": "M306",
      "timestamp": "2026-01-28T13:34:47-05:00",
      "category": "protocol_violation",
      "description": "Used docs: commit type for CLAUDE.md which is Claude-facing config, not user-facing documentation",
      "root_cause": "Commit type table in CLAUDE.md only listed plugin/ paths, not CLAUDE.md itself, creating ambiguity about its classification",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "config",
      "prevention_path": "/workspace/CLAUDE.md",
      "pattern_keywords": [
        "commit-type",
        "docs-vs-config",
        "claude-facing"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use config: for CLAUDE.md and all Claude-facing instruction files; docs: only for user-facing files like README.md"
    },
    {
      "id": "M307",
      "timestamp": "2026-01-28T14:45:00Z",
      "category": "protocol_violation",
      "description": "Main agent directly edited 15 Java files instead of delegating to subagent, ignoring existing warn-base-branch-edit.sh warnings",
      "root_cause": "Hook issues warning but agent proceeded anyway; warning-level prevention insufficient for enforcement",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "hook",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/warn-base-branch-edit.sh",
      "pattern_keywords": [
        "delegation",
        "subagent",
        "warning_ignored",
        "M30x"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "negative",
        "fragility": "medium",
        "catches_variations": true
      },
      "correct_behavior": "When warn-base-branch-edit.sh emits delegation warning, STOP and spawn subagent via Task tool instead of proceeding with direct edit",
      "escalation_needed": "Consider escalating from warning to blocking if this recurs"
    },
    {
      "id": "M308",
      "timestamp": "2026-01-28T15:15:00Z",
      "category": "protocol_violation",
      "description": "Java records lacked constructor validation and Javadoc despite convention requirements",
      "root_cause": "Convention documented class constructors but not record compact constructors; Javadoc requirement only mentioned methods, not classes/records/constructors",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/.claude/cat/conventions/java.md",
      "pattern_keywords": [
        "record",
        "constructor",
        "validation",
        "javadoc",
        "convention_gap"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "All records must have compact constructors with requireThat validation and Javadoc on classes, records, and constructors"
    },
    {
      "id": "M309",
      "timestamp": "2026-01-28T12:00:00Z",
      "category": "protocol_violation",
      "description": "Proposed merge without checking verify config setting or running verification",
      "root_cause": "No workflow enforcement to check cat-config.json verify setting before presenting for user approval",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "documentation",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/build-verification.md",
      "pattern_keywords": [
        "verify",
        "configuration",
        "merge",
        "approval"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Check .claude/cat/cat-config.json verify setting (all/tests/none) before proposing merge. When verify=all, run mvn verify. When verify=tests, run tests only. When verify=none, skip."
    },
    {
      "id": "M310",
      "timestamp": "2026-01-28T22:10:00Z",
      "category": "protocol_violation",
      "description": "Squashed unrelated changes (build-verification.md, retrospectives, session instructions, git-squash skill) into task implementation commit",
      "root_cause": "Treated all config: commits as same topic without applying the test: 'Would reverting this commit break the task implementation?'",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/git-squash/SKILL.md",
      "pattern_keywords": [
        "squash",
        "topic",
        "commit-scope",
        "learning",
        "infrastructure"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Apply topic test before squashing: 'Would reverting this commit break the task implementation?' If no, it's a different topic and should be a separate commit."
    },
    {
      "id": "M311",
      "timestamp": "2026-01-28T18:30:00Z",
      "category": "protocol_violation",
      "description": "Did not display checkpoint box in correct format - typed custom format instead of using pre-rendered output from handler",
      "root_cause": "Documentation did not clearly specify that handler output should be displayed VERBATIM without modification",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-review.md",
      "pattern_keywords": [
        "checkpoint",
        "verbatim",
        "pre-rendered",
        "output-template"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Find CHECKPOINT_TASK_COMPLETE in context and display the pre-rendered box exactly as provided"
    },
    {
      "id": "M312",
      "timestamp": "2026-01-28T18:30:00Z",
      "category": "protocol_violation",
      "description": "Did not show rendered diff before asking for approval - only showed git diff --stat file list instead of actual diff content",
      "root_cause": "Skipped render-diff.py step and did not copy diff output into response text",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-review.md",
      "pattern_keywords": [
        "diff",
        "render-diff",
        "approval-gate",
        "verbatim"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run render-diff.py and copy the 4-column diff output DIRECTLY into response text before presenting approval options"
    },
    {
      "id": "M313",
      "timestamp": "2026-01-28T18:45:00Z",
      "category": "protocol_violation",
      "description": "Showed plain text summary instead of rendered diff when output was persisted to file",
      "root_cause": "No guidance on handling large diffs that get persisted to file - agent assumed summary was acceptable",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-review.md",
      "pattern_keywords": [
        "diff",
        "persisted",
        "large-output",
        "summary",
        "verbatim"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": "M312",
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "When render-diff output is persisted to file, use Read tool to retrieve and display the actual rendered content"
    },
    {
      "id": "M314",
      "timestamp": "2026-01-29T00:00:00Z",
      "category": "user_experience",
      "description": "Did not show progress banner immediately after locking task - user waited through multiple file reads with no visual feedback",
      "root_cause": "phase-prepare.md workflow shows echo after lock acquisition but does not instruct to display progress banner before exploration file reads begin",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-prepare.md",
      "pattern_keywords": [
        "progress_banner",
        "user_feedback",
        "lock_acquired",
        "immediate_display"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Display progress banner IMMEDIATELY after get-available-issues.sh returns with lock acquired, before any exploration file reads"
    },
    {
      "id": "M315",
      "timestamp": "2026-01-29T00:30:00Z",
      "category": "output_formatting",
      "description": "Displayed custom progress banner format instead of using get-progress-banner.sh output which shows all phases with dot symbols (○●◉)",
      "root_cause": "Manually constructed a simplified banner instead of invoking the script that generates the correct multi-phase format with Preparing/Executing/Reviewing/Merging steps",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-prepare.md",
      "pattern_keywords": [
        "progress_banner",
        "get-progress-banner.sh",
        "phase_symbols",
        "workflow_steps"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use get-progress-banner.sh with --phase argument to generate banner showing all workflow steps (○ Pending, ● Complete, ◉ Active)"
    },
    {
      "id": "M316",
      "timestamp": "2026-01-29T01:00:00Z",
      "category": "design_violation",
      "description": "Introduced silent fallback to current working directory when CLAUDE_PROJECT_DIR not set, instead of returning null (fail-fast)",
      "root_cause": "Prioritized convenience (always working) over fail-fast principle; didn't apply session instructions about fail-fast to this specific code",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/hooks/src/io/github/cowwoc/cat/hooks/skills/GetRenderDiffOutput.java",
      "pattern_keywords": [
        "fail_fast",
        "fallback",
        "silent_workaround",
        "environment_variable",
        "preprocessing"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Direct preprocessing methods should return null when required environment variables are not set, not fall back to alternatives"
    },
    {
      "id": "M317",
      "timestamp": "2026-01-29T14:55:00Z",
      "category": "commit_organization",
      "description": "Convention/infrastructure updates committed on task branch instead of base branch",
      "root_cause": "No documented guidance distinguishing enabling infrastructure from task implementation in commit organization",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/concepts/commit-types.md",
      "pattern_keywords": [
        "convention",
        "infrastructure",
        "task_branch",
        "base_branch",
        "commit_organization"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Commit convention and infrastructure updates to base branch first, then rebase task branch to incorporate them"
    },
    {
      "id": "M318",
      "timestamp": "2026-01-30T12:00:00Z",
      "category": "protocol_violation",
      "description": "Skipped approval_gate step for 4 tasks despite trust=medium requiring user approval",
      "root_cause": "Misinterpreted 'auto-continues when trust >= medium' as 'auto-approves' when it only means 'auto-continues to next task after approval'",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/SKILL.md",
      "pattern_keywords": [
        "approval_gate",
        "trust_level",
        "auto-continue",
        "user_approval"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Always invoke AskUserQuestion at approval_gate step unless trust=high. The 'auto-continue' refers to proceeding to next task after approval, not skipping approval."
    },
    {
      "id": "M319",
      "timestamp": "2026-01-30T23:45:00Z",
      "category": "protocol_violation",
      "description": "Wrote informal markdown headers instead of running get-progress-banner.sh script at phase transitions",
      "root_cause": "Documentation mentions the script in bash code blocks but agent wrote informal 'Phase 1: Prepare' markdown instead of actually running the script. The instruction was embedded in bash code rather than being a prominent standalone requirement.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/phase-prepare.md",
      "pattern_keywords": [
        "progress banner",
        "get-progress-banner.sh",
        "phase transition",
        "visual feedback",
        "M314",
        "M315"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Run get-progress-banner.sh script at each phase transition and output the banner directly (not in code blocks) for visual feedback to user"
    },
    {
      "id": "M320",
      "timestamp": "2026-01-30T10:15:00-05:00",
      "category": "misleading_documentation",
      "description": "Included example rendered banner output in M319 prevention doc, priming LLM to construct manually instead of running script",
      "root_cause": "When implementing M319 prevention, added 'The banner looks like: ...' example that teaches the agent what output to produce, bypassing the script. The documentation priming principle (M269/M274/M256) was not applied when creating prevention documentation.",
      "rca_method": "C",
      "rca_method_name": "causal-barrier",
      "prevention_type": "skill",
      "prevention_path": "/workspace/plugin/skills/work/phase-prepare.md",
      "pattern_keywords": [
        "documentation_priming",
        "example_output",
        "script_bypass",
        "manual_construction"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Prevention docs should only describe WHAT to do (run script) not WHAT output looks like. Example output primes manual fabrication."
    },
    {
      "id": "M321",
      "timestamp": "2026-01-31T10:30:00Z",
      "category": "terminology_inconsistency",
      "description": "Pre-rendered work boxes used 'Task' terminology while project uses 'Issue', causing agent to manually construct boxes with correct terminology instead of using templates",
      "root_cause": "The get-work-boxes.py script generated templates with 'Task Complete', 'Task Already Complete' etc. but the project consistently uses 'Issue' terminology. This mismatch caused the agent to believe the templates didn't apply and manually construct boxes with 'Issue Complete'.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-work-boxes.py",
      "pattern_keywords": [
        "terminology",
        "task_vs_issue",
        "pre-rendered_template",
        "box_alignment",
        "manual_construction"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use pre-rendered templates from get-work-boxes.py. Templates now use consistent 'Issue' terminology throughout."
    },
    {
      "id": "M322",
      "timestamp": "2026-01-31T19:10:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed Issue Complete box instead of using script, causing alignment issues",
      "root_cause": "work_handler.py output template placeholders expecting agent to substitute values. When agent replaced placeholders, content length changed and alignment broke. Root fix: add script that renders boxes with actual values and correct width calculations.",
      "rca_method": "B",
      "rca_method_name": "taxonomy",
      "prevention_type": "code_fix",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/scripts/get-issue-complete-box.py",
      "pattern_keywords": [
        "box_construction",
        "alignment",
        "template_copy",
        "pre_rendered"
      ],
      "prevention_implemented": true,
      "prevention_verified": false,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Call get-issue-complete-box.py with actual issue values, copy output verbatim"
    },
    {
      "id": "M323",
      "timestamp": "2026-01-31T19:30:00Z",
      "category": "protocol_violation",
      "description": "Manually constructed Issue Complete box instead of using pre-rendered template, resulting in misaligned borders",
      "root_cause": "When silent preprocessing failed (script not found error in zsh), I constructed the box manually instead of failing fast or using the pre-rendered templates from SKILL.md. Manual box construction always results in misalignment because LLMs cannot count character display widths accurately.",
      "rca_method": "A",
      "rca_method_name": "5-whys",
      "prevention_type": "skill",
      "prevention_path": "${CLAUDE_PROJECT_DIR}/plugin/skills/work/SKILL.md",
      "pattern_keywords": [
        "box alignment",
        "manual construction",
        "pre-rendered",
        "display width",
        "preprocessing failure"
      ],
      "prevention_implemented": true,
      "prevention_verified": true,
      "recurrence_of": null,
      "prevention_quality": {
        "verification_type": "positive",
        "fragility": "low",
        "catches_variations": true
      },
      "correct_behavior": "Use ONLY pre-rendered boxes from SCRIPT OUTPUT sections. If preprocessing fails, report the error and proceed without visual boxes rather than attempting manual construction."
    }
  ]
}
